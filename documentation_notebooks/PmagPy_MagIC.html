
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Working with the MagIC database using PmagPy &#8212; PmagPy Documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Example notebooks" href="../example_notebooks/example_notebooks.html" />
    <link rel="prev" title="Visualizations and more analysis with PmagPy" href="PmagPy_plots_analysis.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/pmagpy_logo_notext.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">PmagPy Documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    PmagPy: An open source package for paleomagnetic data analysis
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Installation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../installation/PmagPy_install.html">
   Installing
   <strong>
    PmagPy
   </strong>
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../installation/osx_pip.html">
     OSX pip install
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../installation/osx_developer.html">
     OSX developer install
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../installation/windows_pip.html">
     Windows pip install
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../installation/windows_developer.html">
     Windows developer install
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../installation/linux_pip.html">
     Linux pip install
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../installation/linux_developer.html">
     Linux developer install
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../installation/troubleshooting.html">
     Troubleshooting installation issues
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../resources/survival_skills.html">
   Survival computer skills
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Documentation notebooks
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Jupyter.html">
   Jupyter Notebooks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="PmagPy_introduction.html">
   Introduction to PmagPy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="PmagPy_calculations.html">
   Calculations with PmagPy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="PmagPy_plots_analysis.html">
   Visualizations and more analysis with PmagPy
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Working with the MagIC database using PmagPy
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Example notebooks
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../example_notebooks/example_notebooks.html">
   Example notebooks
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../example_notebooks/Tauxe_etal_2016.html">
     Tauxe et al. 2016 example notebook
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Programs
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../programs/pmag_gui.html">
   Pmag GUI
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../programs/demag_gui.html">
     Demag GUI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../programs/thellier_gui.html">
     Thellier GUI
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../programs/command_line_programs.html">
   Command line programs
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  MagIC
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../MagIC/MagIC.html">
   MagIC database and file formats
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Function docstrings
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../api/api.html">
   API Reference
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  References
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../references.html">
   References
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/pmagpy/pmagpy-docs/master?urlpath=tree/documentation_notebooks/PmagPy_MagIC.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/pmagpy/pmagpy-docs"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/pmagpy/pmagpy-docs/issues/new?title=Issue%20on%20page%20%2Fdocumentation_notebooks/PmagPy_MagIC.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/documentation_notebooks/PmagPy_MagIC.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Working with the MagIC database using PmagPy
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#overview-of-magic">
     Overview of   MagIC
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#guide-to-pmagpy">
     Guide to PmagPy
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#customizing-this-notebook">
     Customizing this notebook
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-started">
     Get started
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#table-of-contents">
   Table of contents
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#magic-read">
     magic_read
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pmag-magic-write">
     pmag.magic_write
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#combine-magic">
     combine_magic
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convert-ages">
     convert_ages
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#grab-magic-key">
     grab_magic_key
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#magic-select">
     magic_select
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sites-extract">
     sites_extract
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#criteria-extract">
     criteria_extract
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#specimens-extract">
     specimens_extract
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#contributions">
     Contributions
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#download-magic">
       download_magic
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#working-with-a-public-contribution">
         Working with a public contribution:
        </a>
       </li>
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#working-with-a-private-contribution">
         Working with a private contribution
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#upload-magic">
       upload_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cb-add-sites-to-meas-table">
       cb.add_sites_to_meas_table
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cb-get-intensity-col">
       cb.get_intensity_col
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#interacting-with-the-magic-database">
     Interacting with the MagIC database
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conversion-scripts">
   Conversion Scripts
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convert-2-magic">
     convert_2_magic
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#g-asc-magic">
       _2g_asc_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#g-bin-magic">
       _2g_bin_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#agm-magic">
       agm_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#bgc-magic">
       bgc_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cit-magic">
       cit_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#generic-magic">
       generic_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#huji-magic">
       huji_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#huji-sample-magic">
       huji_sample_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#iodp-dscr-lore">
       iodp_dscr_lore
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#iodp-jr6-lore">
       iodp_jr6_lore
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#iodp-srm-lore">
       iodp_srm_lore
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#jr6-jr6-magic">
       jr6_jr6_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#jr6-txt-magic">
       jr6_txt_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#k15-magic">
       k15_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#kly4s-magic">
       kly4s_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#ldeo-magic">
       ldeo_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#livdb-magic">
       livdb_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#mst-magic">
       mst_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#pmd-magic">
       pmd_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sio-magic">
       sio_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sufar4-magic">
       sufar4_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#tdt-magic">
       tdt_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#utrecht-magic">
       utrecht_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#orientation-magic">
       orientation_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#azdip-magic">
       azdip_magic
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-handy-scripts">
     Other handy scripts
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#chartmaker">
       chartmaker
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#clean-up">
     Clean up
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Working with the MagIC database using PmagPy</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Working with the MagIC database using PmagPy
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#overview-of-magic">
     Overview of   MagIC
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#guide-to-pmagpy">
     Guide to PmagPy
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#customizing-this-notebook">
     Customizing this notebook
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-started">
     Get started
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#table-of-contents">
   Table of contents
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#magic-read">
     magic_read
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pmag-magic-write">
     pmag.magic_write
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#combine-magic">
     combine_magic
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convert-ages">
     convert_ages
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#grab-magic-key">
     grab_magic_key
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#magic-select">
     magic_select
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sites-extract">
     sites_extract
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#criteria-extract">
     criteria_extract
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#specimens-extract">
     specimens_extract
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#contributions">
     Contributions
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#download-magic">
       download_magic
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#working-with-a-public-contribution">
         Working with a public contribution:
        </a>
       </li>
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#working-with-a-private-contribution">
         Working with a private contribution
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#upload-magic">
       upload_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cb-add-sites-to-meas-table">
       cb.add_sites_to_meas_table
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cb-get-intensity-col">
       cb.get_intensity_col
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#interacting-with-the-magic-database">
     Interacting with the MagIC database
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conversion-scripts">
   Conversion Scripts
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convert-2-magic">
     convert_2_magic
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#g-asc-magic">
       _2g_asc_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#g-bin-magic">
       _2g_bin_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#agm-magic">
       agm_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#bgc-magic">
       bgc_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cit-magic">
       cit_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#generic-magic">
       generic_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#huji-magic">
       huji_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#huji-sample-magic">
       huji_sample_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#iodp-dscr-lore">
       iodp_dscr_lore
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#iodp-jr6-lore">
       iodp_jr6_lore
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#iodp-srm-lore">
       iodp_srm_lore
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#jr6-jr6-magic">
       jr6_jr6_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#jr6-txt-magic">
       jr6_txt_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#k15-magic">
       k15_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#kly4s-magic">
       kly4s_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#ldeo-magic">
       ldeo_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#livdb-magic">
       livdb_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#mst-magic">
       mst_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#pmd-magic">
       pmd_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sio-magic">
       sio_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sufar4-magic">
       sufar4_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#tdt-magic">
       tdt_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#utrecht-magic">
       utrecht_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#orientation-magic">
       orientation_magic
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#azdip-magic">
       azdip_magic
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-handy-scripts">
     Other handy scripts
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#chartmaker">
       chartmaker
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#clean-up">
     Clean up
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="working-with-the-magic-database-using-pmagpy">
<h1>Working with the MagIC database using PmagPy<a class="headerlink" href="#working-with-the-magic-database-using-pmagpy" title="Permalink to this headline">#</a></h1>
<p>The Magnetics Information Consortium (MagIC) maintains a database of published rock and paleomagnetic data: <a class="reference external" href="https://www.earthref.org/MagIC">https://www.earthref.org/MagIC</a></p>
<p>Many <strong>PmagPy</strong> scripts are designed to work with data in the MagIC format.  This notebook uses Data Model 3.0: <a class="reference external" href="https://www.earthref.org/MagIC/data-models/3.0">https://www.earthref.org/MagIC/data-models/3.0</a></p>
<section id="overview-of-magic">
<h2>Overview of   MagIC<a class="headerlink" href="#overview-of-magic" title="Permalink to this headline">#</a></h2>
<p>The Magnetics Information Consortium (MagIC), hosted at <a class="reference external" href="http://earthref.org/MagIC">http://earthref.org/MagIC</a> is a database that serves as a Findable, Accessible, Interoperable, Reusable (FAIR) archive for paleomagnetic and rock magnetic data. Its data model is fully described here: <a class="reference external" href="https://www2.earthref.org/MagIC/data-models/3.0">https://www2.earthref.org/MagIC/data-models/3.0</a>. Each contribution is associated with a publication via the DOI.  There are nine data tables:</p>
<ul class="simple">
<li><p>contribution: metadata of the associated publication.</p></li>
<li><p>locations: metadata for locations, which are groups of sites (e.g., stratigraphic section, region, etc.)</p></li>
<li><p>sites: metadata and derived data at the site level (units with a common expectation)</p></li>
<li><p>samples: metadata and derived data at the sample level.</p></li>
<li><p>specimens: metadata and derived data at the specimen level.</p></li>
<li><p>criteria: criteria by which data are deemed acceptable</p></li>
<li><p>ages: ages and metadata for sites/samples/specimens</p></li>
<li><p>images: associated images and plots.</p></li>
</ul>
<p>MagIC .txt files all have  the delimiter (tab) and the type of table in the first line and the column headers in the second line:</p>
<p>See the first few lines of a samples.txt table by clicking on and running the following cell:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data_files/3_0/McMurdo/samples.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()[:</span><span class="mi">3</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>tab 	samples
azimuth	azimuth_dec_correction	citations	description	dip	geologic_classes	geologic_types	lat	lithologies	lon	method_codes	orientation_quality	sample	site
260	0	This study	Archived samples from 1965, 66 expeditions.	-57	Extrusive:Igneous	Lava Flow	-77.85	Trachyte	166.64	SO-SIGHT:FS-FD	g	mc01a	mc01
</pre></div>
</div>
</div>
</div>
</section>
<section id="guide-to-pmagpy">
<h2>Guide to PmagPy<a class="headerlink" href="#guide-to-pmagpy" title="Permalink to this headline">#</a></h2>
<p>The notebook is one of a series of notebooks that demonstrate the functionality of PmagPy. The other notebooks are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="PmagPy_introduction.html"><span class="doc std std-doc">PmagPy_introduction.ipynb</span></a> This notebook introduces PmagPy and lists the functions that are demonstrated in the other notebooks.</p></li>
<li><p><a class="reference internal" href="PmagPy_calculations.html"><span class="doc std std-doc">PmagPy_calculations.ipynb</span></a> This notebook demonstrates many of the PmagPy calculation functions such as those that rotate directions, return statistical parameters, and simulate data from specified distributions.</p></li>
<li><p><a class="reference internal" href="PmagPy_plots_analysis.html"><span class="doc std std-doc">PmagPy_plots_analysis.ipynb</span></a> This notebook demonstrates PmagPy functions that can be used to visualize data as well as those that conduct statistical tests that have associated visualizations.</p></li>
</ul>
</section>
<section id="customizing-this-notebook">
<h2>Customizing this notebook<a class="headerlink" href="#customizing-this-notebook" title="Permalink to this headline">#</a></h2>
<p>If you want to make changes to this notebook, you should make a copy (see File menu).  Otherwise each time you update <strong>PmagPy</strong>, your changes will be overwritten.</p>
</section>
<section id="get-started">
<h2>Get started<a class="headerlink" href="#get-started" title="Permalink to this headline">#</a></h2>
<p>To use the functions in this notebook, we have to   import the <strong>PmagPy</strong> modules <strong>pmagplotlib</strong>, <strong>pmag</strong> and <strong>ipmag</strong> and some other handy functions for use in the notebook.  This is done in the following code block which must be executed before running any other code block. To execute, click on the code block and then click on the “Run” button in the menu.</p>
<p>In order to access the example data, this notebook is meant to be run in the PmagPy-data directory (PmagPy directory for developers).</p>
<p>Try it!  Run the code block below (click on the cell and then click ‘Run’):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pmagpy.pmag</span> <span class="k">as</span> <span class="nn">pmag</span>
<span class="kn">import</span> <span class="nn">pmagpy.pmagplotlib</span> <span class="k">as</span> <span class="nn">pmagplotlib</span>
<span class="kn">import</span> <span class="nn">pmagpy.ipmag</span> <span class="k">as</span> <span class="nn">ipmag</span>
<span class="kn">import</span> <span class="nn">pmagpy.contribution_builder</span> <span class="k">as</span> <span class="nn">cb</span>
<span class="kn">from</span> <span class="nn">pmagpy</span> <span class="kn">import</span> <span class="n">convert_2_magic</span> <span class="k">as</span> <span class="n">convert</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span> <span class="c1"># our plotting buddy</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> <span class="c1"># the fabulous NumPy package</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span> <span class="c1"># and of course Pandas</span>
<span class="c1"># test if Basemap and/or cartopy is installed</span>
<span class="n">has_basemap</span><span class="p">,</span> <span class="n">Basemap</span> <span class="o">=</span> <span class="n">pmag</span><span class="o">.</span><span class="n">import_basemap</span><span class="p">()</span>
<span class="n">has_cartopy</span><span class="p">,</span> <span class="n">Cartopy</span> <span class="o">=</span> <span class="n">pmag</span><span class="o">.</span><span class="n">import_cartopy</span><span class="p">()</span>
<span class="c1"># test if xlwt is installed (allows you to export to excel)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">xlwt</span>
    <span class="n">has_xlwt</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">has_xlwt</span> <span class="o">=</span> <span class="kc">False</span>
<span class="c1"># This allows you to make matplotlib plots inside the notebook.  </span>
<span class="o">%</span><span class="k">matplotlib</span> inline 
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">import</span> <span class="nn">os</span> <span class="c1"># import some operating system utilities</span>
<span class="kn">import</span> <span class="nn">zipfile</span> <span class="k">as</span> <span class="nn">zf</span> <span class="c1"># import the zipfile module for unpacking zip files</span>
<span class="kn">import</span> <span class="nn">shutil</span> <span class="k">as</span> <span class="nn">shutil</span> <span class="c1"># another useful module with system utilities</span>
<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">pandas</span><span class="o">,</span> <span class="nn">getpass</span>
<span class="n">api</span> <span class="o">=</span> <span class="s1">&#39;https://api.earthref.org/v1/MagIC/</span><span class="si">{}</span><span class="s1">&#39;</span>


<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">wget</span>
<span class="k">except</span><span class="p">:</span>
    <span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>wget

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;All modules imported!&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>All modules imported!
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="table-of-contents">
<h1>Table of contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">#</a></h1>
<ul class="simple">
<li><p>Functions in <strong>PmagPy_MagIC.ipynb</strong></p>
<ul>
<li><p><a class="reference external" href="#magic_read">reading MagIC files</a> : reading in MagIC formatted files</p></li>
<li><p><a class="reference external" href="#magic_write">writing MagIC files</a> : outputing MagIC formatted files</p></li>
<li><p><a class="reference external" href="#combine_magic">combine_magic</a> : combines two MagIC formatted files of same type</p></li>
<li><p><a class="reference external" href="#convert_ages">convert_ages</a> : convert ages in downloaded MagIC file to Ma</p></li>
<li><p><a class="reference external" href="#grab_magic_key">grab_magic_key</a> : prints out a single column from a MagIC format file</p></li>
<li><p><a class="reference external" href="#magic_select">magic_select</a> : selects data from MagIC format file given conditions (e.g., method_codes contain string)</p></li>
<li><p><a class="reference external" href="#sites_extract">sites_extract</a> : makes excel or latex files from sites.txt for publications</p></li>
<li><p><a class="reference external" href="#criteria_extract">criteria_extract</a> : makes excel or latex files from criteria.txt for publications</p></li>
<li><p><a class="reference external" href="#specimens_extract">specimens_extract</a> : makes excel or latex files from specimens.txt for publications</p></li>
<li><p><a class="reference external" href="#Contributions">contributions</a> work with data model 3.0 MagIC contributions</p>
<ul>
<li><p><a class="reference external" href="#download_magic">download_magic</a> : how to download and unpack a contribution text file from the MagIC website</p></li>
<li><p><a class="reference external" href="#upload_magic">upload_magic</a> : prepares a directory with a MagIC contribution for uploading to MagIC</p></li>
<li><p><a class="reference external" href="#cb.add_sites_to_meas_table">cb.add_sites_to_meas_table</a> : completes a measurements data frame with the information required for plotting by site.</p></li>
<li><p><a class="reference external" href="#cb.get_intensity_col">cb.get_intensity_col</a> : finds the first non-zero type of intensity data in a measurements dataframe.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="#Interacting-with-the-MagIC-database">Interacting with the MagIC database</a>: downloads and uploads MagIC contributions.</p></li>
<li><p><a class="reference external" href="#Conversion-Scripts">conversion scripts</a> : convert many laboratory measurement formats to the MagIC data model 3 format</p>
<ul>
<li><p><a class="reference external" href="#_2g_asc_magic">_2g_asc_magic</a> : converts 2G ascii files to MagIC</p></li>
<li><p><a class="reference external" href="#_2g_bin_magic">_2g_bin_magic</a> : converts 2G binary files to MagIC</p></li>
<li><p><a class="reference external" href="#agm_magic">agm_magic</a> : converts Princeton Measurements alternating gradient force magnetization (AGM) files to MagIC.</p></li>
<li><p><a class="reference external" href="#bgc_magic">bgc_magic</a> : convert Berkeley Geochronology Center files to MagIC.</p></li>
<li><p><a class="reference external" href="#cit_magic">cit_magic</a> : convert Cal Tech format files to MagIC.</p></li>
<li><p><a class="reference external" href="#generic_magic">generic_magic</a> : converts generic files to MagIC.</p></li>
<li><p><a class="reference external" href="#huji_magic">huji_magic</a> : converts Hebrew University, Jerusalem, Israel files to MagIC.</p></li>
<li><p><a class="reference external" href="#huji_sample_magic">huji_sample_magic</a> : converts HUJI files to a MagIC format.</p></li>
<li><p><a class="reference external" href="#iodp_dscr_lore">iodp_dscr_lore</a> : converts IODP discrete measurement files to MagIC</p></li>
<li><p><a class="reference external" href="#iodp_jr6_lore">iodp_jr6_lore</a> : converts IODP JR6 measurement files to MagIC</p></li>
<li><p><a class="reference external" href="#iodp_dscr_lore">iodp_samples_csv</a> : converts IODP samples file to MagIC</p></li>
<li><p><a class="reference external" href="#iodp_srm_lore">iodp_srm_lore</a> : converts IODP archive half measurement files to MagIC</p></li>
<li><p><a class="reference external" href="#jr6_jr6_magic">jr6_jr6_magic</a> : converts the AGICO JR6 spinner .jr6 files to MagIC</p></li>
<li><p><a class="reference external" href="#jr6_txt_magic">jr6_txt_magic</a> : converts the AGICO JR6 .txt files to MagIC</p></li>
<li><p><a class="reference external" href="#k15_magic">k15_magic</a> : converts 15 measurement anisotropy of magnetic susceptibility files to MagIC.</p></li>
<li><p><a class="reference external" href="#kly4s_magic">kly4s_magic</a> : converts SIO KLY4S formatted files to MagIC.</p></li>
<li><p><a class="reference external" href="#ldeo_magic">ldeo_magic</a> : converts Lamont-Doherty files to MagIC.</p></li>
<li><p><a class="reference external" href="#livdb_magic">livdb_magic</a> : converts Liverpool files to MagIC.</p></li>
<li><p><a class="reference external" href="#mst_magic">mst_magic</a> : converts Curie Temperature experimental data to MagIC</p></li>
<li><p><a class="reference external" href="#sio_magic">sio_magic</a> : converts Scripps Institution of Oceanography data files to MagIC</p></li>
<li><p><a class="reference external" href="#sufar4_magic">sufar4_magic</a> : converts AGICO SUFAR program (ver.1.2.) ascii files to MagIC</p></li>
<li><p><a class="reference external" href="#tdt_magic">tdt_magic</a> : converts Thellier Tool files to MagIC</p></li>
<li><p><a class="reference external" href="#utrecht_magic">utrecht_magic</a> : converts Fort Hoofddijk, Utrecht University Robot files to MagIC</p></li>
<li><p><a class="reference external" href="#orientation_magic">orientation_magic</a> : converts an “orient.txt” formatted file with field notebook information into MagIC formatted files</p></li>
<li><p><a class="reference external" href="#azdip_magic">azdip_magic</a> : converts an “azdip” formatted file to a samples.txt file format</p></li>
</ul>
</li>
</ul>
</li>
<li><p>other handy scripts</p>
<ul>
<li><p><a class="reference external" href="#chartmaker">chartmaker</a> : script for making chart to guide IZZI lab experiment</p></li>
</ul>
</li>
</ul>
<section id="magic-read">
<h2>magic_read<a class="headerlink" href="#magic-read" title="Permalink to this headline">#</a></h2>
<ul>
<li><p>MagIC formatted data files can be imported to a notebook in one of two ways: a</p>
<ul class="simple">
<li><p>importing to a Pandas DataFrame using the Pandas pd.read_csv() function</p></li>
<li><p>importing to a list of dictionaries using the pmag.magic_read() function.</p></li>
</ul>
<p>In this notebook, we generally read MagIC tables into a Pandas Dataframe with a command like:</p>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">meas_df</span> <span class="pre">=</span> <span class="pre">pd.read_csv('MEASUREMENTS_FILE_PATH',sep='\t',header=1)</span></code></p>
<p>These data can then be manipulated with <strong>Pandas</strong> functions (<a class="reference external" href="https://pandas.pydata.org/">https://pandas.pydata.org/</a>)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">meas_df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data_files/3_0/McMurdo/measurements.txt&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">meas_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>experiment</th>
      <th>specimen</th>
      <th>measurement</th>
      <th>dir_csd</th>
      <th>dir_dec</th>
      <th>dir_inc</th>
      <th>hyst_charging_mode</th>
      <th>hyst_loop</th>
      <th>hyst_sweep_rate</th>
      <th>treat_ac_field</th>
      <th>...</th>
      <th>timestamp</th>
      <th>magn_r2_det</th>
      <th>magn_x_sigma</th>
      <th>magn_xyz_sigma</th>
      <th>magn_y_sigma</th>
      <th>magn_z_sigma</th>
      <th>susc_chi_mass</th>
      <th>susc_chi_qdr_mass</th>
      <th>susc_chi_qdr_volume</th>
      <th>susc_chi_volume</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>mc01f-LP-DIR-AF</td>
      <td>mc01f</td>
      <td>mc01f-LP-DIR-AF1</td>
      <td>0.4</td>
      <td>171.9</td>
      <td>31.8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0000</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>mc01f-LP-DIR-AF</td>
      <td>mc01f</td>
      <td>mc01f-LP-DIR-AF2</td>
      <td>0.4</td>
      <td>172.0</td>
      <td>30.1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0050</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>mc01f-LP-DIR-AF</td>
      <td>mc01f</td>
      <td>mc01f-LP-DIR-AF3</td>
      <td>0.5</td>
      <td>172.3</td>
      <td>30.4</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0075</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>mc01f-LP-DIR-AF</td>
      <td>mc01f</td>
      <td>mc01f-LP-DIR-AF4</td>
      <td>0.4</td>
      <td>172.1</td>
      <td>30.4</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0100</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>mc01f-LP-DIR-AF</td>
      <td>mc01f</td>
      <td>mc01f-LP-DIR-AF5</td>
      <td>0.5</td>
      <td>171.9</td>
      <td>30.8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0125</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 60 columns</p>
</div></div></div>
</div>
<p>Alternatively, the user may wish to use a list of dictionaries compatible with many <strong>pmag</strong> functions.  For that, use the <strong>pmag.magic_read()</strong> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span> <span class="p">(</span><span class="n">pmag</span><span class="o">.</span><span class="n">magic_read</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function magic_read in module pmagpy.pmag:

magic_read(infile, data=None, return_keys=False, verbose=False)
    Reads  a Magic template file, returns  data in a list of dictionaries.
    
    Parameters
    ___________
        Required:
            infile : the MagIC formatted tab delimited data file
                first line contains &#39;tab&#39; in the first column and the data file type in the second (e.g., measurements, specimen, sample, etc.)
        Optional:
            data : data read in with, e.g., file.readlines()
    Returns
    _______
        list of dictionaries, file type
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">meas_dict</span><span class="p">,</span><span class="n">file_type</span><span class="o">=</span><span class="n">pmag</span><span class="o">.</span><span class="n">magic_read</span><span class="p">(</span><span class="s1">&#39;data_files/3_0/McMurdo/measurements.txt&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">file_type</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">meas_dict</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>measurements
{&#39;experiment&#39;: &#39;mc01f-LP-DIR-AF&#39;, &#39;specimen&#39;: &#39;mc01f&#39;, &#39;measurement&#39;: &#39;mc01f-LP-DIR-AF1&#39;, &#39;dir_csd&#39;: &#39;0.4&#39;, &#39;dir_dec&#39;: &#39;171.9&#39;, &#39;dir_inc&#39;: &#39;31.8&#39;, &#39;hyst_charging_mode&#39;: &#39;&#39;, &#39;hyst_loop&#39;: &#39;&#39;, &#39;hyst_sweep_rate&#39;: &#39;&#39;, &#39;treat_ac_field&#39;: &#39;0.0&#39;, &#39;treat_ac_field_dc_off&#39;: &#39;&#39;, &#39;treat_ac_field_dc_on&#39;: &#39;&#39;, &#39;treat_ac_field_decay_rate&#39;: &#39;&#39;, &#39;treat_dc_field&#39;: &#39;0.0&#39;, &#39;treat_dc_field_ac_off&#39;: &#39;&#39;, &#39;treat_dc_field_ac_on&#39;: &#39;&#39;, &#39;treat_dc_field_decay_rate&#39;: &#39;&#39;, &#39;treat_dc_field_phi&#39;: &#39;0.0&#39;, &#39;treat_dc_field_theta&#39;: &#39;0.0&#39;, &#39;treat_mw_energy&#39;: &#39;&#39;, &#39;treat_mw_integral&#39;: &#39;&#39;, &#39;treat_mw_power&#39;: &#39;&#39;, &#39;treat_mw_time&#39;: &#39;&#39;, &#39;treat_step_num&#39;: &#39;1&#39;, &#39;treat_temp&#39;: &#39;273&#39;, &#39;treat_temp_dc_off&#39;: &#39;&#39;, &#39;treat_temp_dc_on&#39;: &#39;&#39;, &#39;treat_temp_decay_rate&#39;: &#39;&#39;, &#39;magn_mass&#39;: &#39;&#39;, &#39;magn_moment&#39;: &#39;2.7699999999999996e-05&#39;, &#39;magn_volume&#39;: &#39;&#39;, &#39;citations&#39;: &#39;This study&#39;, &#39;instrument_codes&#39;: &#39;&#39;, &#39;method_codes&#39;: &#39;LT-NO:LP-DIR-AF&#39;, &#39;quality&#39;: &#39;g&#39;, &#39;standard&#39;: &#39;u&#39;, &#39;meas_field_ac&#39;: &#39;&#39;, &#39;meas_field_dc&#39;: &#39;&#39;, &#39;meas_freq&#39;: &#39;&#39;, &#39;meas_n_orient&#39;: &#39;&#39;, &#39;meas_orient_phi&#39;: &#39;&#39;, &#39;meas_orient_theta&#39;: &#39;&#39;, &#39;meas_pos_x&#39;: &#39;&#39;, &#39;meas_pos_y&#39;: &#39;&#39;, &#39;meas_pos_z&#39;: &#39;&#39;, &#39;meas_temp&#39;: &#39;273&#39;, &#39;meas_temp_change&#39;: &#39;&#39;, &#39;analysts&#39;: &#39;Jason Steindorf&#39;, &#39;description&#39;: &#39;&#39;, &#39;software_packages&#39;: &#39;pmagpy-1.65b&#39;, &#39;timestamp&#39;: &#39;&#39;, &#39;magn_r2_det&#39;: &#39;&#39;, &#39;magn_x_sigma&#39;: &#39;&#39;, &#39;magn_xyz_sigma&#39;: &#39;&#39;, &#39;magn_y_sigma&#39;: &#39;&#39;, &#39;magn_z_sigma&#39;: &#39;&#39;, &#39;susc_chi_mass&#39;: &#39;&#39;, &#39;susc_chi_qdr_mass&#39;: &#39;&#39;, &#39;susc_chi_qdr_volume&#39;: &#39;&#39;, &#39;susc_chi_volume&#39;: &#39;&#39;}
</pre></div>
</div>
</div>
</div>
</section>
<section id="pmag-magic-write">
<h2>pmag.magic_write<a class="headerlink" href="#pmag-magic-write" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>to write a dataframe out as a MagIC table, just set dataframe=True</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">pmag</span><span class="o">.</span><span class="n">magic_write</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function magic_write in module pmagpy.pmag:

magic_write(ofile, Recs, file_type, dataframe=False)
    Parameters
    _________
    ofile : path to output file
    Recs : list of dictionaries in MagIC format
    file_type : MagIC table type (e.g., specimens)
    dataframe : boolean
        if True, Recs is a pandas dataframe which must be converted
           to a list of dictionaries
    
    Return :
    [True,False] : True if successful
    ofile : same as input
    
    Effects :
        writes a MagIC formatted file from Recs
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmag</span><span class="o">.</span><span class="n">magic_write</span><span class="p">(</span><span class="s1">&#39;my_measurements.txt&#39;</span><span class="p">,</span> <span class="n">meas_df</span><span class="p">,</span> <span class="s1">&#39;measurements&#39;</span><span class="p">,</span><span class="n">dataframe</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>25470  records written to file  my_measurements.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, &#39;my_measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>for a list of dictionaries,  use this syntax</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmag</span><span class="o">.</span><span class="n">magic_write</span><span class="p">(</span><span class="s1">&#39;my_measurements.txt&#39;</span><span class="p">,</span> <span class="n">meas_dict</span><span class="p">,</span> <span class="s1">&#39;measurements&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>25470  records written to file  my_measurements.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, &#39;my_measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
</section>
<section id="combine-magic">
<h2>combine_magic<a class="headerlink" href="#combine-magic" title="Permalink to this headline">#</a></h2>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#combine_magic.py">[command line version]</a></p>
<p>MagIC tables have many columns only some of which are used in a particular instance. So combining files of the same type must be done carefully to ensure that the right data come under the right headings. The program <strong>combine_magic</strong> can be used to combine any number of MagIC files from a given type.<br />
It  reads in MagIC formatted files of a common type (e.g., sites.txt) and combines them into a single file, taking care that all the columns are preserved. For example, if there are both AF and thermal data from a study and we created a measurements.txt formatted file for each, we could use <strong>combine_magic.py</strong> on the command line to combine them together into a single measurements.txt file.   In a notebook, we use  <strong>ipmag.combine_magic()</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function combine_magic in module pmagpy.ipmag:

combine_magic(filenames, outfile=&#39;measurements.txt&#39;, data_model=3, magic_table=&#39;measurements&#39;, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;)
    Takes a list of magic-formatted files, concatenates them, and creates a
    single file. Returns output filename if the operation was successful.
    
    Parameters
    -----------
    filenames : list of MagIC formatted files
    outfile : name of output file [e.g., measurements.txt]
    data_model : data model number (2.5 or 3), default 3
    magic_table : name of magic table, default &#39;measurements&#39;
    dir_path : str
        output directory, default &quot;.&quot;
    input_dir_path : str
        input file directory (if different from dir_path), default &quot;&quot;
    
    
    Returns
    ----------
    outfile name if success, False if failure
</pre></div>
</div>
</div>
</div>
<p>Here we make a list of names of two MagIC formatted measurements.txt files and use <strong>ipmag.combine_magic()</strong> to put them together.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filenames</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;data_files/combine_magic/af_measurements.txt&#39;</span><span class="p">,</span><span class="s1">&#39;../combine_magic/therm_measurements.txt&#39;</span><span class="p">]</span>
<span class="n">outfile</span><span class="o">=</span><span class="s1">&#39;data_files/combine_magic/measurements.txt&#39;</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">filenames</span><span class="p">,</span><span class="n">outfile</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-I- Using online data model
-I- Getting method codes from earthref.org
-I- Importing controlled vocabularies from https://earthref.org
-I- overwriting /Users/nebula/Python/PmagPy/data_files/combine_magic/measurements.txt
-I- 14 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;/Users/nebula/Python/PmagPy/data_files/combine_magic/measurements.txt&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="convert-ages">
<h2>convert_ages<a class="headerlink" href="#convert-ages" title="Permalink to this headline">#</a></h2>
<p>Files downloaded from the MagIC search interface have ages that are in the original units, but what is often desired is for them to be in a single unit.  For example, if we searched the MagIC database for all absolute paleointensity data (records with method codes of ‘LP-PI-TRM’) from the last five million years, the data sets have a variety of age units.  We can use <strong>pmag.convert_ages()</strong>    to convert them all to millions of years.</p>
<p>First we follow the instructions for unpacking downloaded files in <a class="reference external" href="#download_magic">download_magic</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic</span><span class="p">(</span><span class="s1">&#39;magic_downloaded_rows.txt&#39;</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_ages/&#39;</span><span class="p">,</span>
      <span class="n">input_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_ages/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>working on:  &#39;contribution&#39;
1  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_ages/contribution.txt
contribution  data put in  /Users/nebula/Python/PmagPy/data_files/convert_ages/contribution.txt
working on:  &#39;sites&#39;
14317  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_ages/sites.txt
sites  data put in  /Users/nebula/Python/PmagPy/data_files/convert_ages/sites.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>After some minimal filtering using Pandas, we can convert a DataFrame to a list of dictionaries required by most PmagPy functions and use <strong>pmag.convert_ages()</strong> to convert all the ages.  The converted list of dictionaries can then be turned back into a Pandas DataFrame and either plotted or filtered further as desired.</p>
<p>In this example, we filter for data older than the Brunhes (0.78 Ma) and younger than 5 Ma, then plot them against latitude.  We can also use <a class="reference external" href="#vdm_b">vdm_b</a> to plot the intensities expected from the present dipole moment (~80 ZAm<span class="math notranslate nohighlight">\(^2\)</span>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">pmag</span><span class="o">.</span><span class="n">convert_ages</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function convert_ages in module pmagpy.pmag:

convert_ages(Recs, data_model=3)
    converts ages to Ma
    Parameters
    _________
    Recs : list of dictionaries in data model by data_model
    data_model : MagIC data model (default is 3)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># read in the sites.txt file as a dataframe</span>
<span class="n">site_df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data_files/convert_ages/sites.txt&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># get rid aof any records without intensity data or latitude</span>
<span class="n">site_df</span><span class="o">=</span><span class="n">site_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;int_abs&#39;</span><span class="p">,</span><span class="s1">&#39;lat&#39;</span><span class="p">])</span>
<span class="c1"># Pick out the sites with &#39;age&#39; filled in</span>
<span class="n">site_df_age</span><span class="o">=</span><span class="n">site_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">])</span>
<span class="c1"># pick out those with age_low and age_high filled in</span>
<span class="n">site_df_lowhigh</span><span class="o">=</span><span class="n">site_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;age_low&#39;</span><span class="p">,</span><span class="s1">&#39;age_high&#39;</span><span class="p">])</span>
<span class="c1"># concatenate the two</span>
<span class="n">site_all_ages</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">site_df_age</span><span class="p">,</span><span class="n">site_df_lowhigh</span><span class="p">])</span> 
<span class="c1"># get rid of duplicates (records with age, age_high AND age_low)</span>
<span class="n">site_all_ages</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Pandas reads in blanks as NaN, which pmag.convert_ages hates</span>
<span class="c1"># this replaces all the NaNs with blanks</span>
<span class="n">site_all_ages</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># converts to a list of dictionaries</span>
<span class="n">sites</span><span class="o">=</span><span class="n">site_all_ages</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s1">&#39;records&#39;</span><span class="p">)</span>
<span class="c1"># converts the ages to Ma</span>
<span class="n">converted_df</span><span class="o">=</span><span class="n">pmag</span><span class="o">.</span><span class="n">convert_ages</span><span class="p">(</span><span class="n">sites</span><span class="p">)</span>
<span class="c1"># turn it back into a DataFrame</span>
<span class="n">site_ages</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">converted_df</span><span class="p">)</span>
<span class="c1"># filter away</span>
<span class="n">site_ages</span><span class="o">=</span><span class="n">site_ages</span><span class="p">[</span><span class="n">site_ages</span><span class="o">.</span><span class="n">age</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">site_ages</span><span class="o">=</span><span class="n">site_ages</span><span class="p">[</span><span class="n">site_ages</span><span class="o">.</span><span class="n">age</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="o">&gt;=</span><span class="mf">0.05</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s plot them up and see what we get.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">site_ages</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span><span class="n">site_ages</span><span class="o">.</span><span class="n">int_abs</span><span class="o">*</span><span class="mf">1e6</span><span class="p">,</span><span class="s1">&#39;bo&#39;</span><span class="p">)</span>

<span class="c1"># put on the expected values for the present dipole moment (~80 ZAm^2)</span>

<span class="n">lats</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">80</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">vdms</span><span class="o">=</span><span class="mf">80e21</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lats</span><span class="p">))</span>
<span class="n">bs</span><span class="o">=</span><span class="n">pmag</span><span class="o">.</span><span class="n">vdm_b</span><span class="p">(</span><span class="n">vdms</span><span class="p">,</span><span class="n">lats</span><span class="p">)</span><span class="o">*</span><span class="mf">1e6</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">lats</span><span class="p">,</span><span class="n">bs</span><span class="p">,</span><span class="s1">&#39;r-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Latitude&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Intensity ($\mu$T)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/PmagPy_MagIC_26_0.png" src="../_images/PmagPy_MagIC_26_0.png" />
</div>
</div>
<p>That is pretty awful agreement.  Someday we need to figure out what is wrong with the data or  our GAD hypothesis.</p>
</section>
<section id="grab-magic-key">
<h2>grab_magic_key<a class="headerlink" href="#grab-magic-key" title="Permalink to this headline">#</a></h2>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a> <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#grab_magic_key.py">[command line version]</a></p>
<p>Sometimes you want to read in a MagIC file and print out the desired key. <strong>Pandas</strong> makes this easy!  In this example, we will print out latitudes for each site record.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sites</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data_files/download_magic/sites.txt&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">sites</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0     33.067800
1     33.067460
2     33.044630
3     33.043960
4     33.044170
        ...    
86    32.848164
87    32.848164
88    32.848164
89    32.848164
90    32.848164
Name: lat, Length: 91, dtype: float64
</pre></div>
</div>
</div>
</div>
</section>
<section id="magic-select">
<h2>magic_select<a class="headerlink" href="#magic-select" title="Permalink to this headline">#</a></h2>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a> <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#magic_select.py">[command line version]</a></p>
<p>This example demonstrates how to select MagIC records that meet a certain criterion, like having a particular method code.</p>
<p>Note:  to output into a MagIC formatted file, we can change the DataFrame to a list of dictionaries (with df.to_dict(“records”)) and
use <strong>pmag.magic_write()</strong>..</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">pmag</span><span class="o">.</span><span class="n">magic_write</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function magic_write in module pmagpy.pmag:

magic_write(ofile, Recs, file_type)
    Parameters
    _________
    ofile : path to output file
    Recs : list of dictionaries in MagIC format
    file_type : MagIC table type (e.g., specimens)
    
    Return :
    [True,False] : True if successful
    ofile : same as input
    
    Effects :
        writes a MagIC formatted file from Recs
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># read in the data file</span>
<span class="n">spec_df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data_files/magic_select/specimens.txt&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># pick out the desired data </span>
<span class="n">method_key</span><span class="o">=</span><span class="s1">&#39;method_codes&#39;</span> <span class="c1"># change to method_codes for data model 3</span>
<span class="n">spec_df</span><span class="o">=</span><span class="n">spec_df</span><span class="p">[</span><span class="n">spec_df</span><span class="o">.</span><span class="n">method_codes</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;LP-DIR-AF&#39;</span><span class="p">)]</span>
<span class="n">specs</span><span class="o">=</span><span class="n">spec_df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s1">&#39;records&#39;</span><span class="p">)</span> <span class="c1"># export to list of dictionaries</span>
<span class="n">success</span><span class="p">,</span><span class="n">ofile</span><span class="o">=</span><span class="n">pmag</span><span class="o">.</span><span class="n">magic_write</span><span class="p">(</span><span class="s1">&#39;data_files/magic_select/AF_specimens.txt&#39;</span><span class="p">,</span><span class="n">specs</span><span class="p">,</span><span class="s1">&#39;pmag_specimens&#39;</span><span class="p">)</span> <span class="c1"># specimens for data model 3.0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>76  records written to file  data_files/magic_select/AF_specimens.txt
</pre></div>
</div>
</div>
</div>
</section>
<section id="sites-extract">
<h2>sites_extract<a class="headerlink" href="#sites-extract" title="Permalink to this headline">#</a></h2>
<p>It is frequently desirable to format tables for publications from the MagIC formatted files.  This example is for the sites.txt formatted file.  It will create a site information table with the location and age information,  and directions and/or intenisty summary tables.  The function to call is <strong>ipmag.sites_extract()</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">sites_extract</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function sites_extract in module pmagpy.ipmag:

sites_extract(site_file=&#39;sites.txt&#39;, directions_file=&#39;directions.xls&#39;, intensity_file=&#39;intensity.xls&#39;, info_file=&#39;site_info.xls&#39;, output_dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, latex=False)
    Extracts directional and/or intensity data from a MagIC 3.0 format sites.txt file.
    Default output format is an Excel file.
    Optional latex format longtable file which can be uploaded to Overleaf or
    typeset with latex on your own computer.
    
    Parameters
    ___________
    site_file : str
         input file name
    directions_file : str
          output file name for directional data
    intensity_file : str
          output file name for intensity data
    site_info : str
          output file name for site information (lat, lon, location, age....)
    output_dir_path : str
          path for output files
    input_dir_path : str
          path for intput file if different from output_dir_path (default is same)
    latex : boolean
           if True, output file should be latex formatted table with a .tex ending
    
    Return :
        [True,False], error type : True if successful
    
    Effects :
        writes Excel or LaTeX formatted tables for use in publications
</pre></div>
</div>
</div>
</div>
<p>Here is an example for how to create Latex files:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#latex way:</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">sites_extract</span><span class="p">(</span><span class="n">directions_file</span><span class="o">=</span><span class="s1">&#39;directions.tex&#39;</span><span class="p">,</span><span class="n">intensity_file</span><span class="o">=</span><span class="s1">&#39;intensities.tex&#39;</span><span class="p">,</span>
              <span class="n">output_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/3_0/McMurdo&#39;</span><span class="p">,</span><span class="n">info_file</span><span class="o">=</span><span class="s1">&#39;site_info.tex&#39;</span><span class="p">,</span><span class="n">latex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 [&#39;/Users/nebula/Python/PmagPy/data_files/3_0/McMurdo/site_info.tex&#39;,
  &#39;/Users/nebula/Python/PmagPy/data_files/3_0/McMurdo/intensities.tex&#39;,
  &#39;/Users/nebula/Python/PmagPy/data_files/3_0/McMurdo/directions.tex&#39;])
</pre></div>
</div>
</div>
</div>
<p>And here is how to create Excel files:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#xls way:</span>
<span class="k">if</span> <span class="n">has_xlwt</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">sites_extract</span><span class="p">(</span><span class="n">output_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/3_0/McMurdo&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [&#39;/Users/nebula/Python/PmagPy/data_files/3_0/McMurdo/site_info.xls&#39;, &#39;/Users/nebula/Python/PmagPy/data_files/3_0/McMurdo/intensity.xls&#39;, &#39;/Users/nebula/Python/PmagPy/data_files/3_0/McMurdo/directions.xls&#39;])
</pre></div>
</div>
</div>
</div>
</section>
<section id="criteria-extract">
<h2>criteria_extract<a class="headerlink" href="#criteria-extract" title="Permalink to this headline">#</a></h2>
<p>This example is for the criteria.txt formatted file.  It will create a criteria  table suitable for publication in either LaTex or .csv format.  The function to call is <strong>ipmag.criteria_extract()</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">criteria_extract</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function criteria_extract in module pmagpy.ipmag:

criteria_extract(crit_file=&#39;criteria.txt&#39;, output_file=&#39;criteria.xls&#39;, output_dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, latex=False)
    Extracts criteria  from a MagIC 3.0 format criteria.txt file.
    Default output format is an Excel file.
    typeset with latex on your own computer.
    
    Parameters
    ___________
    crit_file : str, default &quot;criteria.txt&quot;
         input file name
    output_file : str, default &quot;criteria.xls&quot;
         output file name
    output_dir_path : str, default &quot;.&quot;
        output file directory
    input_dir_path : str, default &quot;&quot;
          path for intput file if different from output_dir_path (default is same)
    latex : boolean, default False
           if True, output file should be latex formatted table with a .tex ending
    
    Return :
        [True,False],  data table error type : True if successful
    
    Effects :
        writes xls or latex formatted tables for use in publications
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># latex way:</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">criteria_extract</span><span class="p">(</span><span class="n">output_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/3_0/Megiddo&#39;</span><span class="p">,</span>
                       <span class="n">latex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">output_file</span><span class="o">=</span><span class="s1">&#39;criteria.tex&#39;</span><span class="p">,)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [&#39;/Users/nebula/Python/PmagPy/data_files/3_0/Megiddo/criteria.tex&#39;])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#xls way:</span>
<span class="k">if</span> <span class="n">has_xlwt</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">criteria_extract</span><span class="p">(</span><span class="n">output_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/3_0/Megiddo&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [&#39;/Users/nebula/Python/PmagPy/data_files/3_0/Megiddo/criteria.xls&#39;])
</pre></div>
</div>
</div>
</div>
</section>
<section id="specimens-extract">
<h2>specimens_extract<a class="headerlink" href="#specimens-extract" title="Permalink to this headline">#</a></h2>
<p>Similarly, it is useful to make tables for specimen (intensity) data to include in publications.  Here are examples using a specimens.txt file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">specimens_extract</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function specimens_extract in module pmagpy.ipmag:

specimens_extract(spec_file=&#39;specimens.txt&#39;, output_file=&#39;specimens.xls&#39;, landscape=False, longtable=False, output_dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, latex=False)
    Extracts specimen results  from a MagIC 3.0 format specimens.txt file.
    Default output format is an Excel file.
    typeset with latex on your own computer.
    
    Parameters
    ___________
    spec_file : str, default &quot;specimens.txt&quot;
         input file name
    output_file : str, default &quot;specimens.xls&quot;
         output file name
    landscape : boolean, default False
           if True output latex landscape table
    longtable : boolean
           if True output latex longtable
    output_dir_path : str, default &quot;.&quot;
        output file directory
    input_dir_path : str, default &quot;&quot;
          path for intput file if different from output_dir_path (default is same)
    latex : boolean, default False
           if True, output file should be latex formatted table with a .tex ending
    
    Return :
        [True,False],  data table error type : True if successful
    
    Effects :
        writes xls or latex formatted tables for use in publications
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#latex way:</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">specimens_extract</span><span class="p">(</span><span class="n">output_file</span><span class="o">=</span><span class="s1">&#39;specimens.tex&#39;</span><span class="p">,</span><span class="n">landscape</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
              <span class="n">output_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/3_0/Megiddo&#39;</span><span class="p">,</span><span class="n">latex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">longtable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [&#39;/Users/nebula/Python/PmagPy/data_files/3_0/Megiddo/specimens.tex&#39;])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#xls way:</span>
<span class="k">if</span> <span class="n">has_xlwt</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">specimens_extract</span><span class="p">(</span><span class="n">output_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/3_0/Megiddo&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [&#39;/Users/nebula/Python/PmagPy/data_files/3_0/Megiddo/specimens.xls&#39;])
</pre></div>
</div>
</div>
</div>
</section>
<section id="contributions">
<h2>Contributions<a class="headerlink" href="#contributions" title="Permalink to this headline">#</a></h2>
<p>Here are some useful functions for working with MagIC data model 3.0 contributions.</p>
<section id="download-magic">
<h3>download_magic<a class="headerlink" href="#download-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#download_magic.py">[command line version]</a></p>
<section id="working-with-a-public-contribution">
<h4>Working with a public contribution:<a class="headerlink" href="#working-with-a-public-contribution" title="Permalink to this headline">#</a></h4>
<p>The programs ipmag.download_magic_from_id() and ipmag.download_magic_from_doi() download files from the MagIC website and ipmag.download_magic( ) unpacks the downloaded .txt file  into individual text files. This program has an option to also separate the contribution into separate folders for each location.</p>
<p>As an example, download the cotribution with the DOI of 10.1029/2019GC008479.    Make a folder into which you should put the downloaded txt file (called “magic_contribution.txt”)  into it. Then use <strong>ipmag.download_magic</strong> to unpack the .txt file (magic_contribution.txt).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic_from_doi</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function download_magic_from_doi in module pmagpy.ipmag:

download_magic_from_doi(doi)
    Download a public contribution matching the provided DOI
    from earthref.org/MagIC.
    
    Parameters
    ----------
    doi : str
        DOI for a MagIC
    
    Returns
    ---------
    result : bool
    message : str
        Error message if download didn&#39;t succeed
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function download_magic in module pmagpy.ipmag:

download_magic(infile=None, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, overwrite=False, print_progress=True, data_model=3.0, separate_locs=False, txt=&#39;&#39;, excel=False)
    takes the name of a text file downloaded from the MagIC database and
    unpacks it into magic-formatted files. by default, download_magic assumes
    that you are doing everything in your current directory. if not, you may
    provide optional arguments dir_path (where you want the results to go) and
    input_dir_path (where the downloaded file is IF that location is different from
    dir_path).
    
    Parameters
    ----------
    infile : str
        MagIC-format file to unpack
    dir_path : str
        output directory (default &quot;.&quot;)
    input_dir_path : str, default &quot;&quot;
        path for intput file if different from output_dir_path (default is same)
    overwrite: bool
        overwrite current directory (default False)
    print_progress: bool
        verbose output (default True)
    data_model : float
        MagIC data model 2.5 or 3 (default 3)
    separate_locs : bool
        create a separate directory for each location (Location_*)
        (default False)
    txt : str, default &quot;&quot;
        if infile is not provided, you may provide a string with file contents instead
        (useful for downloading MagIC file directly from earthref)
    excel : bool
        input file is an excel spreadsheet (as downloaded from MagIC)
</pre></div>
</div>
</div>
</div>
<p>And here we go…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/download_magic&#39;</span> <span class="c1"># set the path to the correct working directory</span>
<span class="n">reference_doi</span><span class="o">=</span><span class="s1">&#39;10.1029/2019GC008479&#39;</span>  <span class="c1"># set the reference DOI</span>
<span class="n">magic_contribution</span><span class="o">=</span><span class="s1">&#39;magic_contribution.txt&#39;</span> <span class="c1"># default filename for downloaded file</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic_from_doi</span><span class="p">(</span><span class="n">reference_doi</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">magic_contribution</span><span class="p">,</span> <span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">magic_contribution</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic</span><span class="p">(</span><span class="n">magic_contribution</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span><span class="n">print_progress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>16961/magic_contribution_16961.txt extracted to magic_contribution.txt 

1  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/contribution.txt
1  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/locations.txt
91  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/sites.txt
611  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/samples.txt
676  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/specimens.txt
6297  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/measurements.txt
2  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/criteria.txt
91  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/ages.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic_from_id</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function download_magic_from_id in module pmagpy.ipmag:

download_magic_from_id(con_id)
    Download a public contribution matching the provided
    contribution ID from earthref.org/MagIC.
    
    Parameters
    ----------
    doi : str
        DOI for a MagIC
    
    Returns
    ---------
    result : bool
    message : str
        Error message if download didn&#39;t succeed
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/download_magic&#39;</span> <span class="c1"># set the path to the correct working directory</span>
<span class="n">magic_id</span><span class="o">=</span><span class="s1">&#39;16961&#39;</span> <span class="c1"># set the magic ID number</span>
<span class="n">magic_contribution</span><span class="o">=</span><span class="s1">&#39;magic_contribution_&#39;</span><span class="o">+</span><span class="n">magic_id</span><span class="o">+</span><span class="s1">&#39;.txt&#39;</span> <span class="c1"># set the file name string</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic_from_id</span><span class="p">(</span><span class="n">magic_id</span><span class="p">)</span> <span class="c1"># download the contribution from MagIC</span>
<span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">magic_contribution</span><span class="p">,</span> <span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">magic_contribution</span><span class="p">)</span> <span class="c1"># move the contribution to the directory</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic</span><span class="p">(</span><span class="n">magic_contribution</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span><span class="n">print_progress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># unpack the file</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/contribution.txt
1  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/locations.txt
91  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/sites.txt
611  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/samples.txt
676  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/specimens.txt
6297  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/measurements.txt
2  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/criteria.txt
91  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/ages.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>You could look at these data with <strong>dmag_magic</strong> for example… (see the <strong>PmagPy_plots_analysis</strong> notebook).</p>
</section>
<section id="working-with-a-private-contribution">
<h4>Working with a private contribution<a class="headerlink" href="#working-with-a-private-contribution" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p>private contributions are data sets within MagIC that have been uploaded but are not yet attached to a peer reviewed publication.  The purpose is to allow reviewers and publishers to ensure the data quality.</p></li>
<li><p>Once in the private contribution it is possible to download it with a ‘private key’ associated with a MagIC contribution ID number.</p></li>
<li><p>We can download, unpack and examine the contribution if the contribution_id and private_key are known. The URL for the api is also required.</p></li>
</ul>
<p>For this example, we can use the contribution prepared for MagIC in the upload_magic example below and saved as a private contribution.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">api</span> <span class="o">=</span> <span class="s1">&#39;https://api.earthref.org/v1/MagIC/</span><span class="si">{}</span><span class="s1">&#39;</span>
<span class="n">contribution_id</span> <span class="o">=</span> <span class="mi">16960</span>
<span class="n">private_key</span> <span class="o">=</span> <span class="s1">&#39;fa06255d-ec45-473f-9f33-fa2a9bb6d8d8&#39;</span>
<span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/download_magic&#39;</span>

<span class="n">shared_contribution_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">),</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">contribution_id</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="n">private_key</span><span class="p">})</span>
<span class="k">if</span> <span class="p">(</span><span class="n">shared_contribution_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">):</span>
    <span class="n">shared_contribution_text</span> <span class="o">=</span> <span class="n">shared_contribution_response</span><span class="o">.</span><span class="n">text</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">shared_contribution_text</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">200</span><span class="p">],</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="k">elif</span> <span class="p">(</span><span class="n">shared_contribution_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">204</span><span class="p">):</span> <span class="c1"># bad file</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Contribution ID and/or private key do not match any contributions in MagIC.&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error:&#39;</span><span class="p">,</span> <span class="n">shared_contribution_response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;err&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;message&#39;</span><span class="p">],</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
 <span class="c1"># save and unpack downloaded data  </span>
<span class="n">magic_contribution</span><span class="o">=</span><span class="s1">&#39;magic_contribution_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">contribution_id</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.txt&#39;</span>
<span class="n">magic_out</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">magic_contribution</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;backslashreplace&quot;</span><span class="p">)</span>
<span class="n">magic_out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">shared_contribution_text</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic</span><span class="p">(</span><span class="n">magic_contribution</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span><span class="n">print_progress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># unpack the file</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>tab delimited	contribution
id	timestamp	contributor	data_model_version	reference
16960	2019-08-28T20:20:19.374Z	@ltauxe	3.0	10.1029/2019GC008479
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
tab delimited	locations
location	location_ty 

1  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/contribution.txt
1  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/locations.txt
91  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/sites.txt
611  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/samples.txt
676  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/specimens.txt
6297  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/measurements.txt
2  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/criteria.txt
91  records written to file  /Users/ltauxe/PmagPy/data_files/download_magic/ages.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="upload-magic">
<h3>upload_magic<a class="headerlink" href="#upload-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#upload_magic.py">[command line version]</a></p>
<p>We can just turn around and try to upload the file downloaded in <a class="reference external" href="#download_magic">download_magic</a>.  For this we use <strong>ipmag.upload_magic()</strong> in the same directory as for the download.   You can try to upload the file you create to the MagIC data base as a private contribution here: <a class="reference external" href="https://www2.earthref.org/MagIC/upload">https://www2.earthref.org/MagIC/upload</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">upload_magic</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function upload_magic in module pmagpy.ipmag:

upload_magic(concat=False, dir_path=&#39;.&#39;, dmodel=None, vocab=&#39;&#39;, contribution=None, input_dir_path=&#39;&#39;)
    Finds all magic files in a given directory, and compiles them into an
    upload.txt file which can be uploaded into the MagIC database.
    Parameters
    ----------
    concat : boolean where True means do concatenate to upload.txt file in dir_path,
        False means write a new file (default is False)
    dir_path : string for input/output directory (default &quot;.&quot;)
    dmodel : pmagpy data_model.DataModel object,
        if not provided will be created (default None)
    vocab : pmagpy controlled_vocabularies3.Vocabulary object,
        if not provided will be created (default None)
    contribution : pmagpy contribution_builder.Contribution object, if not provided will be created
        in directory (default None)
    input_dir_path : str, default &quot;&quot;
        path for intput files if different from output dir_path (default is same)
    
    Returns
    ----------
    tuple of either: (False, error_message, errors, all_failing_items)
    if there was a problem creating/validating the upload file
    or: (filename, &#39;&#39;, None, None) if the file creation was fully successful.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">upload_magic</span><span class="p">(</span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/download_magic&#39;</span><span class="p">,</span><span class="n">concat</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-I- Removing old error files from /Users/ltauxe/PmagPy/data_files/download_magic: locations_errors.txt, samples_errors.txt, specimens_errors.txt, sites_errors.txt, ages_errors.txt, measurements_errors.txt, criteria_errors.txt, contribution_errors.txt, images_errors.txt
-W- Column &#39;core_depth&#39; isn&#39;t in samples table, skipping it
-W- Column &#39;composite_depth&#39; isn&#39;t in samples table, skipping it
-W- Invalid or missing column names, could not propagate columns
-I- ages file successfully read in
-I- Validating ages
-I- No row errors found!
-I- appending ages data to /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- 91 records written to ages file
-I- ages written to  /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- contribution file successfully read in
-I- Validating contribution
-I- No row errors found!
-I- appending contribution data to /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- 1 records written to contribution file
-I- contribution written to  /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- criteria file successfully read in
-I- Validating criteria
-I- No row errors found!
-I- appending criteria data to /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- 2 records written to criteria file
-I- criteria written to  /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- locations file successfully read in
-I- Validating locations
-I- No row errors found!
-I- appending locations data to /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- 1 records written to locations file
-I- locations written to  /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- measurements file successfully read in
-I- Validating measurements
-I- No row errors found!
-I- appending measurements data to /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- 6297 records written to measurements file
-I- measurements written to  /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- samples file successfully read in
-I- Validating samples
-I- No row errors found!
-I- appending samples data to /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- 611 records written to samples file
-I- samples written to  /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- sites file successfully read in
-I- Validating sites
-I- No row errors found!
-I- appending sites data to /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- 91 records written to sites file
-I- sites written to  /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- specimens file successfully read in
-I- Validating specimens
-I- No row errors found!
-I- appending specimens data to /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
-I- 676 records written to specimens file
-I- specimens written to  /Users/ltauxe/PmagPy/data_files/download_magic/upload.txt
Finished preparing upload file: /Users/ltauxe/PmagPy/data_files/download_magic/Golan-Heights_04.Sep.2020.txt 
-I- Your file has passed validation.  You should be able to upload it to the MagIC database without trouble!
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;/Users/ltauxe/PmagPy/data_files/download_magic/Golan-Heights_04.Sep.2020.txt&#39;,
 &#39;&#39;,
 None,
 None)
</pre></div>
</div>
</div>
</div>
<p>If this were your own study, you could now go to <a class="reference external" href="https://earthref.org/MagIC">https://earthref.org/MagIC</a> and upload your contribution to a Private Workspace, validate, assign a DOI and activate!</p>
</section>
<section id="cb-add-sites-to-meas-table">
<h3>cb.add_sites_to_meas_table<a class="headerlink" href="#cb-add-sites-to-meas-table" title="Permalink to this headline">#</a></h3>
<p>MagIC data model 3 took out redundant columns in the MagIC tables so the hierarchy of specimens (in the measurements and specimens tables) up to samples, sites and locations is lost.  To put these back into the measurement table, we have the function <strong>cb.add_sites_to_meas_table()</strong>, which is super handy when data analysis requires it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">cb</span><span class="o">.</span><span class="n">add_sites_to_meas_table</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function add_sites_to_meas_table in module pmagpy.contribution_builder:

add_sites_to_meas_table(dir_path)
    Add site columns to measurements table (e.g., to plot intensity data),
    or generate an informative error message.
    
    Parameters
    ----------
    dir_path : str
        directory with data files
    
    
    Returns
    ----------
    status : bool
        True if successful, else False
    data : pandas DataFrame
        measurement data with site/sample
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">status</span><span class="p">,</span><span class="n">meas_df</span><span class="o">=</span><span class="n">cb</span><span class="o">.</span><span class="n">add_sites_to_meas_table</span><span class="p">(</span><span class="s1">&#39;data_files/3_0/McMurdo&#39;</span><span class="p">)</span>
<span class="n">meas_df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;experiment&#39;, &#39;specimen&#39;, &#39;measurement&#39;, &#39;dir_csd&#39;, &#39;dir_dec&#39;,
       &#39;dir_inc&#39;, &#39;hyst_charging_mode&#39;, &#39;hyst_loop&#39;, &#39;hyst_sweep_rate&#39;,
       &#39;treat_ac_field&#39;, &#39;treat_ac_field_dc_off&#39;, &#39;treat_ac_field_dc_on&#39;,
       &#39;treat_ac_field_decay_rate&#39;, &#39;treat_dc_field&#39;, &#39;treat_dc_field_ac_off&#39;,
       &#39;treat_dc_field_ac_on&#39;, &#39;treat_dc_field_decay_rate&#39;,
       &#39;treat_dc_field_phi&#39;, &#39;treat_dc_field_theta&#39;, &#39;treat_mw_energy&#39;,
       &#39;treat_mw_integral&#39;, &#39;treat_mw_power&#39;, &#39;treat_mw_time&#39;,
       &#39;treat_step_num&#39;, &#39;treat_temp&#39;, &#39;treat_temp_dc_off&#39;, &#39;treat_temp_dc_on&#39;,
       &#39;treat_temp_decay_rate&#39;, &#39;magn_mass&#39;, &#39;magn_moment&#39;, &#39;magn_volume&#39;,
       &#39;citations&#39;, &#39;instrument_codes&#39;, &#39;method_codes&#39;, &#39;quality&#39;, &#39;standard&#39;,
       &#39;meas_field_ac&#39;, &#39;meas_field_dc&#39;, &#39;meas_freq&#39;, &#39;meas_n_orient&#39;,
       &#39;meas_orient_phi&#39;, &#39;meas_orient_theta&#39;, &#39;meas_pos_x&#39;, &#39;meas_pos_y&#39;,
       &#39;meas_pos_z&#39;, &#39;meas_temp&#39;, &#39;meas_temp_change&#39;, &#39;analysts&#39;,
       &#39;description&#39;, &#39;software_packages&#39;, &#39;timestamp&#39;, &#39;magn_r2_det&#39;,
       &#39;magn_x_sigma&#39;, &#39;magn_xyz_sigma&#39;, &#39;magn_y_sigma&#39;, &#39;magn_z_sigma&#39;,
       &#39;susc_chi_mass&#39;, &#39;susc_chi_qdr_mass&#39;, &#39;susc_chi_qdr_volume&#39;,
       &#39;susc_chi_volume&#39;, &#39;sequence&#39;, &#39;sample&#39;, &#39;site&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
</section>
<section id="cb-get-intensity-col">
<h3>cb.get_intensity_col<a class="headerlink" href="#cb-get-intensity-col" title="Permalink to this headline">#</a></h3>
<p>The MagIC data model has several different forms of magnetization with different normalizations (moment, volume, or mass).  So to find the one used in a particular measurements table we can use this handy function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">cb</span><span class="o">.</span><span class="n">get_intensity_col</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function get_intensity_col in module pmagpy.contribution_builder:

get_intensity_col(data)
    Check measurement dataframe for intensity columns &#39;magn_moment&#39;, &#39;magn_volume&#39;, &#39;magn_mass&#39;,&#39;magn_uncal&#39;.
    Return the first intensity column that is in the dataframe AND has data.
    
    Parameters
    ----------
    data : pandas DataFrame
    
    Returns
    ---------
    str
        intensity method column or &quot;&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">magn_col</span><span class="o">=</span><span class="n">cb</span><span class="o">.</span><span class="n">get_intensity_col</span><span class="p">(</span><span class="n">meas_df</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">magn_col</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>magn_moment
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="interacting-with-the-magic-database">
<h2>Interacting with the MagIC database<a class="headerlink" href="#interacting-with-the-magic-database" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Downloading contributions from the MagIC database
Contributions can be downloaded from the MagIC database in two ways, using either the contribution ID or the publication’s DOI.</p>
<ul>
<li><p>downloading using the contribution ID.  For this we use the function ipmag.download_magic_from_id().</p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic_from_id</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function download_magic_from_id in module pmagpy.ipmag:

download_magic_from_id(con_id)
    Download a public contribution matching the provided
    contribution ID from earthref.org/MagIC.
    
    Parameters
    ----------
    doi : str
        DOI for a MagIC
    
    Returns
    ---------
    result : bool
    message : str
        Error message if download didn&#39;t succeed
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">magic_id</span><span class="o">=</span><span class="s1">&#39;16676&#39;</span> <span class="c1"># set the magic ID number</span>
<span class="n">magic_contribution</span><span class="o">=</span><span class="s1">&#39;magic_contribution_&#39;</span><span class="o">+</span><span class="n">magic_id</span><span class="o">+</span><span class="s1">&#39;.txt&#39;</span> <span class="c1"># set the file name string</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic_from_id</span><span class="p">(</span><span class="n">magic_id</span><span class="p">)</span> <span class="c1"># download the contribution from MagIC</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, &#39;magic_contribution_16676 (1).txt&#39;)
</pre></div>
</div>
</div>
</div>
<p>Then we can unpack it with ipmag.download_magic() as above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic</span><span class="p">(</span><span class="n">magic_contribution</span><span class="p">,</span><span class="n">print_progress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># unpack the file</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1  records written to file  /Users/ltauxe/PmagPy/contribution.txt
1  records written to file  /Users/ltauxe/PmagPy/locations.txt
91  records written to file  /Users/ltauxe/PmagPy/sites.txt
611  records written to file  /Users/ltauxe/PmagPy/samples.txt
676  records written to file  /Users/ltauxe/PmagPy/specimens.txt
6297  records written to file  /Users/ltauxe/PmagPy/measurements.txt
1  records written to file  /Users/ltauxe/PmagPy/criteria.txt
91  records written to file  /Users/ltauxe/PmagPy/ages.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>downloading using the publication DOI. For this we use the function ipmag.download_magic_from_doi().</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic_from_doi</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function download_magic_from_doi in module pmagpy.ipmag:

download_magic_from_doi(doi)
    Download a public contribution matching the provided DOI
    from earthref.org/MagIC.
    
    Parameters
    ----------
    doi : str
        DOI for a MagIC
    
    Returns
    ---------
    result : bool
    message : str
        Error message if download didn&#39;t succeed
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reference_doi</span><span class="o">=</span><span class="s1">&#39;10.1029/2019GC008479&#39;</span>
<span class="n">magic_contribution</span><span class="o">=</span><span class="s1">&#39;magic_contribution.txt&#39;</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic_from_doi</span><span class="p">(</span><span class="n">reference_doi</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic</span><span class="p">(</span><span class="n">magic_contribution</span><span class="p">,</span><span class="n">print_progress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>16961/magic_contribution_16961.txt extracted to magic_contribution.txt 

1  records written to file  /Users/ltauxe/PmagPy/contribution.txt
1  records written to file  /Users/ltauxe/PmagPy/locations.txt
91  records written to file  /Users/ltauxe/PmagPy/sites.txt
611  records written to file  /Users/ltauxe/PmagPy/samples.txt
676  records written to file  /Users/ltauxe/PmagPy/specimens.txt
6297  records written to file  /Users/ltauxe/PmagPy/measurements.txt
2  records written to file  /Users/ltauxe/PmagPy/criteria.txt
91  records written to file  /Users/ltauxe/PmagPy/ages.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>To go the other way (upload to a Private Contribution in the MagIC database,
we must first create a Private Contribution, then upload to it.</p>
<ul class="simple">
<li><p>To create a Private Contribution, we use the API commands requests.post() and requests.put().  You will need an account on Earthref, which requires an ORCID id.  So, once you have that, you can fill in your username and password below.</p></li>
<li><p>First let’s download a file which in this example, we can just re-upload.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># repeat this step from the previous example:</span>
<span class="n">reference_doi</span><span class="o">=</span><span class="s1">&#39;10.1029/2019GC008479&#39;</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">download_magic_from_doi</span><span class="p">(</span><span class="n">reference_doi</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>16961/magic_contribution_16961.txt extracted to magic_contribution.txt 
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, &#39;&#39;)
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Now we can create the Private Contribution in MagIC.  Run each of the next two cells and fill in your own username and password in MagIC.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">username</span><span class="o">=</span><span class="nb">input</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ltauxe
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">password</span><span class="o">=</span><span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>········
</pre></div>
</div>
</div>
</div>
<p>To create the contribution, run the following code:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">response</span><span class="o">=</span><span class="n">ipmag</span><span class="o">.</span><span class="n">create_private_contribution</span><span class="p">(</span> <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
<span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;status_code&#39;</span><span class="p">]:</span>
    <span class="n">contribution_id</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Created private contribution with ID&#39;</span><span class="p">,</span> <span class="n">contribution_id</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Create Private Contribution Error:&#39;</span><span class="p">,</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;errors&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Created private contribution with ID 19241 
</pre></div>
</div>
</div>
</div>
<p>And upload what we just downloaded (or your own upload file)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">response</span><span class="o">=</span><span class="n">ipmag</span><span class="o">.</span><span class="n">upload_to_private_contribution</span><span class="p">(</span><span class="n">contribution_id</span><span class="p">,</span><span class="n">magic_contribution</span><span class="p">,</span>
                                              <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
<span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;status_code&#39;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Uploaded a text file to private contribution with ID&#39;</span><span class="p">,</span> <span class="n">contribution_id</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Upload Private Contribution Error:&#39;</span><span class="p">,</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;errors&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Uploaded a text file to private contribution with ID 19241 
</pre></div>
</div>
</div>
</div>
<p>To validate the file we just uploaded….</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">response</span><span class="o">=</span><span class="n">ipmag</span><span class="o">.</span><span class="n">validate_private_contribution</span><span class="p">(</span><span class="n">contribution_id</span><span class="p">,</span>
                                             <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Validated contribution with ID 19241 :
 [{&#39;table&#39;: &#39;contribution&#39;, &#39;column&#39;: &#39;reference&#39;, &#39;message&#39;: &#39;The contribution table is missing required column &quot;reference&quot;.&#39;, &#39;rows&#39;: [1]}, {&#39;table&#39;: &#39;contribution&#39;, &#39;column&#39;: &#39;lab_names&#39;, &#39;message&#39;: &#39;The contribution table is missing required column &quot;lab_names&quot;.&#39;, &#39;rows&#39;: [1]}]
{&#39;status_code&#39;: True, &#39;errors&#39;: &#39;None&#39;, &#39;method&#39;: &#39;POST&#39;, &#39;contribution_id&#39;: 19241, &#39;url&#39;: &#39;https://api.earthref.org/v1/MagIC/private/validate?id=19241&#39;, &#39;validation_results&#39;: [{&#39;table&#39;: &#39;contribution&#39;, &#39;column&#39;: &#39;reference&#39;, &#39;message&#39;: &#39;The contribution table is missing required column &quot;reference&quot;.&#39;, &#39;rows&#39;: [1]}, {&#39;table&#39;: &#39;contribution&#39;, &#39;column&#39;: &#39;lab_names&#39;, &#39;message&#39;: &#39;The contribution table is missing required column &quot;lab_names&quot;.&#39;, &#39;rows&#39;: [1]}]}
</pre></div>
</div>
</div>
</div>
<p>There are some errors, because of the new requirement of ‘lab_names’ in the contribution.txt file - This could be fixed, re-uploaded and re-validated if desired.</p>
<p>And cleanup!</p>
<ul class="simple">
<li><p>remove contribution file from this directory and from Earthref</p></li>
<li><p>remove the downloaded files!</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># delete a private contribution</span>
<span class="n">response</span><span class="o">=</span><span class="n">ipmag</span><span class="o">.</span><span class="n">delete_private_contribution</span><span class="p">(</span><span class="n">contribution_id</span><span class="p">,</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;status_code&#39;: True, &#39;errors&#39;: &#39;None&#39;, &#39;method&#39;: &#39;DELETE&#39;, &#39;url&#39;: &#39;https://api.earthref.org/v1/MagIC/private?id=19241&#39;, &#39;id&#39;: 19241}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># delete the downloaded files!</span>

<span class="n">remove_these</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;contribution.txt&#39;</span><span class="p">,</span><span class="s1">&#39;locations.txt&#39;</span><span class="p">,</span><span class="s1">&#39;sites.txt&#39;</span><span class="p">,</span><span class="s1">&#39;samples.txt&#39;</span><span class="p">,</span>
              <span class="s1">&#39;specimens.txt&#39;</span><span class="p">,</span><span class="s1">&#39;measurements.txt&#39;</span><span class="p">,</span><span class="s1">&#39;criteria.txt&#39;</span><span class="p">,</span><span class="s1">&#39;ages.txt&#39;</span><span class="p">,</span>
             <span class="s1">&#39;magic_contribution.txt&#39;</span><span class="p">,</span><span class="s1">&#39;magic_contribution&#39;</span><span class="p">,</span><span class="s1">&#39;magic_contribution.txt&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">remove_these</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s1">&#39;no such file&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>contribution.txt no such file
locations.txt no such file
sites.txt no such file
samples.txt no such file
specimens.txt no such file
measurements.txt no such file
criteria.txt no such file
ages.txt no such file
magic_contribution.txt no such file
magic_contribution no such file
magic_contribution.txt no such file
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="conversion-scripts">
<h1>Conversion Scripts<a class="headerlink" href="#conversion-scripts" title="Permalink to this headline">#</a></h1>
<section id="convert-2-magic">
<h2>convert_2_magic<a class="headerlink" href="#convert-2-magic" title="Permalink to this headline">#</a></h2>
<p>We imported this module as <strong>convert</strong>.  It provides many functions for creating MagIC format files from non-MagIC formats. The MagIC formatted files can then be used with PmagPy programs and uploaded to the MagIC database. Let’s take a look at the options:</p>
<section id="g-asc-magic">
<h3>_2g_asc_magic<a class="headerlink" href="#g-asc-magic" title="Permalink to this headline">#</a></h3>
<p>To convert the ascii file exported from 2G Enterprises measurement files we use convert._2g_asc() function in the <strong>convert_2_magic</strong> module (inported as <strong>convert</strong>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">_2g_asc</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function _2g_asc in module pmagpy.convert_2_magic:

_2g_asc(dir_path=&#39;.&#39;, mag_file=&#39;&#39;, meas_file=&#39;measurements.txt&#39;, spec_file=&#39;specimens.txt&#39;, samp_file=&#39;samples.txt&#39;, site_file=&#39;sites.txt&#39;, loc_file=&#39;locations.txt&#39;, or_con=&#39;3&#39;, specnum=0, samp_con=&#39;2&#39;, gmeths=&#39;FS-FD:SO-POM&#39;, location=&#39;Not Specified&#39;, inst=&#39;&#39;, user=&#39;&#39;, noave=False, input_dir=&#39;&#39;, savelast=False, experiment=&#39;Demag&#39;)
     Convert 2G ascii format file to MagIC file(s)
    
     Parameters
     ----------
     dir_path : str
         output directory, default &quot;.&quot;
     mag_file : str
         input file name
     meas_file : str
         output measurement file name, default &quot;measurements.txt&quot;
     spec_file : str
         output specimen file name, default &quot;specimens.txt&quot;
     samp_file: str
         output sample file name, default &quot;samples.txt&quot;
     site_file : str
         output site file name, default &quot;sites.txt&quot;
     loc_file : str
         output location file name, default &quot;locations.txt&quot;
     or_con : number
         orientation convention, default &#39;3&#39;, see info below
     specnum : int
         number of characters to designate a specimen, default 0
     samp_con : str
         (specimen/)sample/site naming convention, default &#39;2&#39;, see info below
     gmeths : str
         sampling method codes, default &quot;FS-FD:SO-POM&quot;, see info below
     location : str
         location name, default &quot;unknown&quot;
     inst : str
         instrument, default &quot;&quot;
     user : str
         user name, default &quot;&quot;
     noave : bool
        do not average duplicate measurements, default False (so by default, DO average)
     savelast : bool
        take the last measurement if replicates at treatment step, default is False
     input_dir : str
         input file directory IF different from dir_path, default &quot;&quot;
     experiment : str
         experiment type, see info below;  default is Demag
     cooling_times_list : list
         cooling times in [K/minutes] seperated by comma,
         ordered at the same order as XXX.10,XXX.20 ...XX.70
    
     Returns
     ---------
     Tuple : (True or False indicating if conversion was successful, meas_file name written)
    
    
     Info
     ----------
     Orientation convention:
         [1] Lab arrow azimuth= mag_azimuth; Lab arrow dip=-field_dip
             i.e., field_dip is degrees from vertical down - the hade [default]
         [2] Lab arrow azimuth = mag_azimuth-90; Lab arrow dip = -field_dip
             i.e., mag_azimuth is strike and field_dip is hade
         [3] Lab arrow azimuth = mag_azimuth; Lab arrow dip = 90-field_dip
             i.e.,  lab arrow same as field arrow, but field_dip was a hade.
         [4] lab azimuth and dip are same as mag_azimuth, field_dip
         [5] lab azimuth is same as mag_azimuth,lab arrow dip=field_dip-90
         [6] Lab arrow azimuth = mag_azimuth-90; Lab arrow dip = 90-field_dip
         [7] all others you will have to either customize your
             self or e-mail ltauxe@ucsd.edu for help.
    
    Sample naming convention:
         [1] XXXXY: where XXXX is an arbitrary length site designation and Y
             is the single character sample designation.  e.g., TG001a is the
             first sample from site TG001.    [default]
         [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitrary length)
         [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitrary length)
         [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
         [5] site name = sample name
         [6] site name entered in site_name column in the orient.txt format input file  -- NOT CURRENTLY SUPPORTED
         [7-Z] [XXX]YYY:  XXX is site designation with Z characters from samples  XXXYYY
        [8] siteName_sample_specimen: the three are differentiated with &#39;_&#39;
    
     Sampling method codes:
          FS-FD field sampling done with a drill
          FS-H field sampling done with hand samples
          FS-LOC-GPS  field location done with GPS
          FS-LOC-MAP  field location done with map
          SO-POM   a Pomeroy orientation device was used
          SO-ASC   an ASC orientation device was used
          SO-MAG   orientation with magnetic compass
          SO-SUN   orientation with sun compass
    
     Experiment type:
         Demag:
             AF and/or Thermal
         NOTE: no other experiment types supported yet - please post request on github.org/PmagPy/PmagPy
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set input directory</span>
<span class="n">input_dir</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/2g_asc_magic/_2g_asc&#39;</span>
<span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/2g_asc_magic&#39;</span> <span class="c1"># output  directory</span>
<span class="n">files</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">input_dir</span><span class="p">)</span> <span class="c1"># get a list of files</span>
<span class="c1"># make containers for output files</span>
<span class="n">measfiles</span><span class="p">,</span><span class="n">specfiles</span><span class="p">,</span><span class="n">sampfiles</span><span class="p">,</span><span class="n">sitefiles</span><span class="p">,</span><span class="n">locfiles</span><span class="o">=</span><span class="p">[],[],[],[],[]</span>
<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">files</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">file</span><span class="o">+</span><span class="s1">&#39;_samples.txt&#39;</span><span class="p">)</span> <span class="c1"># remove existing files if any</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">if</span> <span class="s1">&#39;.DS_Store&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">file</span> <span class="ow">and</span> <span class="s1">&#39;README&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;working on &#39;</span><span class="p">,</span><span class="n">file</span><span class="p">)</span>
        <span class="c1"># set output file names</span>
        <span class="n">meas_file</span><span class="p">,</span><span class="n">spec_file</span><span class="p">,</span><span class="n">samp_file</span><span class="p">,</span><span class="n">site_file</span><span class="o">=</span><span class="n">file</span><span class="o">+</span><span class="s1">&#39;.magic&#39;</span><span class="p">,</span><span class="n">file</span><span class="o">+</span><span class="s1">&#39;_specimens.txt&#39;</span><span class="p">,</span><span class="n">file</span><span class="o">+</span><span class="s1">&#39;_samples.txt&#39;</span><span class="p">,</span><span class="n">file</span><span class="o">+</span><span class="s1">&#39;_sites.txt&#39;</span>
        <span class="n">loc_file</span><span class="o">=</span><span class="n">file</span><span class="o">+</span><span class="s1">&#39;_locations.txt&#39;</span>
        <span class="c1"># convert the ascii file to magic format</span>
        <span class="n">convert</span><span class="o">.</span><span class="n">_2g_asc</span><span class="p">(</span><span class="n">mag_file</span><span class="o">=</span><span class="n">file</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span><span class="n">input_dir</span><span class="o">=</span><span class="n">input_dir</span><span class="p">,</span><span class="n">meas_file</span><span class="o">=</span><span class="n">meas_file</span><span class="p">,</span><span class="n">spec_file</span><span class="o">=</span><span class="n">spec_file</span><span class="p">,</span>
            <span class="n">samp_file</span><span class="o">=</span><span class="n">samp_file</span><span class="p">,</span><span class="n">site_file</span><span class="o">=</span><span class="n">site_file</span><span class="p">,</span><span class="n">loc_file</span><span class="o">=</span><span class="n">loc_file</span><span class="p">,</span><span class="n">samp_con</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="n">or_con</span><span class="o">=</span><span class="s1">&#39;5&#39;</span><span class="p">)</span>
        <span class="n">measfiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">meas_file</span><span class="p">)</span> <span class="c1"># add output file to list of output files</span>
        <span class="n">specfiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">spec_file</span><span class="p">)</span>
        <span class="n">sampfiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">samp_file</span><span class="p">)</span>
        <span class="n">sitefiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">site_file</span><span class="p">)</span>
        <span class="n">locfiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loc_file</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">measfiles</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">)</span> <span class="c1"># combine the output files together</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">specfiles</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span><span class="n">outfile</span><span class="o">=</span><span class="s1">&#39;specimens.txt&#39;</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">sampfiles</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span><span class="n">outfile</span><span class="o">=</span><span class="s1">&#39;samples.txt&#39;</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">sitefiles</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span><span class="n">outfile</span><span class="o">=</span><span class="s1">&#39;sites.txt&#39;</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">locfiles</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span><span class="n">outfile</span><span class="o">=</span><span class="s1">&#39;locations.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>working on  DR3B.asc
importing  DR3B
21  records written to file  /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/DR3B.asc.magic
1  records written to file  /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/DR3B.asc_specimens.txt
1  records written to file  /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/DR3B.asc_samples.txt
1  records written to file  /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/DR3B.asc_sites.txt
1  records written to file  /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/DR3B.asc_locations.txt
working on  OK3_15af.asc
importing  OK3_15af
12  records written to file  /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/OK3_15af.asc.magic
1  records written to file  /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/OK3_15af.asc_specimens.txt
1  records written to file  /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/OK3_15af.asc_samples.txt
1  records written to file  /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/OK3_15af.asc_sites.txt
1  records written to file  /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/OK3_15af.asc_locations.txt
[&#39;/Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/DR3B.asc.magic&#39;, &#39;/Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/OK3_15af.asc.magic&#39;]
-I- writing measurements records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/measurements.txt
-I- 33 records written to measurements file
[&#39;/Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/DR3B.asc_specimens.txt&#39;, &#39;/Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/OK3_15af.asc_specimens.txt&#39;]
-I- writing specimens records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/specimens.txt
-I- 2 records written to specimens file
[&#39;/Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/DR3B.asc_samples.txt&#39;, &#39;/Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/OK3_15af.asc_samples.txt&#39;]
-I- writing samples records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/samples.txt
-I- 2 records written to samples file
[&#39;/Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/DR3B.asc_sites.txt&#39;, &#39;/Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/OK3_15af.asc_sites.txt&#39;]
-I- writing sites records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/sites.txt
-I- 2 records written to sites file
[&#39;/Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/DR3B.asc_locations.txt&#39;, &#39;/Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/OK3_15af.asc_locations.txt&#39;]
-I- writing locations records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/locations.txt
-I- 2 records written to locations file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;/Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_asc_magic/locations.txt&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="g-bin-magic">
<h3>_2g_bin_magic<a class="headerlink" href="#g-bin-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#_2g_bin_magic.py">[command line version]</a></p>
<p>To convert the binary formatted 2G Enterprises measurement files, we  can use the function <strong>convert._2g_bin()</strong> in the <strong>convert_2_magic</strong> module (imported as <strong>convert</strong>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">_2g_bin</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function _2g_bin in module pmagpy.convert_2_magic:

_2g_bin(dir_path=&#39;.&#39;, mag_file=&#39;&#39;, meas_file=&#39;measurements.txt&#39;, spec_file=&#39;specimens.txt&#39;, samp_file=&#39;samples.txt&#39;, site_file=&#39;sites.txt&#39;, loc_file=&#39;locations.txt&#39;, or_con=&#39;3&#39;, specnum=0, samp_con=&#39;2&#39;, corr=&#39;1&#39;, gmeths=&#39;FS-FD:SO-POM&#39;, location=&#39;unknown&#39;, inst=&#39;&#39;, user=&#39;&#39;, noave=False, input_dir=&#39;&#39;, lat=&#39;&#39;, lon=&#39;&#39;)
     Convert 2G binary format file to MagIC file(s)
    
     Parameters
     ----------
     dir_path : str
         output directory, default &quot;.&quot;
     mag_file : str
         input file name
     meas_file : str
         output measurement file name, default &quot;measurements.txt&quot;
     spec_file : str
         output specimen file name, default &quot;specimens.txt&quot;
     samp_file: str
         output sample file name, default &quot;samples.txt&quot;
     site_file : str
         output site file name, default &quot;sites.txt&quot;
     loc_file : str
         output location file name, default &quot;locations.txt&quot;
     or_con : number
         orientation convention, default &#39;3&#39;, see info below
     specnum : int
         number of characters to designate a specimen, default 0
     samp_con : str
         sample/site naming convention, default &#39;2&#39;, see info below
     corr: str
         default &#39;1&#39;
     gmeths : str
         sampling method codes, default &quot;FS-FD:SO-POM&quot;, see info below
     location : str
         location name, default &quot;unknown&quot;
     inst : str
         instrument, default &quot;&quot;
     user : str
         user name, default &quot;&quot;
     noave : bool
        do not average duplicate measurements, default False (so by default, DO average)
     input_dir : str
         input file directory IF different from dir_path, default &quot;&quot;
     lat : float
         latitude, default &quot;&quot;
     lon : float
         longitude, default &quot;&quot;
    
     Returns
     ---------
     Tuple : (True or False indicating if conversion was sucessful, meas_file name written)
    
    
     Info
     ----------
     Orientation convention:
         [1] Lab arrow azimuth= mag_azimuth; Lab arrow dip=-field_dip
             i.e., field_dip is degrees from vertical down - the hade [default]
         [2] Lab arrow azimuth = mag_azimuth-90; Lab arrow dip = -field_dip
             i.e., mag_azimuth is strike and field_dip is hade
         [3] Lab arrow azimuth = mag_azimuth; Lab arrow dip = 90-field_dip
             i.e.,  lab arrow same as field arrow, but field_dip was a hade.
         [4] lab azimuth and dip are same as mag_azimuth, field_dip
         [5] lab azimuth is same as mag_azimuth,lab arrow dip=field_dip-90
         [6] Lab arrow azimuth = mag_azimuth-90; Lab arrow dip = 90-field_dip
         [7] all others you will have to either customize your
             self or e-mail ltauxe@ucsd.edu for help.
    
    Sample naming convention:
         [1] XXXXY: where XXXX is an arbitrary length site designation and Y
             is the single character sample designation.  e.g., TG001a is the
             first sample from site TG001.    [default]
         [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
         [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
         [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
         [5] site name = sample name
         [6] site name entered in site_name column in the orient.txt format input file  -- NOT CURRENTLY SUPPORTED
         [7-Z] [XXX]YYY:  XXX is site designation with Z characters from samples  XXXYYY
    
     Sampling method codes:
          FS-FD field sampling done with a drill
          FS-H field sampling done with hand samples
          FS-LOC-GPS  field location done with GPS
          FS-LOC-MAP  field location done with map
          SO-POM   a Pomeroy orientation device was used
          SO-ASC   an ASC orientation device was used
          SO-MAG   orientation with magnetic compass
          SO-SUN   orientation with sun compass
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set the input directory</span>
<span class="n">input_dir</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/2g_bin_magic/mn1/&#39;</span>
<span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/2g_bin_magic&#39;</span>
<span class="n">mag_file</span><span class="o">=</span><span class="s1">&#39;mn001-1a.dat&#39;</span>
<span class="n">convert</span><span class="o">.</span><span class="n">_2g_bin</span><span class="p">(</span><span class="n">mag_file</span><span class="o">=</span><span class="n">mag_file</span><span class="p">,</span><span class="n">input_dir</span><span class="o">=</span><span class="n">input_dir</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>importing  mn001-1a
24  records written to file  /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_bin_magic/measurements.txt
-I- overwriting /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_bin_magic/specimens.txt
-I- 1 records written to specimens file
-I- overwriting /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_bin_magic/samples.txt
-I- 1 records written to samples file
-I- overwriting /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_bin_magic/sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/ltauxe/PmagPy/data_files/convert_2_magic/2g_bin_magic/locations.txt
-I- 1 records written to locations file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, &#39;measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<p>These are measurement data for a single specimen, so we can take a quickie look at the data in an equal area projection.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">plot_di</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function plot_di in module pmagpy.ipmag:

plot_di(dec=None, inc=None, di_block=None, color=&#39;k&#39;, marker=&#39;o&#39;, markersize=20, legend=&#39;no&#39;, label=&#39;&#39;, title=&#39;&#39;, edge=&#39;&#39;, alpha=1)
    Plot declination, inclination data on an equal area plot.
    
    Before this function is called a plot needs to be initialized with code that looks
    something like:
    &gt;fignum = 1
    &gt;plt.figure(num=fignum,figsize=(10,10),dpi=160)
    &gt;ipmag.plot_net(fignum)
    
    Required Parameters
    -----------
    dec : declination being plotted
    inc : inclination being plotted
    
    or
    
    di_block: a nested list of [dec,inc,1.0]
    (di_block can be provided instead of dec, inc in which case it will be used)
    
    Optional Parameters (defaults are used if not specified)
    -----------
    color : the default color is black. Other colors can be chosen (e.g. &#39;r&#39;)
    marker : the default marker is a circle (&#39;o&#39;)
    markersize : default size is 20
    label : the default label is blank (&#39;&#39;)
    legend : the default is no legend (&#39;no&#39;). Putting &#39;yes&#39; will plot a legend.
    edge : marker edge color - if blank, is color of marker
    alpha : opacity
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">meas_df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;/measurements.txt&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">plot_net</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">plot_di</span><span class="p">(</span><span class="n">dec</span><span class="o">=</span><span class="n">meas_df</span><span class="p">[</span><span class="s1">&#39;dir_dec&#39;</span><span class="p">],</span><span class="n">inc</span><span class="o">=</span><span class="n">meas_df</span><span class="p">[</span><span class="s1">&#39;dir_inc&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/PmagPy_MagIC_100_0.png" src="../_images/PmagPy_MagIC_100_0.png" />
</div>
</div>
</section>
<section id="agm-magic">
<h3>agm_magic<a class="headerlink" href="#agm-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#agm_magic.py">[command line version]</a></p>
<p>This program converts Micromag hysteresis files into MagIC formatted files. Because this program creates files for uploading to the MagIC database, specimens should also have sample/site/location information, which can be provided on the command line. If this information is not available, for example if this is a synthetic specimen, specify syn= True for synthetic name.</p>
<p>Someone named Lima Tango has measured a synthetic specimen named myspec for hysteresis and saved the data in a file named agm_magic_example.agm in the agm_magic/agm_directory folder. The backfield IRM curve for the same specimen was saved in same directory as agm_magic_example.irm. Use the function <strong>convert.agm()</strong> to convert the data into a measurements.txt output file. For the backfield IRM file, set the keyword “bak” to True.  These were measured using cgs units, so be sure to set the units key word argument properly. Combine the two output files together using the instructions for <a class="reference external" href="#combine_magic">combine_magic</a>.  The agm files can be plotted using <a class="reference external" href="#hysteresis_magic">hysteresis_magic</a> but the back-field plots are broken.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">agm</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function agm in module pmagpy.convert_2_magic:

agm(agm_file, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, meas_outfile=&#39;&#39;, spec_outfile=&#39;&#39;, samp_outfile=&#39;&#39;, site_outfile=&#39;&#39;, loc_outfile=&#39;&#39;, spec_infile=&#39;&#39;, samp_infile=&#39;&#39;, site_infile=&#39;&#39;, specimen=&#39;&#39;, specnum=0, samp_con=&#39;1&#39;, location=&#39;unknown&#39;, instrument=&#39;&#39;, institution=&#39;&#39;, bak=False, syn=False, syntype=&#39;&#39;, units=&#39;cgs&#39;, fmt=&#39;new&#39;, user=&#39;&#39;)
    Convert AGM format file to MagIC file(s)
    
    Parameters
    ----------
    agm_file : str
        input file name
    dir_path : str
        working directory, default &quot;.&quot;
    input_dir_path : str
        input file directory IF different from dir_path, default &quot;&quot;
    meas_outfile : str
        output measurement file name, default &quot;&quot;
        (default output is SPECNAME.magic)
    spec_outfile : str
        output specimen file name, default &quot;&quot;
        (default output is SPEC_specimens.txt)
    samp_outfile: str
        output sample file name, default &quot;&quot;
        (default output is SPEC_samples.txt)
    site_outfile : str
        output site file name, default &quot;&quot;
        (default output is SPEC_sites.txt)
    loc_outfile : str
        output location file name, default &quot;&quot;
        (default output is SPEC_locations.txt)
    samp_infile : str
        existing sample infile (not required), default &quot;&quot;
    site_infile : str
        existing site infile (not required), default &quot;&quot;
    specimen : str
        specimen name, default &quot;&quot;
        (default is to take base of input file name, e.g. SPEC.agm)
    specnum : int
        number of characters to designate a specimen, default 0
    samp_con : str
        sample/site naming convention, default &#39;1&#39;, see info below
    location : str
        location name, default &quot;unknown&quot;
    instrument : str
        instrument name, default &quot;&quot;
    institution : str
        institution name, default &quot;&quot;
    bak : bool
       IRM backfield curve, default False
    syn : bool
       synthetic, default False
    syntype : str
       synthetic type, default &quot;&quot;
    units : str
       units, default &quot;cgs&quot;
    fmt: str
        input format, options: (&#39;new&#39;, &#39;old&#39;, &#39;xy&#39;, default &#39;new&#39;)
    user : user name
    
    Returns
    ---------
    Tuple : (True or False indicating if conversion was sucessful, meas_file name written)
    
    Info
    --------
    Sample naming convention:
        [1] XXXXY: where XXXX is an arbitrary length site designation and Y
            is the single character sample designation.  e.g., TG001a is the
            first sample from site TG001.    [default]
        [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
        [5] site name = sample name
        [6] site name entered in site_name column in the orient.txt format input file  -- NOT CURRENTLY SUPPORTED
        [7-Z] [XXX]YYY:  XXX is site designation with Z characters from samples  XXXYYY
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">agm</span><span class="p">(</span><span class="s1">&#39;agm_magic_example.agm&#39;</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/agm_magic/&#39;</span><span class="p">,</span>
            <span class="n">specimen</span><span class="o">=</span><span class="s1">&#39;myspec&#39;</span><span class="p">,</span><span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;old&#39;</span><span class="p">,</span><span class="n">meas_outfile</span><span class="o">=</span><span class="s1">&#39;agm.magic&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-I- writing specimens records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/agm_magic/myspec_specimens.txt
-I- 1 records written to specimens file
-I- writing samples records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/agm_magic/samples.txt
-I- 1 records written to samples file
-I- writing sites records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/agm_magic/sites.txt
-I- 1 records written to sites file
-I- writing locations records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/agm_magic/myspec_locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/agm_magic/agm.magic
-I- 284 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, &#39;agm.magic&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">agm</span><span class="p">(</span><span class="s1">&#39;agm_magic_example.irm&#39;</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/agm_magic/&#39;</span><span class="p">,</span>
            <span class="n">specimen</span><span class="o">=</span><span class="s1">&#39;myspec&#39;</span><span class="p">,</span><span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;old&#39;</span><span class="p">,</span><span class="n">meas_outfile</span><span class="o">=</span><span class="s1">&#39;irm.magic&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-I- overwriting /Users/ltauxe/PmagPy/data_files/convert_2_magic/agm_magic/myspec_specimens.txt
-I- 1 records written to specimens file
-I- overwriting /Users/ltauxe/PmagPy/data_files/convert_2_magic/agm_magic/samples.txt
-I- 1 records written to samples file
-I- overwriting /Users/ltauxe/PmagPy/data_files/convert_2_magic/agm_magic/sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/ltauxe/PmagPy/data_files/convert_2_magic/agm_magic/myspec_locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/agm_magic/irm.magic
-I- 41 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, &#39;irm.magic&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">infiles</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;data_files/convert_2_magic/agm_magic/agm.magic&#39;</span><span class="p">,</span><span class="s1">&#39;data_files/convert_2_magic/agm_magic/irm.magic&#39;</span><span class="p">]</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">infiles</span><span class="p">,</span><span class="s1">&#39;data_files/convert_2_magic/agm_magic/measurements.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/agm_magic/measurements.txt
-I- 325 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/agm_magic/measurements.txt&#39;
</pre></div>
</div>
</div>
</div>
<p>We can look at these data using <strong>hysteresis_magic</strong>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># read in the measurements data</span>
<span class="n">meas_data</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data_files/convert_2_magic/agm_magic/agm.magic&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># pick out the hysteresis data using the method code for hysteresis lab protocol</span>
<span class="n">hyst_data</span><span class="o">=</span><span class="n">meas_data</span><span class="p">[</span><span class="n">meas_data</span><span class="o">.</span><span class="n">method_codes</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;LP-HYS&#39;</span><span class="p">)]</span>

<span class="c1"># make the dictionary for figures that pmagplotlib likes</span>

<span class="c1"># make a list of specimens</span>
<span class="n">specimens</span><span class="o">=</span><span class="n">hyst_data</span><span class="o">.</span><span class="n">specimen</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">cnt</span><span class="o">=</span><span class="mi">1</span>
<span class="k">for</span> <span class="n">specimen</span> <span class="ow">in</span> <span class="n">specimens</span><span class="p">:</span>
    <span class="n">HDD</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;hyst&#39;</span><span class="p">:</span><span class="n">cnt</span><span class="p">,</span><span class="s1">&#39;deltaM&#39;</span><span class="p">:</span><span class="n">cnt</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;DdeltaM&#39;</span><span class="p">:</span><span class="n">cnt</span><span class="o">+</span><span class="mi">2</span><span class="p">}</span>
    <span class="n">spec_data</span><span class="o">=</span><span class="n">hyst_data</span><span class="p">[</span><span class="n">hyst_data</span><span class="o">.</span><span class="n">specimen</span><span class="o">==</span><span class="n">specimen</span><span class="p">]</span>
<span class="c1"># make a list of the field data</span>
    <span class="n">B</span><span class="o">=</span><span class="n">spec_data</span><span class="o">.</span><span class="n">meas_field_dc</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="c1"># make a list o the magnetizaiton data</span>
    <span class="n">M</span><span class="o">=</span><span class="n">spec_data</span><span class="o">.</span><span class="n">magn_moment</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="c1"># call the plotting function</span>
    <span class="n">hpars</span><span class="o">=</span><span class="n">pmagplotlib</span><span class="o">.</span><span class="n">plot_hdd</span><span class="p">(</span><span class="n">HDD</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">M</span><span class="p">,</span><span class="n">specimen</span><span class="p">)</span>
    <span class="n">hpars</span><span class="p">[</span><span class="s1">&#39;specimen&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">specimen</span>
<span class="c1"># print out the hysteresis parameters</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">specimen</span><span class="p">,</span><span class="s1">&#39;: </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">hpars</span><span class="p">)</span>
    <span class="n">cnt</span><span class="o">+=</span><span class="mi">3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>myspec : 
 {&#39;hysteresis_xhf&#39;: &#39;1.77e-05&#39;, &#39;hysteresis_ms_moment&#39;: &#39;2.914e+01&#39;, &#39;hysteresis_mr_moment&#39;: &#39;5.493e+00&#39;, &#39;hysteresis_bc&#39;: &#39;2.195e-02&#39;, &#39;hysteresis_bcr&#39;: &#39;6.702e-02&#39;, &#39;magic_method_codes&#39;: &#39;LP-BCR-HDM&#39;, &#39;specimen&#39;: &#39;myspec&#39;}
</pre></div>
</div>
<img alt="../_images/PmagPy_MagIC_107_1.png" src="../_images/PmagPy_MagIC_107_1.png" />
<img alt="../_images/PmagPy_MagIC_107_2.png" src="../_images/PmagPy_MagIC_107_2.png" />
<img alt="../_images/PmagPy_MagIC_107_3.png" src="../_images/PmagPy_MagIC_107_3.png" />
</div>
</div>
</section>
<section id="bgc-magic">
<h3>bgc_magic<a class="headerlink" href="#bgc-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#bgc_magic.py">[command line version]</a></p>
<p>Here we convert the Berkeley Geochronology Center’s AutoCore format to MagIC use <strong>convert.bgc()</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">bgc</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function bgc in module pmagpy.convert_2_magic:

bgc(mag_file, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, meas_file=&#39;measurements.txt&#39;, spec_file=&#39;specimens.txt&#39;, samp_file=&#39;samples.txt&#39;, site_file=&#39;sites.txt&#39;, loc_file=&#39;locations.txt&#39;, append=False, location=&#39;unknown&#39;, site=&#39;&#39;, samp_con=&#39;1&#39;, specnum=0, meth_code=&#39;LP-NO&#39;, volume=12, user=&#39;&#39;, timezone=&#39;US/Pacific&#39;, noave=False)
    Convert BGC format file to MagIC file(s)
    
    Parameters
    ----------
    mag_file : str
        input file name
    dir_path : str
        working directory, default &quot;.&quot;
    input_dir_path : str
        input file directory IF different from dir_path, default &quot;&quot;
    meas_file : str
        output measurement file name, default &quot;measurements.txt&quot;
    spec_file : str
        output specimen file name, default &quot;specimens.txt&quot;
    samp_file: str
        output sample file name, default &quot;samples.txt&quot;
    site_file : str
        output site file name, default &quot;sites.txt&quot;
    loc_file : str
        output location file name, default &quot;locations.txt&quot;
    append : bool
        append output files to existing files instead of overwrite, default False
    location : str
        location name, default &quot;unknown&quot;
    site : str
        site name, default &quot;&quot;
    samp_con : str
        sample/site naming convention, default &#39;1&#39;, see info below
    specnum : int
        number of characters to designate a specimen, default 0
    meth_code : str
        orientation method codes, default &quot;LP-NO&quot;
        e.g. [SO-MAG, SO-SUN, SO-SIGHT, ...]
    volume : float
        volume in ccs, default 12.
    user : str
        user name, default &quot;&quot;
    timezone : str
        timezone in pytz library format, default &quot;US/Pacific&quot;
        list of timezones can be found at http://pytz.sourceforge.net/
    noave : bool
       do not average duplicate measurements, default False (so by default, DO average)
    
    Returns
    ---------
    Tuple : (True or False indicating if conversion was sucessful, meas_file name written)
    
    Info
    --------
    Sample naming convention:
        [1] XXXXY: where XXXX is an arbitrary length site designation and Y
            is the single character sample designation.  e.g., TG001a is the
            first sample from site TG001.    [default]
        [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
        [5] site name same as sample
        [6] site is entered under a separate column -- NOT CURRENTLY SUPPORTED
        [7-Z] [XXXX]YYY:  XXXX is site designation with Z characters with sample name XXXXYYYY
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/bgc_magic/&#39;</span>
<span class="n">convert</span><span class="o">.</span><span class="n">bgc</span><span class="p">(</span><span class="s1">&#39;15HHA1-2A&#39;</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>mag_file in bgc_magic /Users/ltauxe/PmagPy/data_files/convert_2_magic/bgc_magic/15HHA1-2A
-I- writing specimens records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/bgc_magic/specimens.txt
-I- 1 records written to specimens file
-I- writing samples records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/bgc_magic/samples.txt
-I- 1 records written to samples file
-I- writing sites records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/bgc_magic/sites.txt
-I- 1 records written to sites file
-I- writing locations records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/bgc_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/bgc_magic/measurements.txt
-I- 24 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/ltauxe/PmagPy/data_files/convert_2_magic/bgc_magic/measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<p>And let’s take a look</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">meas_df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;measurements.txt&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">plot_net</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">plot_di</span><span class="p">(</span><span class="n">dec</span><span class="o">=</span><span class="n">meas_df</span><span class="p">[</span><span class="s1">&#39;dir_dec&#39;</span><span class="p">],</span><span class="n">inc</span><span class="o">=</span><span class="n">meas_df</span><span class="p">[</span><span class="s1">&#39;dir_inc&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/PmagPy_MagIC_112_0.png" src="../_images/PmagPy_MagIC_112_0.png" />
</div>
</div>
</section>
<section id="cit-magic">
<h3>cit_magic<a class="headerlink" href="#cit-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#cit_magic.py">[command line version]</a></p>
<p>To convert the CalTech format to MagIC, use <strong>convert.cit()</strong>.</p>
<p>Craig Jones’ PaleoMag software package (<a class="reference external" href="http://cires.colorado.edu/people/jones.craig/PMag3.html">http://cires.colorado.edu/people/jones.craig/PMag3.html</a>) imports various file formats, including the ’CIT’ format developed for the Caltech lab and now used in magnetometer control software that ships with 2G magnetometers that utilized a vertical sample changer system. The documentation for the CIT sample format is here: <a class="reference external" href="http://cires.colorado.edu/people/jones.craig/PMag_Formats.html#SAM_format">http://cires.colorado.edu/people/jones.craig/PMag_Formats.html#SAM_format</a>. Demagnetization data for each specimen are in their own file in a directory with all the data for a site or study. These files are strictly formatted with fields determined by the character number in the line. There must be a file with the suffix ‘.sam’ in the same directory as the specimen data files which gives details about the specimens and a list of the specimen measurementfiles in the directory.</p>
<p>The first line in the .sam file is a comment (in this case the site name), the second is the latitude and longitude followed by a declination correction. In these data, the declination correction was applied to the specimen orientations so the value of the declination correction is set to be 0.</p>
<p>For detailed description of the .sam and sample file formats, check the PaleoMag Formats website linked to above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">cit</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function cit in module pmagpy.convert_2_magic:

cit(dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, magfile=&#39;&#39;, user=&#39;&#39;, meas_file=&#39;measurements.txt&#39;, spec_file=&#39;specimens.txt&#39;, samp_file=&#39;samples.txt&#39;, site_file=&#39;sites.txt&#39;, loc_file=&#39;locations.txt&#39;, locname=&#39;unknown&#39;, sitename=&#39;&#39;, methods=[&#39;SO-MAG&#39;], specnum=0, samp_con=&#39;3&#39;, norm=&#39;cc&#39;, oersted=False, noave=False, meas_n_orient=&#39;8&#39;, labfield=0, phi=0, theta=0)
    Converts CIT formated Magnetometer data into MagIC format for Analysis and contribution to the MagIC database
    
    Parameters
    -----------
    dir_path : directory to output files to (default : current directory)
    input_dir_path : directory to input files (only needed if different from dir_path!)
    magfile : magnetometer file (.sam) to convert to MagIC (required)
    user : colon delimited list of analysts (default : &quot;&quot;)
    meas_file : measurement file name to output (default : measurements.txt)
    spec_file : specimen file name to output (default : specimens.txt)
    samp_file : sample file name to output (default : samples.txt)
    site_file : site file name to output (default : site.txt)
    loc_file : location file name to output (default : locations.txt)
    locname : location name
    sitename : site name set by user instead of using samp_con
    methods : colon delimited list of sample method codes. full list here (https://www2.earthref.org/MagIC/method-codes) (default : SO-MAG)
    specnum : number of terminal characters that identify a specimen
    norm : is volume or mass normalization using cgs or si units (options : cc,m3,g,kg) (default : cc)
    oersted : demag step values are in Oersted
    noave : average measurement data or not. False is average, True is don&#39;t average. (default : False)
    samp_con : sample naming convention options as follows:
        [1] XXXXY: where XXXX is an arbitrary length site designation and Y
            is the single character sample designation.  e.g., TG001a is the
            first sample from site TG001.    [default]
        [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
        [5] site name = sample name
        [6] site name entered in sitename column in the orient.txt format input file  -- NOT CURRENTLY SUPPORTED
        [7-Z] [XXX]YYY:  XXX is site designation with Z characters from samples  XXXYYY
    meas_n_orient : Number of different orientations in measurement (default : 8)
    labfield : DC_FIELD in microTesla (default : 0)
    phi : DC_PHI in degrees (default : 0)
    theta : DC_THETA in degrees (default : 0)
    
    Returns
    -----------
    type - Tuple : (True or False indicating if conversion was sucessful, meas_file name written)
</pre></div>
</div>
</div>
</div>
<p>Use the function <strong>convert.cit()</strong> to covert the CIT data files from Swanson-Hysell lab at Berkeley for the PI47 site in the data_files/convert_2_magic/cit_magic/PI47 directory. The site (PI47) was part of a data set published in Fairchild et al., (2016) (available in the MagIC database: (<a class="reference external" href="https://earthref.org/MagIC/11292/">https://earthref.org/MagIC/11292/</a>). The location name was “Slate Islands”, the naming convention was #2, the specimen name is specified with 1 character, we don’t wish to average replicate measurements  and they were collected by drilling and with a magnetic compass (”FS-FD”,and “SO-MAG”).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/cit_magic/PI47/&#39;</span>
<span class="n">convert</span><span class="o">.</span><span class="n">cit</span><span class="p">(</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span>
           <span class="n">magfile</span><span class="o">=</span><span class="s1">&#39;PI47-.sam&#39;</span><span class="p">,</span><span class="n">locname</span><span class="o">=</span><span class="s2">&quot;Slate Islands&quot;</span><span class="p">,</span><span class="n">specnum</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">samp_con</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="p">,</span>
           <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;FS-FD&#39;</span><span class="p">,</span><span class="s1">&#39;SO-MAG&#39;</span><span class="p">],</span><span class="n">noave</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>PI47-

Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/PI47/specimens.txt
-I- 9 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/PI47/samples.txt
-I- 9 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/PI47/sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/PI47/locations.txt
-I- 1 records written to locations file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/PI47/measurements.txt
-I- 266 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, &#39;measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<p>We can make some Zijderveld diagrams (see <strong>zeq_magic</strong> in the <strong>PmagPy_plots_analysis</strong> notebook).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">zeq_magic</span><span class="p">(</span><span class="n">input_dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">save_plots</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [])
</pre></div>
</div>
<img alt="../_images/PmagPy_MagIC_118_1.png" src="../_images/PmagPy_MagIC_118_1.png" />
<img alt="../_images/PmagPy_MagIC_118_2.png" src="../_images/PmagPy_MagIC_118_2.png" />
<img alt="../_images/PmagPy_MagIC_118_3.png" src="../_images/PmagPy_MagIC_118_3.png" />
<img alt="../_images/PmagPy_MagIC_118_4.png" src="../_images/PmagPy_MagIC_118_4.png" />
<img alt="../_images/PmagPy_MagIC_118_5.png" src="../_images/PmagPy_MagIC_118_5.png" />
<img alt="../_images/PmagPy_MagIC_118_6.png" src="../_images/PmagPy_MagIC_118_6.png" />
<img alt="../_images/PmagPy_MagIC_118_7.png" src="../_images/PmagPy_MagIC_118_7.png" />
<img alt="../_images/PmagPy_MagIC_118_8.png" src="../_images/PmagPy_MagIC_118_8.png" />
<img alt="../_images/PmagPy_MagIC_118_9.png" src="../_images/PmagPy_MagIC_118_9.png" />
<img alt="../_images/PmagPy_MagIC_118_10.png" src="../_images/PmagPy_MagIC_118_10.png" />
<img alt="../_images/PmagPy_MagIC_118_11.png" src="../_images/PmagPy_MagIC_118_11.png" />
<img alt="../_images/PmagPy_MagIC_118_12.png" src="../_images/PmagPy_MagIC_118_12.png" />
<img alt="../_images/PmagPy_MagIC_118_13.png" src="../_images/PmagPy_MagIC_118_13.png" />
<img alt="../_images/PmagPy_MagIC_118_14.png" src="../_images/PmagPy_MagIC_118_14.png" />
<img alt="../_images/PmagPy_MagIC_118_15.png" src="../_images/PmagPy_MagIC_118_15.png" />
</div>
</div>
<p>Use the function convert.cit() to covert the CIT data files from the USGS lab at Menlo Park. The data file is in the data_files/convert_2_magic/cit_magic/USGS/bl9-1 directory, the file name is bl9-1.sam, and the analyst was Hagstrum. The location name was “Boring volcanic field”, and this site name was set by Hagstrum to BL9001 because the site name cannot be determined from the sample name with the current available options. The samples were collected by drilling and with a magnetic compass and sun compass (”FS-FD”,and “SO-MAG”), the measurement are in Oersted instead of the standard milliTesla, and we don’t wish to average replicate measurements.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/cit_magic/USGS/bl9-1&#39;</span>
<span class="n">convert</span><span class="o">.</span><span class="n">cit</span><span class="p">(</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span>
           <span class="n">magfile</span><span class="o">=</span><span class="s1">&#39;bl9-1.sam&#39;</span><span class="p">,</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;Hagstrum&#39;</span><span class="p">,</span><span class="n">locname</span><span class="o">=</span><span class="s2">&quot;Boring volcanic field&quot;</span><span class="p">,</span>
           <span class="n">sitename</span><span class="o">=</span><span class="s1">&#39;BL9001&#39;</span><span class="p">,</span><span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;FS-FD&#39;</span><span class="p">,</span><span class="s1">&#39;SO-SM&#39;</span><span class="p">,</span><span class="s1">&#39;LT-AF-Z&#39;</span><span class="p">],</span> <span class="n">oersted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
           <span class="n">noave</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Boring Lava collection 2009

Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/USGS/bl9-1/specimens.txt
-I- 9 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/USGS/bl9-1/samples.txt
-I- 9 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/USGS/bl9-1/sites.txt
-I- 1 records written to sites file
-I- writing locations records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/USGS/bl9-1/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/USGS/bl9-1/measurements.txt
-I- 63 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, &#39;measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<p>We can look at the Zijderveld, etc.  Diagrams with <a class="reference external" href="#zeq_magic">zeq_magic</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">zeq_magic</span><span class="p">(</span><span class="n">input_dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">save_plots</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [])
</pre></div>
</div>
<img alt="../_images/PmagPy_MagIC_122_1.png" src="../_images/PmagPy_MagIC_122_1.png" />
<img alt="../_images/PmagPy_MagIC_122_2.png" src="../_images/PmagPy_MagIC_122_2.png" />
<img alt="../_images/PmagPy_MagIC_122_3.png" src="../_images/PmagPy_MagIC_122_3.png" />
<img alt="../_images/PmagPy_MagIC_122_4.png" src="../_images/PmagPy_MagIC_122_4.png" />
<img alt="../_images/PmagPy_MagIC_122_5.png" src="../_images/PmagPy_MagIC_122_5.png" />
<img alt="../_images/PmagPy_MagIC_122_6.png" src="../_images/PmagPy_MagIC_122_6.png" />
<img alt="../_images/PmagPy_MagIC_122_7.png" src="../_images/PmagPy_MagIC_122_7.png" />
<img alt="../_images/PmagPy_MagIC_122_8.png" src="../_images/PmagPy_MagIC_122_8.png" />
<img alt="../_images/PmagPy_MagIC_122_9.png" src="../_images/PmagPy_MagIC_122_9.png" />
<img alt="../_images/PmagPy_MagIC_122_10.png" src="../_images/PmagPy_MagIC_122_10.png" />
<img alt="../_images/PmagPy_MagIC_122_11.png" src="../_images/PmagPy_MagIC_122_11.png" />
<img alt="../_images/PmagPy_MagIC_122_12.png" src="../_images/PmagPy_MagIC_122_12.png" />
<img alt="../_images/PmagPy_MagIC_122_13.png" src="../_images/PmagPy_MagIC_122_13.png" />
<img alt="../_images/PmagPy_MagIC_122_14.png" src="../_images/PmagPy_MagIC_122_14.png" />
<img alt="../_images/PmagPy_MagIC_122_15.png" src="../_images/PmagPy_MagIC_122_15.png" />
</div>
</div>
<p>Use the function convert.cit() to convert the CIT data files from Ben Wiess’s lab at MIT. This data was part of a set published in ESPL. “A nonmagnetic differentiated early planetary body”,
doi:10.1016/j.epsl.2017.03.026 The data can be found in MagIC at <a class="reference external" href="https://earthref.org/MagIC/11943">https://earthref.org/MagIC/11943</a></p>
<p>The data file is in the data_files/convert_2_magic/cit_magic/MIT/7325B directory, the file name is 7325B.sam, and the analyst was Wiess. The location name was “NWA 7325” with the site name coming from the sample name with the “1” convention. The samples are described with the method codes DE-VM, LP-DIR-T, LT-AF-Z, LT-NO, LT-T-Z, and SO-CMD-NORTH (see <a class="reference external" href="https://www2.earthref.org/MagIC/method-codes">https://www2.earthref.org/MagIC/method-codes</a> for full descriptions). We also don’t wish to average replicate measurements.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">cit</span><span class="p">(</span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/cit_magic/MIT/7325B&#39;</span><span class="p">,</span>
           <span class="n">magfile</span><span class="o">=</span><span class="s1">&#39;7325B.sam&#39;</span><span class="p">,</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;Wiess&#39;</span><span class="p">,</span><span class="n">locname</span><span class="o">=</span><span class="s2">&quot;NWA 7325&quot;</span><span class="p">,</span><span class="n">samp_con</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span>
           <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;DE-VM&#39;</span><span class="p">,</span> <span class="s1">&#39;LP-DIR-T&#39;</span><span class="p">,</span> <span class="s1">&#39;LT-AF-Z&#39;</span><span class="p">,</span> <span class="s1">&#39;LT-NO&#39;</span><span class="p">,</span> <span class="s1">&#39;LT-T-Z&#39;</span><span class="p">,</span> <span class="s1">&#39;SO-CMD-NORTH&#39;</span><span class="p">],</span>
           <span class="n">noave</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>NWA 7325 sample B7

Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
Warning: Specimen volume set to 1.0.
Warning: If volume/mass really is 1.0, set volume/mass to 1.001
Warning: specimen method code LP-NOMAG set.
-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/MIT/7325B/specimens.txt
-I- 9 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/MIT/7325B/samples.txt
-I- 9 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/MIT/7325B/sites.txt
-I- 1 records written to sites file
-I- writing locations records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/MIT/7325B/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/cit_magic/MIT/7325B/measurements.txt
-I- 309 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, &#39;measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<p>And take a look see:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">zeq_magic</span><span class="p">(</span><span class="n">input_dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">save_plots</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [])
</pre></div>
</div>
<img alt="../_images/PmagPy_MagIC_126_1.png" src="../_images/PmagPy_MagIC_126_1.png" />
<img alt="../_images/PmagPy_MagIC_126_2.png" src="../_images/PmagPy_MagIC_126_2.png" />
<img alt="../_images/PmagPy_MagIC_126_3.png" src="../_images/PmagPy_MagIC_126_3.png" />
<img alt="../_images/PmagPy_MagIC_126_4.png" src="../_images/PmagPy_MagIC_126_4.png" />
<img alt="../_images/PmagPy_MagIC_126_5.png" src="../_images/PmagPy_MagIC_126_5.png" />
<img alt="../_images/PmagPy_MagIC_126_6.png" src="../_images/PmagPy_MagIC_126_6.png" />
<img alt="../_images/PmagPy_MagIC_126_7.png" src="../_images/PmagPy_MagIC_126_7.png" />
<img alt="../_images/PmagPy_MagIC_126_8.png" src="../_images/PmagPy_MagIC_126_8.png" />
<img alt="../_images/PmagPy_MagIC_126_9.png" src="../_images/PmagPy_MagIC_126_9.png" />
<img alt="../_images/PmagPy_MagIC_126_10.png" src="../_images/PmagPy_MagIC_126_10.png" />
<img alt="../_images/PmagPy_MagIC_126_11.png" src="../_images/PmagPy_MagIC_126_11.png" />
<img alt="../_images/PmagPy_MagIC_126_12.png" src="../_images/PmagPy_MagIC_126_12.png" />
<img alt="../_images/PmagPy_MagIC_126_13.png" src="../_images/PmagPy_MagIC_126_13.png" />
<img alt="../_images/PmagPy_MagIC_126_14.png" src="../_images/PmagPy_MagIC_126_14.png" />
<img alt="../_images/PmagPy_MagIC_126_15.png" src="../_images/PmagPy_MagIC_126_15.png" />
</div>
</div>
</section>
<section id="generic-magic">
<h3>generic_magic<a class="headerlink" href="#generic-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#generic_magic.py">[command line version]</a></p>
<p>If you have a data file format that is not supported, you can relabel column headers to fit the generic format as in the generic_magic example data file.</p>
<p>To import the generic file format, use <strong>convert.generic()</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">generic</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function generic in module pmagpy.convert_2_magic:

generic(magfile=&#39;&#39;, dir_path=&#39;.&#39;, meas_file=&#39;measurements.txt&#39;, spec_file=&#39;specimens.txt&#39;, samp_file=&#39;samples.txt&#39;, site_file=&#39;sites.txt&#39;, loc_file=&#39;locations.txt&#39;, user=&#39;&#39;, labfield=0, labfield_phi=0, labfield_theta=0, experiment=&#39;&#39;, cooling_times_list=[], sample_nc=[1, 0], site_nc=[1, 0], location=&#39;unknown&#39;, lat=&#39;&#39;, lon=&#39;&#39;, noave=False, input_dir_path=&#39;&#39;)
    Convert generic file to MagIC file(s)
    
    Parameters
    ----------
    mag_file : str
        input file name
    dir_path : str
        output directory, default &quot;.&quot;
    meas_file : str
        output measurement file name, default &quot;measurements.txt&quot;
    spec_file : str
        output specimen file name, default &quot;specimens.txt&quot;
    samp_file: str
        output sample file name, default &quot;samples.txt&quot;
    site_file : str
        output site file name, default &quot;sites.txt&quot;
    loc_file : str
        output location file name, default &quot;locations.txt&quot;
    user : str
        user name, default &quot;&quot;
    labfield : float
        dc lab field (in micro tesla)
    labfield_phi : float
        declination 0-360
    labfield_theta : float
        inclination -90 - 90
    experiment : str
        experiment type, see info below
    cooling_times_list : list
        cooling times in [K/minutes] seperated by comma,
        ordered at the same order as XXX.10,XXX.20 ...XX.70
    sample_nc : list
        sample naming convention, default [1, 0], see info below
    site_nc : list
        site naming convention, default [1, 0], see info below
    location : str
        location name, default &quot;unknown&quot;
    lat : float
        latitude, default &quot;&quot;
    lon : float
        longitude, default &quot;&quot;
    noave : bool
       do not average duplicate measurements, default False (so by default, DO average)
    input_dir_path : str
        input file directory IF different from dir_path, default &quot;&quot;
    
    
    Info
    --------
    Experiment type:
        Demag:
            AF and/or Thermal
        PI:
            paleointenisty thermal experiment (ZI/IZ/IZZI)
        ATRM n:
    
            ATRM in n positions (n=6)
    
        AARM n:
            AARM in n positions
        CR:
            cooling rate experiment
            The treatment coding of the measurement file should be: XXX.00,XXX.10, XXX.20 ...XX.70 etc. (XXX.00 is optional)
            where XXX in the temperature and .10,.20... are running numbers of the cooling rates steps.
            XXX.00 is optional zerofield baseline. XXX.70 is alteration check.
            if using this type, you must also provide cooling rates in [K/minutes] in cooling_times_list
            seperated by comma, ordered at the same order as XXX.10,XXX.20 ...XX.70
    
            No need to specify the cooling rate for the zerofield
            But users need to make sure that there are no duplicate meaurements in the file
    
        NLT:
            non-linear-TRM experiment
    
    Specimen-sample naming convention:
        X determines which kind of convention (initial characters, terminal characters, or delimiter
        Y determines how many characters to remove to go from specimen --&gt; sample OR which delimiter to use
        X=0 Y=n: specimen is distinguished from sample by n initial characters.
                 (example: generic(samp_nc=[0, 4], ...)
                  if n=4 then and specimen = mgf13a then sample = mgf13)
        X=1 Y=n: specimen is distiguished from sample by n terminate characters.
                 (example: generic(samp_nc=[1, 1], ...))
                  if n=1 then and specimen = mgf13a then sample = mgf13)
        X=2 Y=c: specimen is distinguishing from sample by a delimiter.
                 (example: generic([2, &quot;-&quot;]))
                  if c=- then and specimen = mgf13-a then sample = mgf13)
        default: sample is the same as specimen name
    
    Sample-site naming convention:
        X determines which kind of convention (initial characters, terminal characters, or delimiter
        Y determines how many characters to remove to go from sample --&gt; site OR which delimiter to use
        X=0 Y=n: sample is distiguished from site by n initial characters.
                 (example: generic(site_nc=[0, 3]))
                  if n=3 then and sample = mgf13 then sample = mgf)
        X=1 Y=n: sample is distiguished from site by n terminate characters.
                 (example: generic(site_nc=[1, 2]))
                  if n=2 and sample = mgf13 then site = mgf)
        X=2 Y=c: specimen is distiguishing from sample by a delimiter.
                 (example: generic(site_nc=[2, &quot;-&quot;]))
                  if c=&#39;-&#39; and sample = &#39;mgf-13&#39; then site = mgf)
        default: site name is the same as sample name
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">generic</span><span class="p">(</span><span class="n">magfile</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/generic_magic/generic_magic_example.txt&#39;</span><span class="p">,</span>
                <span class="n">experiment</span><span class="o">=</span><span class="s1">&#39;PI&#39;</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/generic_magic&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/generic_magic/specimens.txt
-I- 2 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/generic_magic/samples.txt
-I- 2 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/generic_magic/sites.txt
-I- 2 records written to sites file
-I- writing locations records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/generic_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/generic_magic/measurements.txt
-I- 23 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, &#39;measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># let&#39;s take a look</span>
<span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/generic_magic/&#39;</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">zeq_magic</span><span class="p">(</span><span class="n">input_dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">save_plots</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [])
</pre></div>
</div>
<img alt="../_images/PmagPy_MagIC_130_1.png" src="../_images/PmagPy_MagIC_130_1.png" />
<img alt="../_images/PmagPy_MagIC_130_2.png" src="../_images/PmagPy_MagIC_130_2.png" />
<img alt="../_images/PmagPy_MagIC_130_3.png" src="../_images/PmagPy_MagIC_130_3.png" />
<img alt="../_images/PmagPy_MagIC_130_4.png" src="../_images/PmagPy_MagIC_130_4.png" />
<img alt="../_images/PmagPy_MagIC_130_5.png" src="../_images/PmagPy_MagIC_130_5.png" />
<img alt="../_images/PmagPy_MagIC_130_6.png" src="../_images/PmagPy_MagIC_130_6.png" />
</div>
</div>
</section>
<section id="huji-magic">
<h3>huji_magic<a class="headerlink" href="#huji-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#huji_magic.py">[command line version]</a></p>
<p>To import the Hebrew University, Jerusalem, Israel file format to MagIC, use <strong>convert.huji()</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">huji</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function huji in module pmagpy.convert_2_magic:

huji(magfile=&#39;&#39;, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, datafile=&#39;&#39;, codelist=&#39;&#39;, meas_file=&#39;measurements.txt&#39;, spec_file=&#39;specimens.txt&#39;, samp_file=&#39;samples.txt&#39;, site_file=&#39;sites.txt&#39;, loc_file=&#39;locations.txt&#39;, user=&#39;&#39;, specnum=0, samp_con=&#39;1&#39;, labfield=0, phi=0, theta=0, location=&#39;&#39;, CR_cooling_times=None, noave=False)
    Convert HUJI format file to MagIC file(s)
    
    Parameters
    ----------
    magfile : str
       input file name
    dir_path : str
        working directory, default &quot;.&quot;
    input_dir_path : str
        input file directory IF different from dir_path, default &quot;&quot;
    datafile : str
       HUJI datafile with sample orientations, default &quot;&quot;
    codelist : str
        colon-delimited protocols, include all that apply
        see info below
    meas_file : str
        output measurement file name, default &quot;measurements.txt&quot;
    spec_file : str
        output specimen file name, default &quot;specimens.txt&quot;
    samp_file: str
        output sample file name, default &quot;samples.txt&quot;
    site_file : str
        output site file name, default &quot;sites.txt&quot;
    loc_file : str
        output location file name, default &quot;locations.txt&quot;
    user : str
        user name, default &quot;&quot;
    specnum : int
        number of characters to designate a specimen, default 0
    samp_con : str
        sample/site naming convention, default &#39;1&#39;, see info below
    labfield : float
        dc lab field (in micro tesla)
    labfield_phi : float
        declination 0-360
    labfield_theta : float
        inclination -90 - 90
    location : str
        location name, default &quot;unknown&quot;
    CR_cooling_times : list
        default None
        cooling times in [K/minutes] seperated by comma,
        ordered at the same order as XXX.10,XXX.20 ...XX.70
    noave : bool
       do not average duplicate measurements, default False (so by default, DO average)
    
    Info
    --------
    Code list:
        AF:  af demag
        T: thermal including thellier but not trm acquisition
        N: NRM only
        TRM: trm acquisition
        ANI: anisotropy experiment
        CR: cooling rate experiment.
            The treatment coding of the measurement file should be: XXX.00,XXX.10, XXX.20 ...XX.70 etc. (XXX.00 is optional)
            where XXX in the temperature and .10,.20... are running numbers of the cooling rates steps.
            XXX.00 is optional zerofield baseline. XXX.70 is alteration check.
            syntax in sio_magic is: -LP CR xxx,yyy,zzz,.....xx
            where xx, yyy,zzz...xxx  are cooling time in [K/minutes], seperated by comma, ordered at the same order as XXX.10,XXX.20 ...XX.70
            if you use a zerofield step then no need to specify the cooling rate for the zerofield
    
    Sample naming convention:
        [1] XXXXY: where XXXX is an arbitrary length site designation and Y
            is the single character sample designation.  e.g., TG001a is the
            first sample from site TG001.    [default]
        [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
        [5] site name = sample name
        [6] site name entered in site_name column in the orient.txt format input file  -- NOT CURRENTLY SUPPORTED
        [7-Z] [XXX]YYY:  XXX is site designation with Z characters from samples  XXXYYY
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/huji_magic/&#39;</span>
<span class="n">convert</span><span class="o">.</span><span class="n">huji</span><span class="p">(</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span>
             <span class="n">magfile</span><span class="o">=</span><span class="s1">&#39;Massada_AF_HUJI_new_format.txt&#39;</span><span class="p">,</span><span class="n">codelist</span><span class="o">=</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-W- Identical treatments in file Massada_AF_HUJI_new_format.txt magfile line 818: specimen M5-119E, treatment 0 ignoring the first. 
-I- done reading file Massada_AF_HUJI_new_format.txt
-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/huji_magic/specimens.txt
-I- 56 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/huji_magic/samples.txt
-I- 56 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/huji_magic/sites.txt
-I- 29 records written to sites file
-I- writing locations records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/huji_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/huji_magic/measurements.txt
-I- 616 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, &#39;measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">zeq_magic</span><span class="p">(</span><span class="n">input_dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">save_plots</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">n_plots</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [])
</pre></div>
</div>
<img alt="../_images/PmagPy_MagIC_134_1.png" src="../_images/PmagPy_MagIC_134_1.png" />
<img alt="../_images/PmagPy_MagIC_134_2.png" src="../_images/PmagPy_MagIC_134_2.png" />
<img alt="../_images/PmagPy_MagIC_134_3.png" src="../_images/PmagPy_MagIC_134_3.png" />
<img alt="../_images/PmagPy_MagIC_134_4.png" src="../_images/PmagPy_MagIC_134_4.png" />
<img alt="../_images/PmagPy_MagIC_134_5.png" src="../_images/PmagPy_MagIC_134_5.png" />
<img alt="../_images/PmagPy_MagIC_134_6.png" src="../_images/PmagPy_MagIC_134_6.png" />
<img alt="../_images/PmagPy_MagIC_134_7.png" src="../_images/PmagPy_MagIC_134_7.png" />
<img alt="../_images/PmagPy_MagIC_134_8.png" src="../_images/PmagPy_MagIC_134_8.png" />
<img alt="../_images/PmagPy_MagIC_134_9.png" src="../_images/PmagPy_MagIC_134_9.png" />
<img alt="../_images/PmagPy_MagIC_134_10.png" src="../_images/PmagPy_MagIC_134_10.png" />
<img alt="../_images/PmagPy_MagIC_134_11.png" src="../_images/PmagPy_MagIC_134_11.png" />
<img alt="../_images/PmagPy_MagIC_134_12.png" src="../_images/PmagPy_MagIC_134_12.png" />
<img alt="../_images/PmagPy_MagIC_134_13.png" src="../_images/PmagPy_MagIC_134_13.png" />
<img alt="../_images/PmagPy_MagIC_134_14.png" src="../_images/PmagPy_MagIC_134_14.png" />
<img alt="../_images/PmagPy_MagIC_134_15.png" src="../_images/PmagPy_MagIC_134_15.png" />
<img alt="../_images/PmagPy_MagIC_134_16.png" src="../_images/PmagPy_MagIC_134_16.png" />
<img alt="../_images/PmagPy_MagIC_134_17.png" src="../_images/PmagPy_MagIC_134_17.png" />
<img alt="../_images/PmagPy_MagIC_134_18.png" src="../_images/PmagPy_MagIC_134_18.png" />
<img alt="../_images/PmagPy_MagIC_134_19.png" src="../_images/PmagPy_MagIC_134_19.png" />
<img alt="../_images/PmagPy_MagIC_134_20.png" src="../_images/PmagPy_MagIC_134_20.png" />
<img alt="../_images/PmagPy_MagIC_134_21.png" src="../_images/PmagPy_MagIC_134_21.png" />
<img alt="../_images/PmagPy_MagIC_134_22.png" src="../_images/PmagPy_MagIC_134_22.png" />
<img alt="../_images/PmagPy_MagIC_134_23.png" src="../_images/PmagPy_MagIC_134_23.png" />
<img alt="../_images/PmagPy_MagIC_134_24.png" src="../_images/PmagPy_MagIC_134_24.png" />
<img alt="../_images/PmagPy_MagIC_134_25.png" src="../_images/PmagPy_MagIC_134_25.png" />
<img alt="../_images/PmagPy_MagIC_134_26.png" src="../_images/PmagPy_MagIC_134_26.png" />
<img alt="../_images/PmagPy_MagIC_134_27.png" src="../_images/PmagPy_MagIC_134_27.png" />
<img alt="../_images/PmagPy_MagIC_134_28.png" src="../_images/PmagPy_MagIC_134_28.png" />
<img alt="../_images/PmagPy_MagIC_134_29.png" src="../_images/PmagPy_MagIC_134_29.png" />
<img alt="../_images/PmagPy_MagIC_134_30.png" src="../_images/PmagPy_MagIC_134_30.png" />
</div>
</div>
</section>
<section id="huji-sample-magic">
<h3>huji_sample_magic<a class="headerlink" href="#huji-sample-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#huji_sample_magic.py">[command line version]</a></p>
<p>To convert a Hebrew University Jersalem, Israel sample format to MagIC, use <strong>convert.huji_sample()</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">huji_sample</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function huji_sample in module pmagpy.convert_2_magic:

huji_sample(orient_file, meths=&#39;FS-FD:SO-POM:SO-SUN&#39;, location_name=&#39;unknown&#39;, samp_con=&#39;1&#39;, ignore_dip=True, data_model_num=3, samp_file=&#39;samples.txt&#39;, site_file=&#39;sites.txt&#39;, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;)
    Convert HUJI sample file to MagIC file(s)
    
    Parameters
    ----------
    orient_file : str
        input file name
    meths : str
       colon-delimited sampling methods, default FS-FD:SO-POM:SO-SUN
       for more options, see info below
    location : str
        location name, default &quot;unknown&quot;
    samp_con : str
        sample/site naming convention, default &#39;1&#39;, see info below
    ignore_dip : bool
        set sample az/dip to 0, default True
    data_model_num : int
        MagIC data model 2 or 3, default 3
    samp_file : str
        sample file name to output (default : samples.txt)
    site_file : str
        site file name to output (default : site.txt)
    dir_path : str
        output directory, default &quot;.&quot;
    input_dir_path : str
        input file directory IF different from dir_path, default &quot;&quot;
    
    Returns
    --------
    type - Tuple : (True or False indicating if conversion was sucessful, file name written)
    
    Info
    --------
    Sampling method codes:
        FS-FD field sampling done with a drill
        FS-H field sampling done with hand samples
        FS-LOC-GPS  field location done with GPS
        FS-LOC-MAP  field location done with map
        SO-POM   a Pomeroy orientation device was used
        SO-ASC   an ASC orientation device was used
        SO-MAG   orientation with magnetic compass
    
     Sample naming convention:
        [1] XXXXY: where XXXX is an arbitrary length site designation and Y
            is the single character sample designation.  e.g., TG001a is the
            first sample from site TG001.    [default]
        [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
        [5] site name = sample name
        [6] site name entered in site_name column in the orient.txt format input file  -- NOT CURRENTLY SUPPORTED
        [7-Z] [XXX]YYY:  XXX is site designation with Z characters from samples  XXXYYY
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">huji_sample</span><span class="p">(</span><span class="s1">&#39;magdelkrum_datafile.txt&#39;</span><span class="p">,</span>
                   <span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/huji_magic/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-I- reading in: /Users/nebula/Python/PmagPy/data_files/convert_2_magic/huji_magic/magdelkrum_datafile.txt
57  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/huji_magic/samples.txt
57  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/huji_magic/sites.txt
Sample info saved in  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/huji_magic/samples.txt
Site info saved in  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/huji_magic/sites.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/huji_magic/samples.txt&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function combine_magic in module pmagpy.ipmag:

combine_magic(filenames, outfile=&#39;measurements.txt&#39;, data_model=3, magic_table=&#39;measurements&#39;, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;)
    Takes a list of magic-formatted files, concatenates them, and creates a
    single file. Returns output filename if the operation was successful.
    
    Parameters
    -----------
    filenames : list of MagIC formatted files
    outfile : name of output file [e.g., measurements.txt]
    data_model : data model number (2.5 or 3), default 3
    magic_table : name of magic table, default &#39;measurements&#39;
    dir_path : str
        output directory, default &quot;.&quot;
    input_dir_path : str
        input file directory (if different from dir_path), default &quot;&quot;
    
    
    Returns
    ----------
    outfile name if success, False if failure
</pre></div>
</div>
</div>
</div>
</section>
<section id="iodp-dscr-lore">
<h3>iodp_dscr_lore<a class="headerlink" href="#iodp-dscr-lore" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#iodp_dscr_magic.py">[command line version]</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># first, generate specimens/samples/sites/locations files</span>
<span class="n">convert</span><span class="o">.</span><span class="n">iodp_samples_csv</span><span class="p">(</span><span class="s1">&#39;data_files/iodp_magic/U999A/samples_17_5_2019.csv&#39;</span><span class="p">)</span>
<span class="c1"># then, convert IODP discrete measurement files into measurements files</span>
<span class="n">convert</span><span class="o">.</span><span class="n">iodp_dscr_lore</span><span class="p">(</span><span class="s2">&quot;data_files/iodp_magic/U999A/SRM_discrete_data/srmdiscrete_17_5_2019.csv&quot;</span><span class="p">)</span>
<span class="n">pmag</span><span class="o">.</span><span class="n">remove_files</span><span class="p">([</span><span class="s2">&quot;measurements.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;specimens.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;samples.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;sites.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;locations.txt&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>U999A
11  records written to file  /Users/nebula/Python/PmagPy/specimens.txt
11  records written to file  /Users/nebula/Python/PmagPy/samples.txt
11  records written to file  /Users/nebula/Python/PmagPy/sites.txt
1  records written to file  /Users/nebula/Python/PmagPy/locations.txt
 -W-  999-U999A-1H-2-W-140.0  not found in specimens table 
check your sample name or add to specimens table by hand

34  records written to file  /Users/nebula/Python/PmagPy/measurements.txt
</pre></div>
</div>
</div>
</div>
</section>
<section id="iodp-jr6-lore">
<h3>iodp_jr6_lore<a class="headerlink" href="#iodp-jr6-lore" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#iodp_jr6_magic.py">[command line version]</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># first, generate specimens/samples/sites/locations files</span>
<span class="n">convert</span><span class="o">.</span><span class="n">iodp_samples_csv</span><span class="p">(</span><span class="s1">&#39;data_files/iodp_magic/U999A/samples_17_5_2019.csv&#39;</span><span class="p">)</span>
<span class="c1"># then, convert IODP discrete measurement files into measurements files</span>
<span class="n">convert</span><span class="o">.</span><span class="n">iodp_jr6_lore</span><span class="p">(</span><span class="s2">&quot;data_files/iodp_magic/U999A/JR6_data/spinner_17_5_2019.csv&quot;</span><span class="p">)</span>
<span class="n">pmag</span><span class="o">.</span><span class="n">remove_files</span><span class="p">([</span><span class="s2">&quot;measurements.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;specimens.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;samples.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;sites.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;locations.txt&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>U999A
11  records written to file  /Users/nebula/Python/PmagPy/specimens.txt
11  records written to file  /Users/nebula/Python/PmagPy/samples.txt
11  records written to file  /Users/nebula/Python/PmagPy/sites.txt
1  records written to file  /Users/nebula/Python/PmagPy/locations.txt
5  records written to file  /Users/nebula/Python/PmagPy/measurements.txt
</pre></div>
</div>
</div>
</div>
</section>
<section id="iodp-srm-lore">
<h3>iodp_srm_lore<a class="headerlink" href="#iodp-srm-lore" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#iodp_srm_magic.py">[command line version]</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">iodp_srm_lore</span><span class="p">(</span><span class="s2">&quot;data_files/iodp_magic/U999A/SRM_archive_data/srmsection_17_5_2019.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2804  records written to file  /Users/nebula/Python/PmagPy/srm_arch_specimens.txt
2804  records written to file  /Users/nebula/Python/PmagPy/srm_arch_samples.txt
2804  records written to file  /Users/nebula/Python/PmagPy/srm_arch_sites.txt
791  records written to file  /Users/nebula/Python/PmagPy/srm_arch_measurements.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, &#39;/Users/nebula/Python/PmagPy/srm_arch_measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
</section>
<section id="jr6-jr6-magic">
<h3>jr6_jr6_magic<a class="headerlink" href="#jr6-jr6-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#jr6_jr6_magic.py">[command line version]</a></p>
<p>The AGICO JR6 spinner magnetometer has two output formats, the .jr6 and the .txt.  Here we illustrate the conversion of the .jr6 format.  There are data from two different studies in the example folder.  One (from Anita di Chiara) has the suffix ‘.JR6’ and the other (from Roi Granot) are lower case (.jr6’). Each file has the data from a single specimen’s experiment.  So, we can convert Anita’s data to a series of MagIC formatted measurement files, combine them with <a class="reference external" href="#ipmag.combine_magic">ipmag.combine_magic</a> and look at them with Demag GUI (on the command line) or <a class="reference external" href="#zeq_magic">zeq_magic</a> within the notebook.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">jr6_jr6</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function jr6_jr6 in module pmagpy.convert_2_magic:

jr6_jr6(mag_file, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, meas_file=&#39;measurements.txt&#39;, spec_file=&#39;specimens.txt&#39;, samp_file=&#39;samples.txt&#39;, site_file=&#39;sites.txt&#39;, loc_file=&#39;locations.txt&#39;, specnum=1, samp_con=&#39;1&#39;, location=&#39;unknown&#39;, lat=&#39;&#39;, lon=&#39;&#39;, noave=False, meth_code=&#39;LP-NO&#39;, volume=12, JR=False, user=&#39;&#39;)
    Convert JR6 .jr6 files to MagIC file(s)
    
    Parameters
    ----------
    mag_file : str
        input file name
    dir_path : str
        working directory, default &quot;.&quot;
    input_dir_path : str
        input file directory IF different from dir_path, default &quot;&quot;
    meas_file : str
        output measurement file name, default &quot;measurements.txt&quot;
    spec_file : str
        output specimen file name, default &quot;specimens.txt&quot;
    samp_file: str
        output sample file name, default &quot;samples.txt&quot;
    site_file : str
        output site file name, default &quot;sites.txt&quot;
    loc_file : str
        output location file name, default &quot;locations.txt&quot;
    specnum : int
        number of characters to designate a specimen, default 0
    samp_con : str
        sample/site naming convention, default &#39;1&#39;, see info below
    location : str
        location name, default &quot;unknown&quot;
    lat : float
        latitude, default &quot;&quot;
    lon : float
        longitude, default &quot;&quot;
    noave : bool
       do not average duplicate measurements, default False (so by default, DO average)
    meth_code : str
        colon-delimited method codes, default &quot;LP-NO&quot;
    volume : float
        volume in ccs, default 12
    JR : bool
        IODP samples were measured on the JOIDES RESOLUTION, default False
    user : str
        user name, default &quot;&quot;
    
    Returns
    ---------
    Tuple : (True or False indicating if conversion was sucessful, meas_file name written)
    
    Info
    --------
    Sample naming convention:
        [1] XXXXY: where XXXX is an arbitrary length site designation and Y
            is the single character sample designation.  e.g., TG001a is the
            first sample from site TG001.    [default]
        [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
        [5] site name same as sample
        [6] site is entered under a separate column -- NOT CURRENTLY SUPPORTED
        [7-Z] [XXXX]YYY:  XXXX is site designation with Z characters with sample name XXXXYYYY
</pre></div>
</div>
</div>
</div>
<p>Let’s start with Anita’s files</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/jr6_magic/&#39;</span>
<span class="n">files</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span>
<span class="n">meas_files</span><span class="p">,</span><span class="n">spec_files</span><span class="p">,</span><span class="n">samp_files</span><span class="p">,</span><span class="n">site_files</span><span class="o">=</span><span class="p">[],[],[],[]</span>
<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="k">if</span> <span class="s1">&#39;.JR6&#39;</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="n">stem</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">meas_file</span><span class="o">=</span><span class="n">stem</span><span class="o">+</span><span class="s1">&#39;_measurements.txt&#39;</span> <span class="c1"># make a unique measurements file</span>
        <span class="n">spec_file</span><span class="o">=</span><span class="n">stem</span><span class="o">+</span><span class="s1">&#39;_specimens.txt&#39;</span>
        <span class="n">samp_file</span><span class="o">=</span><span class="n">stem</span><span class="o">+</span><span class="s1">&#39;_samples.txt&#39;</span>
        <span class="n">site_file</span><span class="o">=</span><span class="n">stem</span><span class="o">+</span><span class="s1">&#39;_sites.txt&#39;</span>
        <span class="n">convert</span><span class="o">.</span><span class="n">jr6_jr6</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span>
                        <span class="n">meas_file</span><span class="o">=</span><span class="n">meas_file</span><span class="p">,</span><span class="n">spec_file</span><span class="o">=</span><span class="n">spec_file</span><span class="p">,</span><span class="n">samp_file</span><span class="o">=</span><span class="n">samp_file</span><span class="p">,</span>
                        <span class="n">site_file</span><span class="o">=</span><span class="n">site_file</span><span class="p">,</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;Anita&#39;</span><span class="p">)</span>
        <span class="n">meas_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="n">meas_file</span><span class="p">)</span> <span class="c1"># save the file name to a list</span>
        <span class="n">spec_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="n">spec_file</span><span class="p">)</span>
        <span class="n">samp_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="n">samp_file</span><span class="p">)</span>
        <span class="n">site_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="n">site_file</span><span class="p">)</span>

<span class="c1"># combine the files</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">meas_files</span><span class="p">,</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;measurements.txt&#39;</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">spec_files</span><span class="p">,</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;specimens.txt&#39;</span><span class="p">,</span><span class="n">magic_table</span><span class="o">=</span><span class="s1">&#39;specimens&#39;</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">samp_files</span><span class="p">,</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;samples.txt&#39;</span><span class="p">,</span><span class="n">magic_table</span><span class="o">=</span><span class="s1">&#39;samples&#39;</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">site_files</span><span class="p">,</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;sites.txt&#39;</span><span class="p">,</span><span class="n">magic_table</span><span class="o">=</span><span class="s1">&#39;sites&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SML02.JR6
-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML02_specimens.txt
-I- 15 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML02_samples.txt
-I- 2 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML02_sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML02_measurements.txt
-I- 104 records written to measurements file
SML03.JR6
-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML03_specimens.txt
-I- 15 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML03_samples.txt
-I- 2 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML03_sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML03_measurements.txt
-I- 105 records written to measurements file
SML01.JR6
-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML01_specimens.txt
-I- 10 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML01_samples.txt
-I- 2 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML01_sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML01_measurements.txt
-I- 70 records written to measurements file
SML04.JR6
-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML04_specimens.txt
-I- 15 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML04_samples.txt
-I- 2 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML04_sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML04_measurements.txt
-I- 102 records written to measurements file
SML05.JR6
-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML05_specimens.txt
-I- 15 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML05_samples.txt
-I- 2 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML05_sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML05_measurements.txt
-I- 102 records written to measurements file
SML07.JR6
-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML07_specimens.txt
-I- 16 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML07_samples.txt
-I- 2 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML07_sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML07_measurements.txt
-I- 111 records written to measurements file
SML06.JR6
-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML06_specimens.txt
-I- 14 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML06_samples.txt
-I- 2 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML06_sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/SML06_measurements.txt
-I- 98 records written to measurements file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/measurements.txt
-I- 692 records written to measurements file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/specimens.txt
-I- 100 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/samples.txt
-I- 14 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/sites.txt
-I- 7 records written to sites file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/sites.txt&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">zeq_magic</span><span class="p">(</span><span class="n">input_dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">save_plots</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [])
</pre></div>
</div>
<img alt="../_images/PmagPy_MagIC_149_1.png" src="../_images/PmagPy_MagIC_149_1.png" />
<img alt="../_images/PmagPy_MagIC_149_2.png" src="../_images/PmagPy_MagIC_149_2.png" />
<img alt="../_images/PmagPy_MagIC_149_3.png" src="../_images/PmagPy_MagIC_149_3.png" />
<img alt="../_images/PmagPy_MagIC_149_4.png" src="../_images/PmagPy_MagIC_149_4.png" />
<img alt="../_images/PmagPy_MagIC_149_5.png" src="../_images/PmagPy_MagIC_149_5.png" />
<img alt="../_images/PmagPy_MagIC_149_6.png" src="../_images/PmagPy_MagIC_149_6.png" />
<img alt="../_images/PmagPy_MagIC_149_7.png" src="../_images/PmagPy_MagIC_149_7.png" />
<img alt="../_images/PmagPy_MagIC_149_8.png" src="../_images/PmagPy_MagIC_149_8.png" />
<img alt="../_images/PmagPy_MagIC_149_9.png" src="../_images/PmagPy_MagIC_149_9.png" />
<img alt="../_images/PmagPy_MagIC_149_10.png" src="../_images/PmagPy_MagIC_149_10.png" />
<img alt="../_images/PmagPy_MagIC_149_11.png" src="../_images/PmagPy_MagIC_149_11.png" />
<img alt="../_images/PmagPy_MagIC_149_12.png" src="../_images/PmagPy_MagIC_149_12.png" />
<img alt="../_images/PmagPy_MagIC_149_13.png" src="../_images/PmagPy_MagIC_149_13.png" />
<img alt="../_images/PmagPy_MagIC_149_14.png" src="../_images/PmagPy_MagIC_149_14.png" />
<img alt="../_images/PmagPy_MagIC_149_15.png" src="../_images/PmagPy_MagIC_149_15.png" />
</div>
</div>
<p>Now we can do Roi’s files</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/jr6_magic/&#39;</span>
<span class="n">files</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span>
<span class="n">meas_files</span><span class="p">,</span><span class="n">spec_files</span><span class="p">,</span><span class="n">samp_files</span><span class="p">,</span><span class="n">site_files</span><span class="o">=</span><span class="p">[],[],[],[]</span>
<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.jr6&#39;</span><span class="p">):</span>
        <span class="n">stem</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">meas_file</span><span class="o">=</span><span class="n">stem</span><span class="o">+</span><span class="s1">&#39;_measurements.txt&#39;</span> <span class="c1"># make a unique measurements file</span>
        <span class="n">spec_file</span><span class="o">=</span><span class="n">stem</span><span class="o">+</span><span class="s1">&#39;_specimens.txt&#39;</span>
        <span class="n">samp_file</span><span class="o">=</span><span class="n">stem</span><span class="o">+</span><span class="s1">&#39;_samples.txt&#39;</span>
        <span class="n">site_file</span><span class="o">=</span><span class="n">stem</span><span class="o">+</span><span class="s1">&#39;_sites.txt&#39;</span>
        <span class="n">convert</span><span class="o">.</span><span class="n">jr6_jr6</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span>
                        <span class="n">meas_file</span><span class="o">=</span><span class="n">meas_file</span><span class="p">,</span><span class="n">spec_file</span><span class="o">=</span><span class="n">spec_file</span><span class="p">,</span><span class="n">samp_file</span><span class="o">=</span><span class="n">samp_file</span><span class="p">,</span>
                        <span class="n">site_file</span><span class="o">=</span><span class="n">site_file</span><span class="p">,</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;Roi&#39;</span><span class="p">)</span>
        <span class="n">meas_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="n">meas_file</span><span class="p">)</span> <span class="c1"># save the file name to a list</span>
        <span class="n">spec_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="n">spec_file</span><span class="p">)</span>
        <span class="n">samp_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="n">samp_file</span><span class="p">)</span>
        <span class="n">site_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="n">site_file</span><span class="p">)</span>

<span class="c1"># combine the files</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">meas_files</span><span class="p">,</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;measurements.txt&#39;</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">spec_files</span><span class="p">,</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;specimens.txt&#39;</span><span class="p">,</span><span class="n">magic_table</span><span class="o">=</span><span class="s1">&#39;specimens&#39;</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">samp_files</span><span class="p">,</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;samples.txt&#39;</span><span class="p">,</span><span class="n">magic_table</span><span class="o">=</span><span class="s1">&#39;samples&#39;</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">site_files</span><span class="p">,</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;sites.txt&#39;</span><span class="p">,</span><span class="n">magic_table</span><span class="o">=</span><span class="s1">&#39;sites&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/TRM_specimens.txt
-I- 42 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/TRM_samples.txt
-I- 19 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/TRM_sites.txt
-I- 10 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/TRM_measurements.txt
-I- 499 records written to measurements file
measurement type unknown -01A
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/AF_specimens.txt
-I- 57 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/AF_samples.txt
-I- 17 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/AF_sites.txt
-I- 10 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/AF_measurements.txt
-I- 655 records written to measurements file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/measurements.txt
-I- 1154 records written to measurements file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/specimens.txt
-I- 98 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/samples.txt
-I- 30 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/sites.txt
-I- 10 records written to sites file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/sites.txt&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">zeq_magic</span><span class="p">(</span><span class="n">input_dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">save_plots</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [])
</pre></div>
</div>
<img alt="../_images/PmagPy_MagIC_152_1.png" src="../_images/PmagPy_MagIC_152_1.png" />
<img alt="../_images/PmagPy_MagIC_152_2.png" src="../_images/PmagPy_MagIC_152_2.png" />
<img alt="../_images/PmagPy_MagIC_152_3.png" src="../_images/PmagPy_MagIC_152_3.png" />
<img alt="../_images/PmagPy_MagIC_152_4.png" src="../_images/PmagPy_MagIC_152_4.png" />
<img alt="../_images/PmagPy_MagIC_152_5.png" src="../_images/PmagPy_MagIC_152_5.png" />
<img alt="../_images/PmagPy_MagIC_152_6.png" src="../_images/PmagPy_MagIC_152_6.png" />
<img alt="../_images/PmagPy_MagIC_152_7.png" src="../_images/PmagPy_MagIC_152_7.png" />
<img alt="../_images/PmagPy_MagIC_152_8.png" src="../_images/PmagPy_MagIC_152_8.png" />
<img alt="../_images/PmagPy_MagIC_152_9.png" src="../_images/PmagPy_MagIC_152_9.png" />
<img alt="../_images/PmagPy_MagIC_152_10.png" src="../_images/PmagPy_MagIC_152_10.png" />
<img alt="../_images/PmagPy_MagIC_152_11.png" src="../_images/PmagPy_MagIC_152_11.png" />
<img alt="../_images/PmagPy_MagIC_152_12.png" src="../_images/PmagPy_MagIC_152_12.png" />
<img alt="../_images/PmagPy_MagIC_152_13.png" src="../_images/PmagPy_MagIC_152_13.png" />
<img alt="../_images/PmagPy_MagIC_152_14.png" src="../_images/PmagPy_MagIC_152_14.png" />
<img alt="../_images/PmagPy_MagIC_152_15.png" src="../_images/PmagPy_MagIC_152_15.png" />
</div>
</div>
</section>
<section id="jr6-txt-magic">
<h3>jr6_txt_magic<a class="headerlink" href="#jr6-txt-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#jr6_txt_magic.py">[command line version]</a></p>
<p>We can repeat the exercise for the JR6 .txt format using <strong>convert.jr6_txt()</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">jr6_txt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function jr6_txt in module pmagpy.convert_2_magic:

jr6_txt(mag_file, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, meas_file=&#39;measurements.txt&#39;, spec_file=&#39;specimens.txt&#39;, samp_file=&#39;samples.txt&#39;, site_file=&#39;sites.txt&#39;, loc_file=&#39;locations.txt&#39;, user=&#39;&#39;, specnum=1, samp_con=&#39;1&#39;, location=&#39;unknown&#39;, lat=&#39;&#39;, lon=&#39;&#39;, noave=False, volume=12, timezone=&#39;UTC&#39;, meth_code=&#39;LP-NO&#39;)
    Converts JR6 .txt format files to MagIC measurements format files.
    
    Parameters
    ----------
    mag_file : str
        input file name
    dir_path : str
        working directory, default &quot;.&quot;
    input_dir_path : str
        input file directory IF different from dir_path, default &quot;&quot;
    meas_file : str
        output measurement file name, default &quot;measurements.txt&quot;
    spec_file : str
        output specimen file name, default &quot;specimens.txt&quot;
    samp_file: str
        output sample file name, default &quot;samples.txt&quot;
    site_file : str
        output site file name, default &quot;sites.txt&quot;
    loc_file : str
        output location file name, default &quot;locations.txt&quot;
    user : str
        user name, default &quot;&quot;
    specnum : int
        number of characters to designate a specimen, default 0
    samp_con : str
        sample/site naming convention, default &#39;1&#39;, see info below
    location : str
        location name, default &quot;unknown&quot;
    lat : float
        latitude, default &quot;&quot;
    lon : float
        longitude, default &quot;&quot;
    noave : bool
       do not average duplicate measurements, default False (so by default, DO average)
    volume : float
        volume in ccs, default 12
    timezone : timezone of date/time string in comment string, default UTC
    meth_code : str
        default &quot;LP-NO&quot;
    
    Returns
    ---------
    Tuple : (True or False indicating if conversion was sucessful, meas_file name written)
</pre></div>
</div>
</div>
</div>
<p>There are only data from Roi Granot in this format. The measurement values should be identical to the <strong>convert.jr6_jr6()</strong> function on .jr6 files with the same stem. Additional columns will be found when converting the .JR6 format as that format contains more information than the .txt files.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/jr6_magic/&#39;</span>
<span class="n">files</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;AF.txt&#39;</span><span class="p">,</span><span class="s1">&#39;TRM.txt&#39;</span><span class="p">,</span><span class="s1">&#39;AP12.txt&#39;</span><span class="p">]</span>
<span class="n">meas_files</span><span class="p">,</span><span class="n">spec_files</span><span class="p">,</span><span class="n">samp_files</span><span class="p">,</span><span class="n">site_files</span><span class="o">=</span><span class="p">[],[],[],[]</span>
<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="n">stem</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">meas_file</span><span class="o">=</span><span class="n">stem</span><span class="o">+</span><span class="s1">&#39;_measurements.txt&#39;</span> <span class="c1"># make a unique measurements file</span>
        <span class="n">spec_file</span><span class="o">=</span><span class="n">stem</span><span class="o">+</span><span class="s1">&#39;_specimens.txt&#39;</span>
        <span class="n">samp_file</span><span class="o">=</span><span class="n">stem</span><span class="o">+</span><span class="s1">&#39;_samples.txt&#39;</span>
        <span class="n">site_file</span><span class="o">=</span><span class="n">stem</span><span class="o">+</span><span class="s1">&#39;_sites.txt&#39;</span>
        <span class="n">convert</span><span class="o">.</span><span class="n">jr6_txt</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span>
                        <span class="n">meas_file</span><span class="o">=</span><span class="n">meas_file</span><span class="p">,</span><span class="n">spec_file</span><span class="o">=</span><span class="n">spec_file</span><span class="p">,</span><span class="n">samp_file</span><span class="o">=</span><span class="n">samp_file</span><span class="p">,</span>
                        <span class="n">site_file</span><span class="o">=</span><span class="n">site_file</span><span class="p">,</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;Roi&#39;</span><span class="p">)</span>
        <span class="n">meas_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="n">meas_file</span><span class="p">)</span> <span class="c1"># save the file name to a list</span>
        <span class="n">spec_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="n">spec_file</span><span class="p">)</span>
        <span class="n">samp_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="n">samp_file</span><span class="p">)</span>
        <span class="n">site_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="n">site_file</span><span class="p">)</span>

<span class="c1"># combine the files</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">meas_files</span><span class="p">,</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;measurements.txt&#39;</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">spec_files</span><span class="p">,</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;specimens.txt&#39;</span><span class="p">,</span><span class="n">magic_table</span><span class="o">=</span><span class="s1">&#39;specimens&#39;</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">samp_files</span><span class="p">,</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;samples.txt&#39;</span><span class="p">,</span><span class="n">magic_table</span><span class="o">=</span><span class="s1">&#39;samples&#39;</span><span class="p">)</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">site_files</span><span class="p">,</span><span class="n">dir_path</span><span class="o">+</span><span class="s1">&#39;sites.txt&#39;</span><span class="p">,</span><span class="n">magic_table</span><span class="o">=</span><span class="s1">&#39;sites&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>AF.txt
-I- Using less strict decoding for /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/AF.txt, output may have formatting errors
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/AF_specimens.txt
-I- 57 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/AF_samples.txt
-I- 17 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/AF_sites.txt
-I- 10 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/locations.txt
-I- 1 records written to locations file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/AF_measurements.txt
-I- 655 records written to measurements file
TRM.txt
-I- Using less strict decoding for /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/TRM.txt, output may have formatting errors
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/TRM_specimens.txt
-I- 42 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/TRM_samples.txt
-I- 19 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/TRM_sites.txt
-I- 10 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/locations.txt
-I- 1 records written to locations file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/TRM_measurements.txt
-I- 499 records written to measurements file
AP12.txt
-I- Using less strict decoding for /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/AP12.txt, output may have formatting errors
-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/AP12_specimens.txt
-I- 9 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/AP12_samples.txt
-I- 6 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/AP12_sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/AP12_measurements.txt
-I- 69 records written to measurements file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/measurements.txt
-I- 1223 records written to measurements file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/specimens.txt
-I- 107 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/samples.txt
-I- 36 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/sites.txt
-I- 11 records written to sites file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/jr6_magic/sites.txt&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">zeq_magic</span><span class="p">(</span><span class="n">meas_file</span><span class="o">=</span><span class="s1">&#39;AP12_measurements.txt&#39;</span><span class="p">,</span><span class="n">input_dir_path</span><span class="o">=</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">save_plots</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No plots could be created for specimen: AP12-01A
No plots could be created for specimen: AP12-02A
No plots could be created for specimen: AP12-03A
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [])
</pre></div>
</div>
<img alt="../_images/PmagPy_MagIC_157_2.png" src="../_images/PmagPy_MagIC_157_2.png" />
<img alt="../_images/PmagPy_MagIC_157_3.png" src="../_images/PmagPy_MagIC_157_3.png" />
<img alt="../_images/PmagPy_MagIC_157_4.png" src="../_images/PmagPy_MagIC_157_4.png" />
<img alt="../_images/PmagPy_MagIC_157_5.png" src="../_images/PmagPy_MagIC_157_5.png" />
<img alt="../_images/PmagPy_MagIC_157_6.png" src="../_images/PmagPy_MagIC_157_6.png" />
<img alt="../_images/PmagPy_MagIC_157_7.png" src="../_images/PmagPy_MagIC_157_7.png" />
</div>
</div>
</section>
<section id="k15-magic">
<h3>k15_magic<a class="headerlink" href="#k15-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#k15_magic.py">[command line version]</a></p>
<p>Someone took a set of samples from a dike margin in the Troodos Ophiolite and measured their anisotropy of magnetic susceptibility on an a Kappabridge KLY 2.0 instrument in the SIO laboratory.  An example of the  data file format is in k15_magic.</p>
<p>The first line of each set of four has the specimen name, azimuth, plunge, and bedding strike and dip the next three lines are sets of five measurements in the 15 positions recommended by Jelinek (1977):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s1">&#39;data_files/Figures/meas15.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/PmagPy_MagIC_159_0.png" src="../_images/PmagPy_MagIC_159_0.png" />
</div>
</div>
<p>The 15 measurements for each specimen, along with orientation information and the specimen name were saved in the file data_files/k15_magic/k15_example.dat.</p>
<p>To convert 15 measurement anisotropy of magnetic susceptibility file format to MagIC,   use <strong>convert.k15()</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">k15</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function k15 in module pmagpy.convert_2_magic:

k15(k15file, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, meas_file=&#39;measurements.txt&#39;, aniso_outfile=&#39;specimens.txt&#39;, samp_file=&#39;samples.txt&#39;, result_file=&#39;rmag_anisotropy.txt&#39;, specnum=0, sample_naming_con=&#39;1&#39;, location=&#39;unknown&#39;, data_model_num=3)
    converts .k15 format data to MagIC  format.
    assumes Jelinek Kappabridge measurement scheme.
    
    Parameters
    ----------
    k15file : str
        input file name
    dir_path : str
        output file directory, default &quot;.&quot;
    input_dir_path : str
        input file directory IF different from dir_path, default &quot;&quot;
    meas_file : str
        output measurement file name, default &quot;measurements.txt&quot;
    aniso_outfile : str
        output specimen file name, default &quot;specimens.txt&quot;
    samp_file: str
        output sample file name, default &quot;samples.txt&quot;
    aniso_results_file : str
        output result file name, default &quot;rmag_results.txt&quot;, data model 2 only
    specnum : int
        number of characters to designate a specimen, default 0
    samp_con : str
        sample/site naming convention, default &#39;1&#39;, see info below
    location : str
        location name, default &quot;unknown&quot;
    data_model_num : int
        MagIC data model [2, 3], default 3
    
    Returns
    --------
    type - Tuple : (True or False indicating if conversion was sucessful, samp_file name written)
    
    
    Info
    --------
      Infile format:
          name [az,pl,strike,dip], followed by
          3 rows of 5 measurements for each specimen
    
       Sample naming convention:
            [1] XXXXY: where XXXX is an arbitrary length site designation and Y
                is the single character sample designation.  e.g., TG001a is the
                first sample from site TG001.    [default]
            [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
            [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
            [4-Z] XXXXYYY:  YYY is sample designation with Z characters from site XXX
            [5] site name same as sample
            [6] site name entered in site_name column in the orient.txt format input file  -- NOT CURRENTLY SUPPORTED
            [7-Z] [XXXX]YYY:  XXXX is site designation with Z characters with sample name XXXXYYYY
            NB: all others you will have to customize your self
                 or e-mail ltauxe@ucsd.edu for help.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">k15</span><span class="p">(</span><span class="s1">&#39;k15_example.dat&#39;</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/k15_magic/&#39;</span><span class="p">,</span>
            <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Troodos Ophiolite&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/k15_magic/samples.txt
48  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/k15_magic/specimens.txt
120  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/k15_magic/measurements.txt
Data saved to: /Users/nebula/Python/PmagPy/data_files/convert_2_magic/k15_magic/measurements.txt, /Users/nebula/Python/PmagPy/data_files/convert_2_magic/k15_magic/specimens.txt, /Users/nebula/Python/PmagPy/data_files/convert_2_magic/k15_magic/samples.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/k15_magic/measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">aniso_magic_nb</span><span class="p">(</span><span class="n">infile</span><span class="o">=</span><span class="s1">&#39;specimens.txt&#39;</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/k15_magic/&#39;</span><span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1  saved in  Troodos Ophiolite_s_aniso-data.png
2  saved in  Troodos Ophiolite_s_aniso-conf.png
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 [&#39;Troodos Ophiolite_s_aniso-data.png&#39;, &#39;Troodos Ophiolite_s_aniso-conf.png&#39;])
</pre></div>
</div>
</div>
</div>
</section>
<section id="kly4s-magic">
<h3>kly4s_magic<a class="headerlink" href="#kly4s-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#kly4s_magic.py">[command line version]</a></p>
<p>The program AMSSpin available for downloading from <a class="reference external" href="http://earthref.org/ERDA/940/">http://earthref.org/ERDA/940/</a> generates data for the Kappabridge KLY4S spinning magnetic susceptibility instrument as described by Gee et al. (2008).</p>
<p>Output files are in the format of the file KLY4S_magic_example.dat (found in the measurement_import/kly4s_magic folder).</p>
<p>The columns in the example file are:</p>
<p>Specimen S_1 S_2 S_3 S_4 S_5 S_6 χb(μSI) date time user</p>
<p>To convert the Agico Kappabridge KLY4S files generated by the SIO labview program (written by Jeff Gee), use <strong>convert.kly4s()</strong>.
This function will create the files needed by the MagIC database and the data can be plotted using <a class="reference external" href="#aniso_magic">aniso_magic</a>.   If you were to import the sample files from the LIMS data base for these samples, you could plot them versus depth, or as equal area projections using <strong>ani_depthplot</strong> and <strong>aniso_magic</strong> respectively.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">kly4s</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function kly4s in module pmagpy.convert_2_magic:

kly4s(infile, specnum=0, locname=&#39;unknown&#39;, inst=&#39;SIO-KLY4S&#39;, samp_con=&#39;1&#39;, or_con=&#39;3&#39;, user=&#39;&#39;, measfile=&#39;measurements.txt&#39;, aniso_outfile=&#39;rmag_anisotropy.txt&#39;, samp_infile=&#39;&#39;, spec_infile=&#39;&#39;, spec_outfile=&#39;specimens.txt&#39;, azdip_infile=&#39;&#39;, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, data_model_num=3, samp_outfile=&#39;samples.txt&#39;, site_outfile=&#39;sites.txt&#39;)
     converts files generated by SIO kly4S labview program to MagIC formated
    
     Parameters
     ----------
     infile :  str
         input file name
     specnum : int
         number of characters to designate a specimen, default 0
     locname : str
         location name, default &quot;unknown&quot;
     samp_con : str
         sample/site naming convention, default &#39;1&#39;, see info below
     or_con : number
         orientation convention, default &#39;3&#39;, see info below
     user : str
         user name, default &quot;&quot;
     measfile : str
         output measurement file name, default &quot;measurements.txt&quot;
     aniso_outfile : str
         output anisotropy file name, default &quot;rmag_anisotropy.txt&quot;, data model 2 only
     samp_infile : str
         existing sample infile (not required), default &quot;&quot;
     spec_infile : str
         existing site infile (not required), default &quot;&quot;
     spec_outfile : str
         output specimen file name, default &quot;specimens.txt&quot;
     azdip_infile : str
         AZDIP file with orientations, will create sample output file
     dir_path : str
         output directory, default &quot;.&quot;
     input_dir_path : str
         input file directory IF different from dir_path, default &quot;&quot;
     data_model_num : int
         MagIC data model 2 or 3, default 3
     samp_outfile : str
         sample output filename, default &quot;samples.txt&quot;
     site_outfile : str
         site output filename, default &quot;sites.txt&quot;
    
     Returns
     --------
     type - Tuple : (True or False indicating if conversion was sucessful, meas_file name written)
    
    
     Info
     ----------
     Orientation convention:
         [1] Lab arrow azimuth= mag_azimuth; Lab arrow dip=-field_dip
             i.e., field_dip is degrees from vertical down - the hade [default]
         [2] Lab arrow azimuth = mag_azimuth-90; Lab arrow dip = -field_dip
             i.e., mag_azimuth is strike and field_dip is hade
         [3] Lab arrow azimuth = mag_azimuth; Lab arrow dip = 90-field_dip
             i.e.,  lab arrow same as field arrow, but field_dip was a hade.
         [4] lab azimuth and dip are same as mag_azimuth, field_dip
         [5] lab azimuth is same as mag_azimuth,lab arrow dip=field_dip-90
         [6] Lab arrow azimuth = mag_azimuth-90; Lab arrow dip = 90-field_dip
         [7] all others you will have to either customize your
             self or e-mail ltauxe@ucsd.edu for help.
    
    Sample naming convention:
         [1] XXXXY: where XXXX is an arbitrary length site designation and Y
             is the single character sample designation.  e.g., TG001a is the
             first sample from site TG001.    [default]
         [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
         [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
         [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
         [5] site name = sample name
         [6] site name entered in site_name column in the orient.txt format input file  -- NOT CURRENTLY SUPPORTED
         [7-Z] [XXX]YYY:  XXX is site designation with Z characters from samples  XXXYYY
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">kly4s</span><span class="p">(</span><span class="s1">&#39;KLY4S_magic_example.dat&#39;</span><span class="p">,</span>
              <span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/kly4s_magic/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>anisotropy data added to specimen records
52  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/kly4s_magic/specimens.txt
specimen information written to new file: /Users/nebula/Python/PmagPy/data_files/convert_2_magic/kly4s_magic/specimens.txt
26  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/kly4s_magic/measurements.txt
measurement data saved in  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/kly4s_magic/measurements.txt
26  records written to file  samples.txt
26  records written to file  sites.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/kly4s_magic/measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">aniso_magic</span><span class="p">(</span><span class="n">infile</span><span class="o">=</span><span class="s1">&#39;specimens.txt&#39;</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/kly4s_magic/&#39;</span><span class="p">,</span> <span class="n">save_plots</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [])
</pre></div>
</div>
<img alt="../_images/PmagPy_MagIC_167_1.png" src="../_images/PmagPy_MagIC_167_1.png" />
<img alt="../_images/PmagPy_MagIC_167_2.png" src="../_images/PmagPy_MagIC_167_2.png" />
</div>
</div>
</section>
<section id="ldeo-magic">
<h3>ldeo_magic<a class="headerlink" href="#ldeo-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#ldeo_magic.py">[command line version]</a></p>
<p>To convert Lamont-Doherty Earth Observatory data files to MagIC, use <strong>convert.ldeo()</strong>.</p>
<p>NB:  this doesn’t seem to work properly at all.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">ldeo</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function ldeo in module pmagpy.convert_2_magic:

ldeo(magfile, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, meas_file=&#39;measurements.txt&#39;, spec_file=&#39;specimens.txt&#39;, samp_file=&#39;samples.txt&#39;, site_file=&#39;sites.txt&#39;, loc_file=&#39;locations.txt&#39;, specnum=0, samp_con=&#39;1&#39;, location=&#39;unknown&#39;, codelist=&#39;&#39;, coil=&#39;&#39;, arm_labfield=5e-05, trm_peakT=873.0, peakfield=0, labfield=0, phi=0, theta=0, mass_or_vol=&#39;v&#39;, noave=0)
    converts Lamont Doherty Earth Observatory measurement files to MagIC data base model 3.0
    
    Parameters
    _________
    magfile : input measurement file
    dir_path : output directory path, default &quot;.&quot;
    input_dir_path : input file directory IF different from dir_path, default &quot;&quot;
    meas_file : output file measurement file name, default &quot;measurements.txt&quot;
    spec_file : output file specimen file name, default &quot;specimens.txt&quot;
    samp_file : output file sample file name, default &quot;samples.txt&quot;
    site_file : output file site file name, default &quot;sites.txt&quot;
    loc_file : output file location file name, default &quot;locations.txt&quot;
    specnum : number of terminal characters distinguishing specimen from sample, default 0
    samp_con :  sample/site naming convention, default &quot;1&quot;
            &quot;1&quot; XXXXY: where XXXX is an arbitr[ary length site designation and Y
                is the single character sample designation.  e.g., TG001a is the
                first sample from site TG001.    [default]
            &quot;2&quot; XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
            &quot;3&quot; XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
            &quot;4-Z&quot; XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
            &quot;5&quot; site name same as sample
            &quot;6&quot; site is entered under a separate column NOT CURRENTLY SUPPORTED
            &quot;7-Z&quot; [XXXX]YYY:  XXXX is site designation with Z characters with sample name XXXXYYYY
            NB: all others you will have to customize your self
                 or e-mail ltauxe@ucsd.edu for help.
    
            &quot;8&quot; synthetic - has no site name
            &quot;9&quot; ODP naming convention
    
    codelist : colon delimited string of lab protocols (e.g., codelist=&quot;AF&quot;), default &quot;&quot;
        AF:  af demag
        T: thermal including thellier but not trm acquisition
        S: Shaw method
        I: IRM (acquisition)
        N: NRM only
        TRM: trm acquisition
        ANI: anisotropy experiment
        D: double AF demag
        G: triple AF demag (GRM protocol)
    coil : 1,2, or 3 unist of IRM field in volts using ASC coil #1,2 or 3, default &quot;&quot;
    arm_labfield : dc field for ARM in tesla, default 50e-6
    peakfield : peak af field for ARM, default 873.
    trm_peakT : peak temperature for TRM, default 0
    labfield : lab field in tesla for TRM, default 0
    phi, theta : direction of lab field, default 0, 0
    mass_or_vol : is the parameter in the file mass &#39;m&#39; or volume &#39;v&#39;, default &quot;v&quot;
    noave : boolean, if False, average replicates, default False
    
    Returns
    --------
    type - Tuple : (True or False indicating if conversion was sucessful, meas_file name written)
    
    Effects
    _______
    creates MagIC formatted tables
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">ldeo</span><span class="p">(</span><span class="s1">&#39;ldeo_magic_example.dat&#39;</span><span class="p">,</span><span class="n">codelist</span><span class="o">=</span><span class="s1">&#39;AF&#39;</span><span class="p">,</span>
             <span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/ldeo_magic/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/ldeo_magic/specimens.txt
-I- 35 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/ldeo_magic/samples.txt
-I- 35 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/ldeo_magic/sites.txt
-I- 35 records written to sites file
-I- writing locations records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/ldeo_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/ldeo_magic/measurements.txt
-I- 503 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/ldeo_magic/measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">zeq_magic</span><span class="p">(</span><span class="n">input_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/ldeo_magic/&#39;</span><span class="p">,</span> <span class="n">save_plots</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [])
</pre></div>
</div>
<img alt="../_images/PmagPy_MagIC_171_1.png" src="../_images/PmagPy_MagIC_171_1.png" />
<img alt="../_images/PmagPy_MagIC_171_2.png" src="../_images/PmagPy_MagIC_171_2.png" />
<img alt="../_images/PmagPy_MagIC_171_3.png" src="../_images/PmagPy_MagIC_171_3.png" />
<img alt="../_images/PmagPy_MagIC_171_4.png" src="../_images/PmagPy_MagIC_171_4.png" />
<img alt="../_images/PmagPy_MagIC_171_5.png" src="../_images/PmagPy_MagIC_171_5.png" />
<img alt="../_images/PmagPy_MagIC_171_6.png" src="../_images/PmagPy_MagIC_171_6.png" />
<img alt="../_images/PmagPy_MagIC_171_7.png" src="../_images/PmagPy_MagIC_171_7.png" />
<img alt="../_images/PmagPy_MagIC_171_8.png" src="../_images/PmagPy_MagIC_171_8.png" />
<img alt="../_images/PmagPy_MagIC_171_9.png" src="../_images/PmagPy_MagIC_171_9.png" />
<img alt="../_images/PmagPy_MagIC_171_10.png" src="../_images/PmagPy_MagIC_171_10.png" />
<img alt="../_images/PmagPy_MagIC_171_11.png" src="../_images/PmagPy_MagIC_171_11.png" />
<img alt="../_images/PmagPy_MagIC_171_12.png" src="../_images/PmagPy_MagIC_171_12.png" />
<img alt="../_images/PmagPy_MagIC_171_13.png" src="../_images/PmagPy_MagIC_171_13.png" />
<img alt="../_images/PmagPy_MagIC_171_14.png" src="../_images/PmagPy_MagIC_171_14.png" />
<img alt="../_images/PmagPy_MagIC_171_15.png" src="../_images/PmagPy_MagIC_171_15.png" />
</div>
</div>
</section>
<section id="livdb-magic">
<h3>livdb_magic<a class="headerlink" href="#livdb-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#livdb_magic.py">[command line version]</a></p>
<p>To convert the Liverpool university database  format to MagIC use <strong>convert.livdb()</strong>.</p>
<p>Here we have several experiment types as examples as examples.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">livdb</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function livdb in module pmagpy.convert_2_magic:

livdb(input_dir_path, output_dir_path=&#39;.&#39;, meas_out=&#39;measurements.txt&#39;, spec_out=&#39;specimens.txt&#39;, samp_out=&#39;samples.txt&#39;, site_out=&#39;sites.txt&#39;, loc_out=&#39;locations.txt&#39;, samp_name_con=&#39;sample=specimen&#39;, samp_num_chars=0, site_name_con=&#39;site=sample&#39;, site_num_chars=0, location_name=&#39;&#39;, data_model_num=3)
    Search input directory for Livdb .csv or .livdb files
    and convert them to MagIC format.
    Input directory should contain only input files for one location.
    
    Parameters
    ----------
    input_dir_path : str
        input directory with .csv or .livdb files to import
    output_dir_path : str
        directory to output files, default &quot;.&quot;
    meas_out : str
        output measurement file name, default &quot;measurements.txt&quot;
    spec_out : str
        output specimen file name, default &quot;specimens.txt&quot;
    samp_out: str
        output sample file name, default &quot;samples.txt&quot;
    site_out : str
        output site file name, default &quot;sites.txt&quot;
    loc_out : str
        output location file name, default &quot;locations.txt&quot;
    samp_name_con : str
        specimen --&gt; sample naming convention, default &#39;sample=specimen&#39;
        options: {1: &#39;sample=specimen&#39;, 2: &#39;no. of terminate characters&#39;, 3: &#39;character delimited&#39;}
    samp_num_chars : int or str
        if using &#39;no. of terminate characters&#39; or &#39;character delimited&#39;,
        provide the number of characters or the character delimiter
    site_name_con : str
        sample --&gt; site naming convention, default &#39;site=sample&#39;
        options: {1: &#39;site=sample&#39;, 2: &#39;no. of terminate characters&#39;, 3: &#39;character delimited&#39;}
    site_num_chars : int or str
        if using &#39;no. of terminate characters&#39; or &#39;character delimited&#39;,
        provide the number of characters or the character delimiter
    locname : str
        location name, default &quot;&quot;
    data_model_num : int
        MagIC data model 2 or 3, default 3
    
    Returns
    --------
    type - Tuple : (True or False indicating if conversion was sucessful, file name written)
    
    
    Input file format
    -----------------
    # --------------------------------------
    # Read the file
    #
    # Livdb Database structure
    #
    # HEADER:
    # 1) First line is the header.
    #    The header includes 19 fields delimited by comma (&#39;,&#39;)
    #    Notice: space is not a delimiter !
    #    In the list below the delimiter is not used, and the conversion script assumes comma delimited file
    #
    # Header fields:
    # Sample code (string): (delimiter = space+)
    # Sample Dip (degrees): (delimiter = space)
    # Sample Dec (degrees): (delimiter = space)
    # Height (meters): (delimiter = space)
    # Position (no units): (delimiter = space)
    # Thickness (meters): (delimiter = space)
    # Unit Dip (aka tilt) (degrees): (delimiter = space)
    # Unit Dip Direction (aka Direction) (degrees): (delimiter = space)
    # Site Latitude (decimal degrees): (delimiter = space)
    # Site Longitude (decimal degrees): (delimiter = space)
    # Experiment Type (string): (delimiter = |)
    # Name of measurer (string): (delimiter = |)
    # Magnetometer name  (string): (delimiter = |)
    # Demagnetiser name  (string): (delimiter = |)
    # Specimen/Experiment Comment  (string): (delimiter = |)
    # Database version (integer): (delimiter = |)
    # Conversion Version (string): (delimiter = |)
    # Sample Volume (cc): (delimiter = |)
    # Sample Density  (kg/m^3): (delimiter = |)
    #
    #
    # BODY:
    # 1) Body includes 22 fields delimited by comma (&#39;,&#39;)
    # 2) Body ends with an &quot;END&quot; statment
    #
    # Body fields:
    # Treatment (aka field) (mT / deg C / 10-2 W): (delimiter = space)
    # Microwave Power (W) : (delimiter = space)
    # Microwave Time (s) : (delimiter = space)
    # X (nAm^2): (delimiter = space)
    # Y (nAm^2): (delimiter = space)
    # Z (nAm^2): (delimiter = space)
    # Mass g: (delimiter = space)
    # Applied field intensity (micro_T): (delimiter = space)
    # Applied field Dec (degrees): (delimiter = space)
    # Applied Field Inc (degrees): (delimiter = space)
    # Measurement Date (DD-MM-YYYY)  or (DD/MM/YYYY) #### CHECK !! ## (delimiter = |)
    # Measurement Time (HH:SS:MM) (delimiter = |)
    # Measurement Remark (string) (delimiter = |)
    # Step Number (integer) (delimiter = |)
    # Step Type (string) (Z/I/P/T/O/NRM) (delimiter = |)
    # Tristan Gain (integer) (delimiter = |)
    # Microwave Power Integral (W.s) (delimiter = |)
    # JR6 Error(percent %) (delimiter = |)
    # FiT Smm (?) (delimiter = |)
    # Utrecht Error (percent %) (delimiter = |)
    # AF Demag/Remag Peak Field (mT) (delimiter = |)
    # TH Demag/Remag Peak Temperature (deg C) (delimiter = |)
    # -------------------------------------------------------------
    
    # --------------------------------------
    # Important assumptions:
    # (1) The program checks if the same treatment appears more than once (a measurement is repeated twice).
    #       If yes, then it takes only the second one and ignores the first.
    # (2) –99 and 999 are codes for N/A
    # (3) The &quot;treatment step&quot; for Thermal Thellier experiment is taken from the &quot;TH Demag/Remag Peak Temperature&quot;
    # (4) The &quot;treatment step&quot; for Microwave Thellier experiment is taken from the &quot;Step Number&quot;
    # (5) As there might be contradiction between the expected treatment (i.e. Z,I,P,T,A assumed by the experiment type)
    #       and &quot;Step Type&quot; field due to typos or old file formats:
    #       The program concludes the expected treatment from the following:
    #       (&quot;Experiment Type) + (&quot;Step Number&quot; or &quot;TH Demag/Remag Peak Temperature&quot;) + (the order of the measurements).
    #       The conversion script will spit out a WARNING message in a case of contradiction.
    # (6) If the program finds AF demagnetization before the infield ot zerofield steps:
    #       then assumes that this is an AFD step domne before the experiment.
    # (7) The prgram ignores microwave fields (aka field,Microwave Power,Microwave Time) in Thermal experiments. And these fields will not be converted
    #     to MagIC.
    # (8) NRM step: NRM step is regonized either by &quot;Applied field intensity&quot;=0 and &quot;Applied field Dec&quot; =0 and &quot;Applied Field Inc&quot;=0
    #               or if &quot;Step Type&quot; = NRM
    #
    #
    #
    # -------------------------------------------------------------
    
    # --------------------------------------
    # Script was tested on the following protocols:
    # TH-PI-IZZI+ [November 2013, rshaar]
    # MW-PI-C++ [November 2013, rshaar]
    # MW-PI-IZZI+ ]November 2013, rshaar]
    #
    # Other protocols should be tested before use.
    #
    #
    #
    # -------------------------------------------------------------
</pre></div>
</div>
</div>
</div>
<p>Here’s an example for an IZZI style, thermal experiment:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">livdb</span><span class="p">(</span><span class="s1">&#39;data_files/convert_2_magic/livdb_magic/TH_IZZI+/&#39;</span><span class="p">,</span>
             <span class="n">output_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/livdb_magic/TH_IZZI+&#39;</span><span class="p">,</span>
             <span class="n">site_name_con</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">site_num_chars</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Open file:  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/TH_IZZI+/ATPI_Thellier.livdb
Found a repeating measurement at line 18, sample ATPIPV26-15A. taking the last one
Found a repeating measurement at line 19, sample ATPIPV31-7B . taking the last one
659  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/TH_IZZI+/measurements.txt
27  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/TH_IZZI+/specimens.txt
-I- Removing non-MagIC column names from measurements: sample site location 

-I- Removing non-MagIC column names from specimens: height site location 

-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/TH_IZZI+/measurements.txt
-I- 659 records written to measurements file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/TH_IZZI+/specimens.txt
-I- 27 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/TH_IZZI+/samples.txt
-I- 27 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/TH_IZZI+/sites.txt
-I- 7 records written to sites file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/TH_IZZI+/measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">thellier_magic</span><span class="p">(</span><span class="n">input_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/livdb_magic/TH_IZZI+&#39;</span><span class="p">,</span> 
                     <span class="n">save_plots</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">interactive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">n_specs</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ATPIPV04-1A
ATPIPV04-6A
ATPIPV04-7N
ATPIPV14-1A
ATPIPV14-2A
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [])
</pre></div>
</div>
<img alt="../_images/PmagPy_MagIC_176_2.png" src="../_images/PmagPy_MagIC_176_2.png" />
<img alt="../_images/PmagPy_MagIC_176_3.png" src="../_images/PmagPy_MagIC_176_3.png" />
<img alt="../_images/PmagPy_MagIC_176_4.png" src="../_images/PmagPy_MagIC_176_4.png" />
<img alt="../_images/PmagPy_MagIC_176_5.png" src="../_images/PmagPy_MagIC_176_5.png" />
<img alt="../_images/PmagPy_MagIC_176_6.png" src="../_images/PmagPy_MagIC_176_6.png" />
<img alt="../_images/PmagPy_MagIC_176_7.png" src="../_images/PmagPy_MagIC_176_7.png" />
<img alt="../_images/PmagPy_MagIC_176_8.png" src="../_images/PmagPy_MagIC_176_8.png" />
<img alt="../_images/PmagPy_MagIC_176_9.png" src="../_images/PmagPy_MagIC_176_9.png" />
<img alt="../_images/PmagPy_MagIC_176_10.png" src="../_images/PmagPy_MagIC_176_10.png" />
<img alt="../_images/PmagPy_MagIC_176_11.png" src="../_images/PmagPy_MagIC_176_11.png" />
<img alt="../_images/PmagPy_MagIC_176_12.png" src="../_images/PmagPy_MagIC_176_12.png" />
<img alt="../_images/PmagPy_MagIC_176_13.png" src="../_images/PmagPy_MagIC_176_13.png" />
<img alt="../_images/PmagPy_MagIC_176_14.png" src="../_images/PmagPy_MagIC_176_14.png" />
<img alt="../_images/PmagPy_MagIC_176_15.png" src="../_images/PmagPy_MagIC_176_15.png" />
<img alt="../_images/PmagPy_MagIC_176_16.png" src="../_images/PmagPy_MagIC_176_16.png" />
<img alt="../_images/PmagPy_MagIC_176_17.png" src="../_images/PmagPy_MagIC_176_17.png" />
<img alt="../_images/PmagPy_MagIC_176_18.png" src="../_images/PmagPy_MagIC_176_18.png" />
<img alt="../_images/PmagPy_MagIC_176_19.png" src="../_images/PmagPy_MagIC_176_19.png" />
<img alt="../_images/PmagPy_MagIC_176_20.png" src="../_images/PmagPy_MagIC_176_20.png" />
<img alt="../_images/PmagPy_MagIC_176_21.png" src="../_images/PmagPy_MagIC_176_21.png" />
</div>
</div>
<p>here’s one for microwave “C+” experiment</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">livdb</span><span class="p">(</span><span class="s1">&#39;data_files/convert_2_magic/livdb_magic/MW_C+/&#39;</span><span class="p">,</span>
             <span class="n">output_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/livdb_magic/MW_C+&#39;</span><span class="p">,</span>
             <span class="n">site_name_con</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">site_num_chars</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Open file:  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_C+/CHEV.livdb
23  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_C+/measurements.txt
1  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_C+/specimens.txt
-I- Removing non-MagIC column names from measurements: sample site location 

-I- Removing non-MagIC column names from specimens: height site location 

-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_C+/measurements.txt
-I- 23 records written to measurements file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_C+/specimens.txt
-I- 1 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_C+/samples.txt
-I- 1 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_C+/sites.txt
-I- 1 records written to sites file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_C+/measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<p>An example for both microwave IZZI and C++:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">livdb</span><span class="p">(</span><span class="s1">&#39;data_files/convert_2_magic/livdb_magic/MW_IZZI+andC++/&#39;</span><span class="p">,</span>
             <span class="n">output_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/livdb_magic/MW_IZZI+andC++&#39;</span><span class="p">,</span>
             <span class="n">samp_name_con</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="n">samp_num_chars</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">site_name_con</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">site_num_chars</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Open file:  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_IZZI+andC++/NVPA.livdb
-W- WARNING sample NVPADC18A2 treatment= 13. Step Type is O but the program assumes LT-M-I
-W- WARNING sample NVPADC18A2 treatment= 13. Step Type is O but the program assumes LT-M-I
-W- WARNING sample NVPADC18A2 treatment= 13. Step Type is Z but the program assumes LT-PMRM-MD
-W- livdb.py does not support this experiment type yet.
    Please report your issue on https://github.com/PmagPy/PmagPy/issues
-W- WARNING sample NVPATF16C2 treatment= 1. Step Type is Z but the program assumes LT-M-I
-W- WARNING sample NVPATF16C2 treatment= 3. Step Type is I but the program assumes LT-M-Z
-W- WARNING sample NVPATF16C2 treatment= 3. Step Type is Z but the program assumes LT-M-I
-W- WARNING sample NVPATF16C2 treatment= 2. Step Type is P but the program assumes LT-PMRM-MD
-W- WARNING sample NVPATF16C2 treatment= 4. Step Type is Z but the program assumes LT-M-I
-W- WARNING sample NVPATF16C2 treatment= 4. Step Type is I but the program assumes LT-M-Z
-W- WARNING sample NVPATF16C2 treatment= 7. Step Type is I but the program assumes LT-M-Z
-W- WARNING sample NVPATF16C2 treatment= 7. Step Type is Z but the program assumes LT-M-I
-W- WARNING sample NVPATF16C2 treatment= 5. Step Type is P but the program assumes LT-PMRM-MD
-W- WARNING sample NVPATF16C2 treatment= 8. Step Type is Z but the program assumes LT-M-I
-W- WARNING sample NVPATF16C2 treatment= 8. Step Type is I but the program assumes LT-M-Z
-W- WARNING sample NVPATF16C2 treatment= 11. Step Type is I but the program assumes LT-M-Z
-W- WARNING sample NVPATF16C2 treatment= 11. Step Type is Z but the program assumes LT-M-I
-W- WARNING sample NVPATF16C2 treatment= 9. Step Type is P but the program assumes LT-PMRM-MD
-W- WARNING sample NVPATF16C2 treatment= 12. Step Type is Z but the program assumes LT-M-I
-W- WARNING sample NVPATF16C2 treatment= 12. Step Type is I but the program assumes LT-M-Z
368  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_IZZI+andC++/measurements.txt
10  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_IZZI+andC++/specimens.txt
-I- Removing non-MagIC column names from measurements: sample site location 

-I- Removing non-MagIC column names from specimens: height site location 

-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_IZZI+andC++/measurements.txt
-I- 368 records written to measurements file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_IZZI+andC++/specimens.txt
-I- 10 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_IZZI+andC++/samples.txt
-I- 9 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_IZZI+andC++/sites.txt
-I- 9 records written to sites file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_IZZI+andC++/measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<p>An example for both microwave OT+:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">livdb</span><span class="p">(</span><span class="s1">&#39;data_files/convert_2_magic/livdb_magic/MW_OT+/&#39;</span><span class="p">,</span>
             <span class="n">output_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/livdb_magic/MW_OT+&#39;</span><span class="p">,</span>
             <span class="n">site_name_con</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">site_num_chars</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Open file:  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_OT+/16-1.livdb
45  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_OT+/measurements.txt
1  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_OT+/specimens.txt
-I- Removing non-MagIC column names from measurements: sample site location 

-I- Removing non-MagIC column names from specimens: height site location 

-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_OT+/measurements.txt
-I- 45 records written to measurements file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_OT+/specimens.txt
-I- 1 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_OT+/samples.txt
-I- 1 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_OT+/sites.txt
-I- 1 records written to sites file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_OT+/measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<p>And an example for MW_P experiments.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">livdb</span><span class="p">(</span><span class="s1">&#39;data_files/convert_2_magic/livdb_magic/MW_P/&#39;</span><span class="p">,</span>
             <span class="n">output_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/livdb_magic/MW_P&#39;</span><span class="p">,</span>
             <span class="n">site_name_con</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">site_num_chars</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Open file:  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_P/perp.csv
73  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_P/measurements.txt
4  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_P/specimens.txt
-I- Removing non-MagIC column names from measurements: sample site location 

-I- Removing non-MagIC column names from specimens: height site location 

-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_P/measurements.txt
-I- 73 records written to measurements file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_P/specimens.txt
-I- 4 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_P/samples.txt
-I- 4 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_P/sites.txt
-I- 2 records written to sites file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/livdb_magic/MW_P/measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<p>Now you can look at these data (except for MW_P) with thellier_gui or <a class="reference external" href="#thellier_magic">thellier_magic</a>.</p>
</section>
<section id="mst-magic">
<h3>mst_magic<a class="headerlink" href="#mst-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#mst_magic.py">[command line version]</a></p>
<p>To convert a Curie Temperature experiment to MagIC, use <strong>convert.mst()</strong>.  The data file format should be a space delimited file with temperature and magnetization couplets.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">mst</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function mst in module pmagpy.convert_2_magic:

mst(infile, spec_name=&#39;unknown&#39;, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, meas_file=&#39;measurements.txt&#39;, samp_infile=&#39;samples.txt&#39;, user=&#39;&#39;, specnum=0, samp_con=&#39;1&#39;, labfield=0.5, location=&#39;unknown&#39;, syn=False, data_model_num=3)
    Convert MsT data (T,M) to MagIC measurements format files
    
    Parameters
    ----------
    infile : str
        input file name
    specimen : str
        specimen name, default &quot;unknown&quot;
    dir_path : str
        working directory, default &quot;.&quot;
    input_dir_path : str
        input file directory IF different from dir_path, default &quot;&quot;
    meas_file : str
        output measurement file name, default &quot;measurements.txt&quot;
    samp_infile : str
        existing sample infile (not required), default &quot;samples.txt&quot;
    user : str
        user name, default &quot;&quot;
    specnum : int
        number of characters to designate a specimen, default 0
    samp_con : str
        sample/site naming convention, default &#39;1&#39;, see info below
    labfield : float
        DC_FIELD in Tesla, default : .5
    location : str
        location name, default &quot;unknown&quot;
    syn : bool
       synthetic, default False
    data_model_num : int
        MagIC data model 2 or 3, default 3
    
    Returns
    --------
    type - Tuple : (True or False indicating if conversion was sucessful, file name written)
    
    
    Info
    --------
    Sample naming convention:
        [1] XXXXY: where XXXX is an arbitrary length site designation and Y
            is the single character sample designation.  e.g., TG001a is the
            first sample from site TG001.    [default]
        [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
        [5] site name = sample name
        [6] site name entered in site_name column in the orient.txt format input file  -- NOT CURRENTLY SUPPORTED
        [7-Z] [XXX]YYY:  XXX is site designation with Z characters from samples  XXXYYY
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">mst</span><span class="p">(</span><span class="s1">&#39;curie_example.dat&#39;</span><span class="p">,</span><span class="n">samp_con</span><span class="o">=</span><span class="s2">&quot;5&quot;</span><span class="p">,</span>
           <span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/mst_magic/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>560  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/mst_magic/measurements.txt
results put in  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/mst_magic/measurements.txt
-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/mst_magic/specimens.txt
-I- 1 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/mst_magic/samples.txt
-I- 1 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/mst_magic/sites.txt
-I- 1 records written to sites file
-I- writing locations records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/mst_magic/locations.txt
-I- 1 records written to locations file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/mst_magic/samples.txt
-I- 1 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/mst_magic/sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/mst_magic/locations.txt
-I- 1 records written to locations file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/mst_magic/measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<p>We can now use <a class="reference external" href="#curie">curie</a> to plot the data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">curie</span><span class="p">(</span><span class="n">path_to_file</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/mst_magic/&#39;</span><span class="p">,</span><span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;measurements.txt&#39;</span><span class="p">,</span><span class="n">magic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>second derivative maximum is at T=205
</pre></div>
</div>
<img alt="../_images/PmagPy_MagIC_190_1.png" src="../_images/PmagPy_MagIC_190_1.png" />
<img alt="../_images/PmagPy_MagIC_190_2.png" src="../_images/PmagPy_MagIC_190_2.png" />
<img alt="../_images/PmagPy_MagIC_190_3.png" src="../_images/PmagPy_MagIC_190_3.png" />
<img alt="../_images/PmagPy_MagIC_190_4.png" src="../_images/PmagPy_MagIC_190_4.png" />
</div>
</div>
</section>
<section id="pmd-magic">
<h3>pmd_magic<a class="headerlink" href="#pmd-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#pmd_magic.py">[command line version]</a></p>
<p>This format is the one used to import .PMD formatted magnetometer files (used for example in the PaleoMac software of Cogné, 2003) into the MagIC format. (See <a class="reference external" href="http://www.ipgp.fr/~cogne/pub/paleomac/PMhome.html">http://www.ipgp.fr/~cogne/pub/paleomac/PMhome.html</a> for the PaleoMac home page. The version of these files that <strong>pmd_magic</strong> expects (UCSC version) contains demagnetization data for a single specimen and has a format as in the example file in ../measurement_import/pmd_magic/PMD/ss0207a.pmd</p>
<p>The first line is a comment line. The second line has the specimen name, the core azimuth (a=) and plunge (b=) which are assumed to be the lab arrow azimuth and plunge (Orientation scheme #4)D. The third line is a header explaining the columns in the file.</p>
<p>Use <strong>convert.pmd()</strong>  to convert the file ss0101a.pmd in the directory ’PMD’ in the ’pmd_magic’ folder of the measurement_import directory in the example data_files directory. These were taken at a location named ’Summit Springs’ and have a naming convention of the type XXXX[YYY], where YYY is sample designation with Z characters from site XXX, or naming convention # 4-2. A single character distinguishes the specimen from the sample (specnum=1). All samples were oriented with a magnetic compass.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">pmd</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function pmd in module pmagpy.convert_2_magic:

pmd(mag_file, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, meas_file=&#39;measurements.txt&#39;, spec_file=&#39;specimens.txt&#39;, samp_file=&#39;samples.txt&#39;, site_file=&#39;sites.txt&#39;, loc_file=&#39;locations.txt&#39;, lat=&#39;&#39;, lon=&#39;&#39;, specnum=0, samp_con=&#39;1&#39;, location=&#39;unknown&#39;, noave=0, meth_code=&#39;LP-NO&#39;)
    converts PMD (Enkin)  format files to MagIC format files
    
    Parameters
    ----------
    mag_file : str
        input file name, required
    dir_path : str
        working directory, default &quot;.&quot;
    input_dir_path : str
        input file directory IF different from dir_path, default &quot;&quot;
    spec_file : str
        output specimen file name, default &quot;specimens.txt&quot;
    samp_file: str
        output sample file name, default &quot;samples.txt&quot;
    site_file : str
        output site file name, default &quot;sites.txt&quot;
    loc_file : str
        output location file name, default &quot;locations.txt&quot;
    lat : float or str
        latitude, default &quot;&quot;
    lon : float or str
        longitude, default &quot;&quot;
    specnum : int
        number of characters to designate a specimen, default 0
    samp_con : str
        sample/site naming convention, default &#39;1&#39;, see info below
    location : str
        location name, default &quot;unknown&quot;
    noave : bool
       do not average duplicate measurements, default False (so by default, DO average)
    meth_code : str
        default &quot;LP-NO&quot;
        e.g. [SO-MAG, SO-SUN, SO-SIGHT, ...]
    
    Returns
    ---------
    Tuple : (True or False indicating if conversion was sucessful, file name written)
    
    
    Info
    --------
    Sample naming convention:
        [1] XXXXY: where XXXX is an arbitrary length site designation and Y
            is the single character sample designation.  e.g., TG001a is the
            first sample from site TG001.    [default]
        [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
        [5] site name = sample name
        [6] site name entered in site_name column in the orient.txt format input file  -- NOT CURRENTLY SUPPORTED
        [7-Z] [XXX]YYY:  XXX is site designation with Z characters from samples  XXXYYY
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">pmd</span><span class="p">(</span><span class="s1">&#39;ss0207a.pmd&#39;</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/pmd_magic/PMD/&#39;</span><span class="p">,</span>
           <span class="n">samp_con</span><span class="o">=</span><span class="s1">&#39;4-2&#39;</span><span class="p">,</span><span class="n">location</span><span class="o">=</span><span class="s1">&#39;Summit Springs&#39;</span><span class="p">,</span><span class="n">specnum</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-I- writing specimens records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/pmd_magic/PMD/specimens.txt
-I- 1 records written to specimens file
-I- writing samples records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/pmd_magic/PMD/samples.txt
-I- 1 records written to samples file
-I- writing sites records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/pmd_magic/PMD/sites.txt
-I- 1 records written to sites file
-I- writing locations records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/pmd_magic/PMD/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/nebula/Python/PmagPy/data_files/convert_2_magic/pmd_magic/PMD/measurements.txt
-I- 8 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/pmd_magic/PMD/measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
</section>
<section id="sio-magic">
<h3>sio_magic<a class="headerlink" href="#sio-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#sio_magic.py">[command line version]</a></p>
<p>This program allows conversion of the SIO format magnetometer files to the MagIC common measurements format. The columns in the example data file are:</p>
<p>Specimen treatment intensity declination inclination optional_string</p>
<p>The treatment field is the temperature (in centigrade), the AF field (in mT), the impulse field strength, etc. For special experiments like IRM acquisition, the coil number of the popular ASC impulse magnetizer can be specified if the treatment steps are in volts. The position for anisotropy experiments or whether the treatment is “in-field” or in zero field also require special formatting. The units of the intensity field are in cgs and the directions are relative to the ‘lab arrow’ on the specimen. Here are some examples of commonly used specimens and conversions from field arrow to lab arrow.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s1">&#39;data_files/Figures/samples.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/PmagPy_MagIC_195_0.png" src="../_images/PmagPy_MagIC_195_0.png" />
</div>
</div>
<p>As an example, we use data from Sbarbori et al. (2009) done on a set of samples from the location “Socorro”, including AF, thermal, and thellier experimental data. These were saved in sio_af_example.dat, sio_thermal_example.dat, and sio_thellier_example.dat respectively. The lab field for the thellier experiment was 25 μT and was applied along the specimen’s Z axis (phi=0,theta=90).]</p>
<p>We can convert the example files into measurement formatted files with names like af_measurements.txt, etc. using the function <strong>convert.sio()</strong>.   Then combine them together following the instructions for  <a class="reference external" href="#combine_magic">combine_magic</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">sio</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function sio in module pmagpy.convert_2_magic:

sio(mag_file, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, meas_file=&#39;measurements.txt&#39;, spec_file=&#39;specimens.txt&#39;, samp_file=&#39;samples.txt&#39;, site_file=&#39;sites.txt&#39;, loc_file=&#39;locations.txt&#39;, samp_infile=&#39;&#39;, institution=&#39;&#39;, syn=False, syntype=&#39;&#39;, instrument=&#39;&#39;, labfield=0, phi=0, theta=0, peakfield=0, specnum=0, samp_con=&#39;1&#39;, location=&#39;unknown&#39;, lat=&#39;&#39;, lon=&#39;&#39;, noave=False, codelist=&#39;&#39;, cooling_rates=&#39;&#39;, coil=&#39;&#39;, timezone=&#39;UTC&#39;, user=&#39;&#39;)
    converts Scripps Institution of Oceanography measurement files to MagIC data base model 3.0
    
    Parameters
    _________
    magfile : input measurement file
    dir_path : output directory path, default &quot;.&quot;
    input_dir_path : input file directory IF different from dir_path, default &quot;&quot;
    meas_file : output file measurement file name, default &quot;measurements.txt&quot;
    spec_file : output file specimen file name, default &quot;specimens.txt&quot;
    samp_file : output file sample file name, default &quot;samples.tt&quot;
    site_file : output file site file name, default &quot;sites.txt&quot;
    loc_file : output file location file name, default &quot;locations.txt&quot;
    samp_infile : output file to append to, default &quot;&quot;
    syn : if True, this is a synthetic specimen, default False
    syntype :  sample material type, default &quot;&quot;
    instrument : instrument on which the measurements were made (e.g., &quot;SIO-2G&quot;), default &quot;&quot;
    labfield : lab field in microtesla for TRM, default 0
    phi, theta : direction of lab field [-1,-1 for anisotropy experiments], default 0, 0
    peakfield : peak af field in mT for ARM, default 0
    specnum : number of terminal characters distinguishing specimen from sample, default 0
    samp_con :  sample/site naming convention, default &#39;1&#39;
            &quot;1&quot; XXXXY: where XXXX is an arbitr[ary length site designation and Y
                is the single character sample designation.  e.g., TG001a is the
                first sample from site TG001.    [default]
            &quot;2&quot; XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
            &quot;3&quot; XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
            &quot;4-Z&quot; XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
            &quot;5&quot; site name same as sample
            &quot;6&quot; site is entered under a separate column NOT CURRENTLY SUPPORTED
            &quot;7-Z&quot; [XXXX]YYY:  XXXX is site designation with Z characters with sample name XXXXYYYY
            NB: all others you will have to customize your self
                 or e-mail ltauxe@ucsd.edu for help.
    
            &quot;8&quot; synthetic - has no site name
            &quot;9&quot; ODP naming convention
    location : location name for study, default &quot;unknown&quot;
    lat : latitude of sites, default &quot;&quot;
    lon : longitude of sites, default &quot;&quot;
    noave : boolean, if False, average replicates, default False
    codelist : colon delimited string of lab protocols (e.g., codelist=&quot;AF&quot;), default &quot;&quot;
        AF:  af demag
        T: thermal including thellier but not trm acquisition
        S: Shaw method
        I: IRM (acquisition)
        N: NRM only
        TRM: trm acquisition
        ANI: anisotropy experiment
        D: double AF demag
        G: triple AF demag (GRM protocol)
        CR: cooling rate experiment.
            The treatment coding of the measurement file should be: XXX.00,XXX.10, XXX.20 ...XX.70 etc. (XXX.00 is optional)
            where XXX in the temperature and .10,.20... are running numbers of the cooling rates steps.
            XXX.00 is optional zerofield baseline. XXX.70 is alteration check.
            syntax in sio_magic is: -LP CR xxx,yyy,zzz,..... xxx -A
            where xxx, yyy, zzz...xxx  are cooling time in [K/minutes], seperated by comma, ordered at the same order as XXX.10,XXX.20 ...XX.70
            if you use a zerofield step then no need to specify the cooling rate for the zerofield
            It is important to add to the command line the -A option so the measurements will not be averaged.
            But users need to make sure that there are no duplicate measurements in the file
    cooling_rates :  cooling rate in K/sec for cooling rate dependence studies (K/minutes)
            in comma separated list for each cooling rate (e.g., &quot;43.6,1.3,43.6&quot;)
    coil : 1,2, or 3 unist of IRM field in volts using ASC coil #1,2 or 3
        the fast and slow experiments in comma separated string (e.g., fast:  43.6 K/min,  slow:  1.3 K/min)
    timezone : timezone of date/time string in comment string, default &quot;UTC&quot;
    user : analyst, default &quot;&quot;
    
    Effects
    _______
    creates MagIC formatted tables
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">sio</span><span class="p">(</span><span class="s1">&#39;sio_af_example.dat&#39;</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/sio_magic/&#39;</span><span class="p">,</span>
           <span class="n">specnum</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">location</span><span class="o">=</span><span class="s1">&#39;Isla Soccoro&#39;</span><span class="p">,</span><span class="n">codelist</span><span class="o">=</span><span class="s1">&#39;AF&#39;</span><span class="p">,</span><span class="n">samp_con</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span>
           <span class="n">meas_file</span><span class="o">=</span><span class="s1">&#39;af_measurements.txt&#39;</span><span class="p">,</span><span class="n">spec_file</span><span class="o">=</span><span class="s1">&#39;af_specimens.txt&#39;</span><span class="p">,</span>
           <span class="n">samp_file</span><span class="o">=</span><span class="s1">&#39;af_samples.txt&#39;</span><span class="p">,</span><span class="n">site_file</span><span class="o">=</span><span class="s1">&#39;af_sites.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/af_specimens.txt
-I- 1 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/af_samples.txt
-I- 1 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/af_sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/locations.txt
-I- 1 records written to locations file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/af_measurements.txt
-I- 14 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/af_measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">sio</span><span class="p">(</span><span class="s1">&#39;sio_thermal_example.dat&#39;</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/sio_magic/&#39;</span><span class="p">,</span>
            <span class="n">specnum</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">location</span><span class="o">=</span><span class="s1">&#39;Isla Soccoro&#39;</span><span class="p">,</span><span class="n">codelist</span><span class="o">=</span><span class="s1">&#39;T&#39;</span><span class="p">,</span>
            <span class="n">meas_file</span><span class="o">=</span><span class="s1">&#39;thermal_measurements.txt&#39;</span><span class="p">,</span><span class="n">spec_file</span><span class="o">=</span><span class="s1">&#39;thermal_specimens.txt&#39;</span><span class="p">,</span>
            <span class="n">samp_file</span><span class="o">=</span><span class="s1">&#39;thermal_samples.txt&#39;</span><span class="p">,</span><span class="n">site_file</span><span class="o">=</span><span class="s1">&#39;thermal_sites.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/thermal_specimens.txt
-I- 1 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/thermal_samples.txt
-I- 1 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/thermal_sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/locations.txt
-I- 1 records written to locations file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/thermal_measurements.txt
-I- 22 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/thermal_measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<p>And combine them together…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># combine the measurements files</span>
<span class="n">measfiles</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;data_files/convert_2_magic/sio_magic/af_measurements.txt&#39;</span><span class="p">,</span>
           <span class="s1">&#39;data_files/convert_2_magic/sio_magic/thermal_measurements.txt&#39;</span><span class="p">]</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">measfiles</span><span class="p">,</span><span class="s1">&#39;data_files/convert_2_magic/sio_magic/measurements.txt&#39;</span><span class="p">)</span>

<span class="n">specfiles</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;data_files/convert_2_magic/sio_magic/af_specimens.txt&#39;</span><span class="p">,</span>
           <span class="s1">&#39;data_files/convert_2_magic/sio_magic/thermal_specimens.txt&#39;</span><span class="p">]</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">specfiles</span><span class="p">,</span><span class="s1">&#39;data_files/convert_2_magic/sio_magic/specimens.txt&#39;</span><span class="p">,</span> <span class="n">magic_table</span><span class="o">=</span><span class="s1">&#39;specimens&#39;</span><span class="p">)</span>

<span class="n">sitefiles</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;data_files/convert_2_magic/sio_magic/af_sites.txt&#39;</span><span class="p">,</span>
           <span class="s1">&#39;data_files/convert_2_magic/sio_magic/thermal_sites.txt&#39;</span><span class="p">]</span>
<span class="n">ipmag</span><span class="o">.</span><span class="n">combine_magic</span><span class="p">(</span><span class="n">sitefiles</span><span class="p">,</span><span class="s1">&#39;data_files/convert_2_magic/sio_magic/sites.txt&#39;</span><span class="p">,</span><span class="n">magic_table</span><span class="o">=</span><span class="s1">&#39;sites&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/measurements.txt
-I- 36 records written to measurements file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/specimens.txt
-I- 2 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/sites.txt
-I- 1 records written to sites file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/sio_magic/sites.txt&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="sufar4-magic">
<h3>sufar4_magic<a class="headerlink" href="#sufar4-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#sufar4_asc_magic.py">[command line version]</a></p>
<p>The AGICO program SUFAR creates ascii txt files as output.  <strong>convert.sufar4()</strong> will convert these to the MagIC format.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">sufar4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function sufar4 in module pmagpy.convert_2_magic:

sufar4(ascfile, meas_output=&#39;measurements.txt&#39;, aniso_output=&#39;rmag_anisotropy.txt&#39;, spec_infile=None, spec_outfile=&#39;specimens.txt&#39;, samp_outfile=&#39;samples.txt&#39;, site_outfile=&#39;sites.txt&#39;, specnum=0, sample_naming_con=&#39;1&#39;, user=&#39;&#39;, locname=&#39;unknown&#39;, instrument=&#39;&#39;, static_15_position_mode=False, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, data_model_num=3)
    Converts ascii files generated by SUFAR ver.4.0 to MagIC files
    
    Parameters
    ----------
    ascfile : str
        input ASC file, required
    meas_output : str
        measurement output filename, default &quot;measurements.txt&quot;
    aniso_output : str
        anisotropy output filename, MagIC 2 only, &quot;rmag_anisotropy.txt&quot;
    spec_infile : str
        specimen infile, default None
    spec_outfile : str
        specimen outfile, default &quot;specimens.txt&quot;
    samp_outfile : str
        sample outfile, default &quot;samples.txt&quot;
    site_outfile : str
        site outfile, default &quot;sites.txt&quot;
    specnum : int
        number of characters to designate a specimen, default 0
    sample_naming_con : str
        sample/site naming convention, default &#39;1&#39;, see info below
    user : str
        user name, default &quot;&quot;
    locname : str
        location name, default &quot;unknown&quot;
    instrument : str
        instrument name, default &quot;&quot;
    static_15_position_mode : bool
        specify static 15 position mode - default False (is spinning)
    dir_path : str
        output directory, default &quot;.&quot;
    input_dir_path : str
        input file directory IF different from dir_path, default &quot;&quot;
    data_model_num : int
        MagIC data model 2 or 3, default 3
    
    Returns
    --------
    type - Tuple : (True or False indicating if conversion was sucessful, file name written)
    
    Info
    --------
    Sample naming convention:
        [1] XXXXY: where XXXX is an arbitrary length site designation and Y
            is the single character sample designation.  e.g., TG001a is the
            first sample from site TG001.    [default]
        [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
        [5] site name = sample name
        [6] site name entered in site_name column in the orient.txt format input file  -- NOT CURRENTLY SUPPORTED
        [7-Z] [XXX]YYY:  XXX is site designation with Z characters from samples  XXXYYY
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">sufar4</span><span class="p">(</span><span class="s1">&#39;sufar4-asc_magic_example.txt&#39;</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/sufar_asc_magic/&#39;</span><span class="p">,</span>
              <span class="n">sample_naming_con</span><span class="o">=</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="n">locname</span><span class="o">=</span><span class="s1">&#39;U1356A&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>290  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sufar_asc_magic/measurements.txt
bulk measurements put in  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sufar_asc_magic/measurements.txt
728  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sufar_asc_magic/specimens.txt
specimen/anisotropy info put in  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sufar_asc_magic/specimens.txt
148  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sufar_asc_magic/samples.txt
sample info put in  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sufar_asc_magic/samples.txt
148  records written to file  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sufar_asc_magic/sites.txt
site info put in  /Users/nebula/Python/PmagPy/data_files/convert_2_magic/sufar_asc_magic/sites.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/sufar_asc_magic/measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
<p>Now we can test it out with, for example, <a class="reference external" href="#aniso_magic">ipmag.aniso_magic_nb()</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">aniso_magic_nb</span><span class="p">(</span><span class="n">infile</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/sufar_asc_magic/specimens.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1  saved in  U1356A_s_aniso-data.png
2  saved in  U1356A_s_aniso-conf.png
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, [&#39;U1356A_s_aniso-data.png&#39;, &#39;U1356A_s_aniso-conf.png&#39;])
</pre></div>
</div>
</div>
</div>
</section>
<section id="tdt-magic">
<h3>tdt_magic<a class="headerlink" href="#tdt-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#tdt_magic.py">[command line version]</a></p>
<p>Convertions of the Thellier Tool format of Leonhardt et al., 2004 can be done with <strong>convert.tdt()</strong>.  THERE IS A PROBLEM WITH THE XXX.4 TREATMENT STEP CONVERSION.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">tdt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function tdt in module pmagpy.convert_2_magic:

tdt(input_dir_path, experiment_name=&#39;Thellier&#39;, meas_file_name=&#39;measurements.txt&#39;, spec_file_name=&#39;specimens.txt&#39;, samp_file_name=&#39;samples.txt&#39;, site_file_name=&#39;sites.txt&#39;, loc_file_name=&#39;locations.txt&#39;, user=&#39;&#39;, location=&#39;&#39;, lab_dec=0, lab_inc=90, moment_units=&#39;mA/m&#39;, samp_name_con=&#39;sample=specimen&#39;, samp_name_chars=0, site_name_con=&#39;site=sample&#39;, site_name_chars=0, volume=12.0, output_dir_path=&#39;&#39;)
    converts TDT formatted files to measurements format files
    
    Parameters
    ----------
    input_dir_path : str
        directory with one or more .tdt files
    experiment: str
        one of: [&quot;Thellier&quot;, &quot;ATRM 6 pos&quot;, &quot;NLT&quot;], default &quot;Thellier&quot;
    meas_file_name : str
        default &quot;measurements.txt&quot;
    spec_file_name : str
        default &quot;specimens.txt&quot;
    samp_file_name : str
        default &quot;samples.txt&quot;
    site_file_name : str
        default &quot;sites.txt&quot;
    loc_file_name : str
        default &quot;locations.txt&quot;
    user : str
        default &quot;&quot;
    location : str
        default &quot;&quot;
    lab_dec: int
        default: 0
    lab_inc: int
        default 90
    moment_units : str
        must be one of: [&quot;mA/m&quot;, &quot;emu&quot;, &quot;Am^2&quot;], default &quot;mA/m&quot;
    samp_name_con : str or int
        {1: &quot;sample=specimen&quot;, 2: &quot;no. of terminate characters&quot;, 3: &quot;character delimited&quot;}
    samp_name_chars : str or int
        number of characters to remove for sample name, (or delimiting character), default 0
    site_name_con : str or int
        {1: &quot;site=sample&quot;, 2: &quot;no. of terminate characters&quot;, 3: &quot;character delimited&quot;}
    site_name_chars : str or int
        number of characters to remove for site name, (or delimiting character), default 0
    volume : float
        volume in cc, default 12
    output_dir_path : str
        path for file output, defaults to input_dir_path
    
    
    Returns
    ---------
    tuple : (True if program ran else False, measurement outfile name or error message if failed)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">tdt</span><span class="p">(</span><span class="s1">&#39;data_files/convert_2_magic/tdt_magic/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Open file:  data_files/convert_2_magic/tdt_magic/Krasa_MGH1.tdt
Open file:  data_files/convert_2_magic/tdt_magic/Krasa_MGH1_noAC.tdt
-I- Using online data model
-I- Getting method codes from earthref.org
-I- Importing controlled vocabularies from https://earthref.org
-I- writing specimens records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/tdt_magic/specimens.txt
-I- 1 records written to specimens file
-I- writing samples records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/tdt_magic/samples.txt
-I- 1 records written to samples file
-I- writing sites records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/tdt_magic/sites.txt
-I- 1 records written to sites file
-I- writing locations records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/tdt_magic/locations.txt
-I- 1 records written to locations file
-I- writing measurements records to /Users/ltauxe/PmagPy/data_files/convert_2_magic/tdt_magic/measurements.txt
-I- 40 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/ltauxe/PmagPy/data_files/convert_2_magic/tdt_magic/measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
</section>
<section id="utrecht-magic">
<h3>utrecht_magic<a class="headerlink" href="#utrecht-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#utrecht_magic.py">[command line version]</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">utrecht</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function utrecht in module pmagpy.convert_2_magic:

utrecht(mag_file, dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, meas_file=&#39;measurements.txt&#39;, spec_file=&#39;specimens.txt&#39;, samp_file=&#39;samples.txt&#39;, site_file=&#39;sites.txt&#39;, loc_file=&#39;locations.txt&#39;, location=&#39;unknown&#39;, lat=&#39;&#39;, lon=&#39;&#39;, dmy_flag=False, noave=False, meas_n_orient=8, meth_code=&#39;LP-NO&#39;, specnum=1, samp_con=&#39;2&#39;, labfield=0, phi=0, theta=0)
    Converts Utrecht magnetometer data files to MagIC files
    
    Parameters
    ----------
    mag_file : str
        input file name
    dir_path : str
        working directory, default &quot;.&quot;
    input_dir_path : str
        input file directory IF different from dir_path, default &quot;&quot;
    spec_file : str
        output specimen file name, default &quot;specimens.txt&quot;
    samp_file: str
        output sample file name, default &quot;samples.txt&quot;
    site_file : str
        output site file name, default &quot;sites.txt&quot;
    loc_file : str
        output location file name, default &quot;locations.txt&quot;
    append : bool
        append output files to existing files instead of overwrite, default False
    location : str
        location name, default &quot;unknown&quot;
    lat : float
        latitude, default &quot;&quot;
    lon : float
        longitude, default &quot;&quot;
    dmy_flag : bool
        default False
    noave : bool
       do not average duplicate measurements, default False (so by default, DO average)
    meas_n_orient : int
        Number of different orientations in measurement (default : 8)
    meth_code : str
        sample method codes, default &quot;LP-NO&quot;
        e.g. [SO-MAG, SO-SUN, SO-SIGHT, ...]
    specnum : int
        number of characters to designate a specimen, default 0
    samp_con : str
        sample/site naming convention, default &#39;2&#39;, see info below
    labfield : float
        DC_FIELD in microTesla (default : 0)
    phi : float
        DC_PHI in degrees (default : 0)
    theta : float
        DC_THETA in degrees (default : 0)
    
    Returns
    ----------
    type - Tuple : (True or False indicating if conversion was sucessful, meas_file name written)
    
    Info
    ---------
    Sample naming convention:
        [1] XXXXY: where XXXX is an arbitrary length site designation and Y
            is the single character sample designation.  e.g., TG001a is the
            first sample from site TG001.    [default]
        [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
        [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
        [5] site name = sample name
        [6] site name entered in site_name column in the orient.txt format input file  -- NOT CURRENTLY SUPPORTED
        [7-Z] [XXX]YYY:  XXX is site designation with Z characters from samples  XXXYYY
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert</span><span class="o">.</span><span class="n">utrecht</span><span class="p">(</span><span class="s1">&#39;Utrecht_Example.af&#39;</span><span class="p">,</span><span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/convert_2_magic/utrecht_magic&#39;</span><span class="p">,</span>
               <span class="n">specnum</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">samp_con</span><span class="o">=</span><span class="s1">&#39;3&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/utrecht_magic/specimens.txt
-I- 25 records written to specimens file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/utrecht_magic/samples.txt
-I- 25 records written to samples file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/utrecht_magic/sites.txt
-I- 1 records written to sites file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/utrecht_magic/locations.txt
-I- 1 records written to locations file
-I- overwriting /Users/nebula/Python/PmagPy/data_files/convert_2_magic/utrecht_magic/measurements.txt
-I- 350 records written to measurements file
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True,
 &#39;/Users/nebula/Python/PmagPy/data_files/convert_2_magic/utrecht_magic/measurements.txt&#39;)
</pre></div>
</div>
</div>
</div>
</section>
<section id="orientation-magic">
<h3>orientation_magic<a class="headerlink" href="#orientation-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/PmagPy/cookbook/#QQ2-1-25">[Preparing for MagIC]</a> <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#orientation_magic.py">[command line version]</a></p>
<p><strong>orientation_magic</strong> is meant to import the field book data as entered into the format like in  orientation_example.txt into the MagIC format samples, sites and location tables.<br />
Click <a class="reference external" href="https://earthref.org/PmagPy/cookbook/#field_info">here</a>  for details about the orient.txt file format. The example file used here has field information for a few sites. The samples were oriented with a Pomeroy orientation device (the default) and it is desirable to calculate the magnetic declination from the IGRF at the time of sampling (also the default). Sample names follow the rule that the sample is designated by a letter at the end of the site name (convention #1 - which is also the default). We can do this from within a notebook by calling  <strong>ipmag.orientation_magic()</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">orientation_magic</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function orientation_magic in module pmagpy.ipmag:

orientation_magic(or_con=1, dec_correction_con=1, dec_correction=0, bed_correction=True, samp_con=&#39;1&#39;, hours_from_gmt=0, method_codes=&#39;&#39;, average_bedding=False, orient_file=&#39;orient.txt&#39;, samp_file=&#39;samples.txt&#39;, site_file=&#39;sites.txt&#39;, output_dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, append=False, data_model=3)
        use this function to convert tab delimited field notebook information to MagIC formatted tables (er_samples and er_sites)
    
        INPUT FORMAT
            Input files must be tab delimited and have in the first line:
    tab  location_name
            Note: The &quot;location_name&quot; will facilitate searching in the MagIC database. Data from different
                &quot;locations&quot; should be put in separate files.  The definition of a &quot;location&quot; is rather loose.
                 Also this is the word &#39;tab&#39; not a tab, which will be indicated by &#39;        &#39;.
            The second line has the names of the columns (tab delimited), e.g.:
    site_name sample_name mag_azimuth field_dip date lat long sample_lithology sample_type sample_class shadow_angle hhmm stratigraphic_height bedding_dip_direction bedding_dip GPS_baseline image_name image_look image_photographer participants method_codes site_description sample_description GPS_Az, sample_igsn, sample_texture, sample_cooling_rate, cooling_rate_corr, cooling_rate_mcd
    
    
          Notes:
            1) column order doesn&#39;t matter but the NAMES do.
            2) sample_name, sample_lithology, sample_type, sample_class, lat and long are required.  all others are optional.
            3) If subsequent data are the same (e.g., date, bedding orientation, participants, stratigraphic_height),
                you can leave the field blank and the program will fill in the last recorded information. BUT if you really want a blank stratigraphic_height, enter a &#39;-1&#39;.    These will not be inherited and must be specified for each entry: image_name, look, photographer or method_codes
            4) hhmm must be in the format:  hh:mm and the hh must be in 24 hour time.
        date must be mm/dd/yy (years &lt; 50 will be converted to  20yy and &gt;50 will be assumed 19yy).  hours_from_gmt is the number of hours to SUBTRACT from hh to get to  GMT.
            5) image_name, image_look and image_photographer are colon delimited lists of file name (e.g., IMG_001.jpg) image look direction and the name of the photographer respectively.  If all images had same look and photographer, just enter info once.  The images will be assigned to the site for which they were taken - not at the sample level.
            6) participants:  Names of who helped take the samples.  These must be a colon delimited list.
            7) method_codes:  Special method codes on a sample level, e.g., SO-GT5 which means the orientation is has an uncertainty of &gt;5 degrees
                 for example if it broke off before orienting....
            8) GPS_Az is the place to put directly determined GPS Azimuths, using, e.g., points along the drill direction.
            9) sample_cooling_rate is the cooling rate in K per Ma
            10) int_corr_cooling_rate
            11) cooling_rate_mcd:  data adjustment method code for cooling rate correction;  DA-CR-EG is educated guess; DA-CR-PS is percent estimated from pilot samples; DA-CR-TRM is comparison between 2 TRMs acquired with slow and rapid cooling rates.
    is the percent cooling rate factor to apply to specimens from this sample, DA-CR-XX is the method code
    
    
        defaults:
        orientation_magic(or_con=1, dec_correction_con=1, dec_correction=0, bed_correction=True, samp_con=&#39;1&#39;, hours_from_gmt=0, method_codes=&#39;&#39;, average_bedding=False, orient_file=&#39;orient.txt&#39;, samp_file=&#39;er_samples.txt&#39;, site_file=&#39;er_sites.txt&#39;, output_dir_path=&#39;.&#39;, input_dir_path=&#39;&#39;, append=False):
        orientation conventions:
            [1] Standard Pomeroy convention of azimuth and hade (degrees from vertical down)
                 of the drill direction (field arrow).  lab arrow azimuth= sample_azimuth = mag_azimuth;
                 lab arrow dip = sample_dip =-field_dip. i.e. the lab arrow dip is minus the hade.
            [2] Field arrow is the strike  of the plane orthogonal to the drill direction,
                 Field dip is the hade of the drill direction.  Lab arrow azimuth = mag_azimuth-90
                 Lab arrow dip = -field_dip
            [3] Lab arrow is the same as the drill direction;
                 hade was measured in the field.
                 Lab arrow azimuth = mag_azimuth; Lab arrow dip = 90-field_dip
            [4] lab azimuth and dip are same as mag_azimuth, field_dip : use this for unoriented samples too
            [5] Same as AZDIP convention explained below -
                azimuth and inclination of the drill direction are mag_azimuth and field_dip;
                lab arrow is as in [1] above.
                lab azimuth is same as mag_azimuth,lab arrow dip=field_dip-90
            [6] Lab arrow azimuth = mag_azimuth-90; Lab arrow dip = 90-field_dip
            [7] see http://earthref.org/PmagPy/cookbook/#field_info for more information.  You can customize other format yourself, or email ltauxe@ucsd.edu for help.
    
    
        Magnetic declination convention:
            [1] Use the IGRF value at the lat/long and date supplied [default]
            [2] Will supply declination correction
            [3] mag_az is already corrected in file
            [4] Correct mag_az but not bedding_dip_dir
    
        Sample naming convention:
            [1] XXXXY: where XXXX is an arbitrary length site designation and Y
                is the single character sample designation.  e.g., TG001a is the
                first sample from site TG001.    [default]
            [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
            [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
            [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
            [5] site name = sample name
            [6] site name entered in site_name column in the orient.txt format input file  -- NOT CURRENTLY SUPPORTED
            [7-Z] [XXX]YYY:  XXX is site designation with Z characters from samples  XXXYYY
            NB: all others you will have to either customize your
                self or e-mail ltauxe@ucsd.edu for help.
</pre></div>
</div>
</div>
</div>
<p>We need to know which orientation convention was used to take the samples (it was with a Pomeroy, so, the default).  We want to use the igrf calculated magnetic declination at each site (so dec_correction_con=1, the default).  These samples were collected in Antarctica with a local time of GMT+13, so we need to subtract 13 hours so hours_from_gmt should be 13.  we are using data model 3.0 for this notebook, so data_model=3.  Also, input_dir_path and output_dir_path are both ../orientation_magic.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">orientation_magic</span><span class="p">(</span><span class="n">input_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/orientation_magic&#39;</span><span class="p">,</span><span class="n">orient_file</span><span class="o">=</span><span class="s1">&#39;orient_example.txt&#39;</span><span class="p">,</span>
                        <span class="n">hours_from_gmt</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span><span class="n">data_model</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">output_dir_path</span><span class="o">=</span><span class="s1">&#39;data_files/orientation_magic&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>setting location name to &quot;&quot;
setting location name to &quot;&quot;
saving data...
24  records written to file  /Users/nebula/Python/PmagPy/data_files/orientation_magic/samples.txt
2  records written to file  /Users/nebula/Python/PmagPy/data_files/orientation_magic/sites.txt
Data saved in  /Users/nebula/Python/PmagPy/data_files/orientation_magic/samples.txt  and  /Users/nebula/Python/PmagPy/data_files/orientation_magic/sites.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, None)
</pre></div>
</div>
</div>
</div>
</section>
<section id="azdip-magic">
<h3>azdip_magic<a class="headerlink" href="#azdip-magic" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://earthref.org/MagIC">[MagIC Database]</a>  <a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#azdip_magic.py">[command line version]</a></p>
<p>Many paleomagnetists save orientation information in files in this format: Sample Azimuth Plunge Strike Dip (AZDIP format), where the Azimuth and Plunge are the declination and inclination of the drill direction and the strike and dip are the attitude of the sampled unit (with dip to the right of strike). Of course there are many ways to think about sample orientation and the MagIC database convention is to store the direction of the X coordinate of the specimen measurements. To convert an AzDip formatted file (example in data_files/azdip_magic/azdip_magic_example.dat), we can use <strong>ipmag.azdip_magic()</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ipmag</span><span class="o">.</span><span class="n">azdip_magic</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function azdip_magic in module pmagpy.ipmag:

azdip_magic(orient_file=&#39;orient.txt&#39;, samp_file=&#39;samples.txt&#39;, samp_con=&#39;1&#39;, Z=1, method_codes=&#39;FS-FD&#39;, location_name=&#39;unknown&#39;, append=False, output_dir=&#39;.&#39;, input_dir=&#39;.&#39;, data_model=3)
    takes space delimited AzDip file and converts to MagIC formatted tables
    
    Parameters
    __________
        orient_file : name of azdip formatted input file
        samp_file : name of samples.txt formatted output file
        samp_con :  integer of sample orientation convention
            [1] XXXXY: where XXXX is an arbitrary length site designation and Y
                is the single character sample designation.  e.g., TG001a is the
                first sample from site TG001.    [default]
            [2] XXXX-YY: YY sample from site XXXX (XXX, YY of arbitary length)
            [3] XXXX.YY: YY sample from site XXXX (XXX, YY of arbitary length)
            [4-Z] XXXX[YYY]:  YYY is sample designation with Z characters from site XXX
            [5] site name same as sample
            [6] site name entered in site_name column in the orient.txt format input file  -- NOT CURRENTLY SUPPORTED
            [7-Z] [XXXX]YYY:  XXXX is site designation with Z characters with sample name XXXXYYYY
    
        method_codes :  colon delimited string with the following as desired
             FS-FD field sampling done with a drill
             FS-H field sampling done with hand samples
             FS-LOC-GPS  field location done with GPS
             FS-LOC-MAP  field location done with map
             SO-POM   a Pomeroy orientation device was used
             SO-ASC   an ASC orientation device was used
             SO-MAG   orientation with magnetic compass
        location_name : location of samples
        append : boolean.  if True, append to the output file
        output_dir : path to output file directory
        input_dir : path to input file directory
        data_model : MagIC data model.
    
    INPUT FORMAT
        Input files must be space delimited:
            Samp  Az Dip Strike Dip
        Orientation convention:
             Lab arrow azimuth = mag_azimuth; Lab arrow dip = 90-field_dip
                e.g. field_dip is degrees from horizontal of drill direction
         Magnetic declination convention:
             Az is already corrected in file
</pre></div>
</div>
</div>
</div>
<p>The method_codes are important. If you don’t specify any sample orientation method, for example, the program will assume that they are unoriented.  Pick the appropriate method codes for field sampling (FS-) and sample orientation (SO-) from the lists here:  <a class="reference external" href="https://www2.earthref.org/MagIC/method-codes">https://www2.earthref.org/MagIC/method-codes</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ipmag</span><span class="o">.</span><span class="n">azdip_magic</span><span class="p">(</span><span class="n">orient_file</span><span class="o">=</span><span class="s1">&#39;azdip_magic_example.dat&#39;</span><span class="p">,</span><span class="n">input_dir</span><span class="o">=</span><span class="s1">&#39;data_files/azdip_magic/&#39;</span><span class="p">,</span>
                  <span class="n">output_dir</span><span class="o">=</span><span class="s1">&#39;data_files/azdip_magic/&#39;</span><span class="p">,</span> <span class="n">method_codes</span><span class="o">=</span><span class="s1">&#39;FS-FD:SO-MAG&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>916  records written to file  /Users/nebula/Python/PmagPy/data_files/azdip_magic/samples.txt
Data saved in  /Users/nebula/Python/PmagPy/data_files/azdip_magic/samples.txt
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, None)
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="other-handy-scripts">
<h2>Other handy scripts<a class="headerlink" href="#other-handy-scripts" title="Permalink to this headline">#</a></h2>
<section id="chartmaker">
<h3>chartmaker<a class="headerlink" href="#chartmaker" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://pmagpy.github.io/PmagPy-cli.html#chartmaker.py">[command line version]</a></p>
<p>Chartmaker makes a chart like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s1">&#39;data_files/Figures/chartmaker.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/PmagPy_MagIC_223_0.png" src="../_images/PmagPy_MagIC_223_0.png" />
</div>
</div>
<p>You can print it out and tape it to the oven in the lab to help keep track of this annoyingly complicated experiment.  :)</p>
<p>To make this from within a notebook, call <strong>pmag.chart_maker()</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">pmag</span><span class="o">.</span><span class="n">chart_maker</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function chart_maker in module pmagpy.pmag:

chart_maker(Int, Top, start=100, outfile=&#39;chart.txt&#39;)
    Makes a chart for performing IZZI experiments. Print out the file and
    tape it to the oven.  This chart will help keep track of the different
    steps.
    Z : performed in zero field - enter the temperature XXX.0 in the sio
        formatted measurement file created by the LabView program
    I : performed in the lab field written at the top of the form
    P : a pTRM step - performed at the temperature and in the lab field.
    
    Parameters
    __________
    Int : list of intervals [e.g., 50,10,5]
    Top : list of upper bounds for each interval [e.g., 500, 550, 600]
    start : first temperature step, default is 100
    outfile : name of output file, default is &#39;chart.txt&#39;
    
    Output
    _________
    creates a file with:
         file:  write down the name of the measurement file
         field:  write down the lab field for the infield steps (in uT)
         the type of step (Z: zerofield, I: infield, P: pTRM step
         temperature of the step and code for SIO-like treatment steps
             XXX.0   [zero field]
             XXX.1   [in field]
             XXX.2   [pTRM check] - done in a lab field
         date : date the step was performed
         run # : an optional run number
         zones I-III : field in the zones in the oven
         start : time the run was started
         sp :  time the setpoint was reached
         cool : time cooling started
</pre></div>
</div>
</div>
</div>
<p>To perform 50 degree intervals from 100 to 500, followed by 10 degree intervals from 500 to 600 set up the Int and Top lists like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Int</span><span class="o">=</span><span class="p">[</span><span class="mi">50</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>
<span class="n">Top</span><span class="o">=</span><span class="p">[</span><span class="mi">500</span><span class="p">,</span><span class="mi">600</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pmag</span><span class="o">.</span><span class="n">chart_maker</span><span class="p">(</span><span class="n">Int</span><span class="p">,</span><span class="n">Top</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>output stored in: chart.txt
</pre></div>
</div>
</div>
</div>
<p>You can now print out chart.txt.  Happy IZZI-ing.</p>
</section>
</section>
<section id="clean-up">
<h2>Clean up<a class="headerlink" href="#clean-up" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="c1"># remove some individual files</span>

<span class="n">filenames</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;chart.txt&#39;</span><span class="p">,</span>
            <span class="s1">&#39;data_files/azdip_magic/samples.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;data_files/download_magic/criteria.txt&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;data_files/orientation_magic/samples.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;data_files/orientation_magic/sites.txt&#39;</span><span class="p">,</span>
            <span class="s1">&#39;data_files/download_magic/ages.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;data_files/download_magic/contribution.txt&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;data_files/download_magic/measurements.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;data_files/download_magic/samples.txt&#39;</span><span class="p">,</span>
            <span class="s1">&#39;data_files/download_magic/specimens.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;data_files/download_magic/locations.txt&#39;</span><span class="p">]</span>


<span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="k">pass</span>
  

<span class="c1"># remove all MagIC-generated files from a given directory</span>

<span class="k">def</span> <span class="nf">remove_magic_files</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
    <span class="n">magic_files</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;specimens.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;samples.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;sites.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;locations.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;measurements.txt&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;contribution.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;ages.txt&#39;</span><span class="p">]</span>
    <span class="n">dir_files</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">dtype</span> <span class="ow">in</span> <span class="n">magic_files</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">dir_files</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">fname</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">dtype</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">fname</span><span class="p">))</span>
                <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
                    <span class="k">pass</span>
    <span class="k">for</span> <span class="n">full_fname</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s1">&#39;*.magic&#39;</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">full_fname</span><span class="p">)</span>
        
        
        
<span class="c1"># not convert_2_magic/jr6_magic</span>

<span class="k">for</span> <span class="n">directory</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;data_files/convert_2_magic/2g_bin_magic/mn1&#39;</span><span class="p">,</span> <span class="s1">&#39;data_files/convert_2_magic/pmd_magic/PMD/&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;data_files&#39;</span><span class="p">,</span> <span class="s1">&#39;data_files/k15_s&#39;</span><span class="p">,</span> <span class="s1">&#39;data_files/convert_2_magic/agm_magic&#39;</span><span class="p">,</span> 
                  <span class="s1">&#39;data_files/convert_2_magic/huji_magic&#39;</span><span class="p">,</span> <span class="s1">&#39;data_files/convert_2_magic/bgc_magic&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;data_files/convert_2_magic/kly4s_magic&#39;</span><span class="p">,</span> <span class="s1">&#39;data_files/convert_2_magic/mst_magic&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;data_files/convert_ages&#39;</span><span class="p">,</span> <span class="s1">&#39;data_files/convert_2_magic/cit_magic/MIT/7325B&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;data_files/convert_2_magic/cit_magic/USGS/bl9-1&#39;</span><span class="p">,</span> <span class="s1">&#39;data_files/convert_2_magic/tdt_magic&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;data_files/convert_2_magic/ldeo_magic&#39;</span><span class="p">,</span> <span class="s1">&#39;data_files/convert_2_magic/k15_magic&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;data_files/convert_2_magic/generic_magic&#39;</span><span class="p">]:</span>
    <span class="n">remove_magic_files</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>


<span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;*.png&#39;</span><span class="p">,</span> <span class="s1">&#39;./data_files/convert_2_magic/jr6_magic/SML*.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;./data_files/download_magic/Snake*&#39;</span><span class="p">,</span>
      <span class="s1">&#39;./data_files/convert_2_magic/jr6_magic/AP12_*.txt&#39;</span><span class="p">,</span> 
      <span class="s1">&#39;./data_files/convert_2_magic/jr6_magic/*_measurements.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;./data_files/convert_2_magic/jr6_magic/*.magic&#39;</span><span class="p">,</span>
      <span class="s1">&#39;./data_files/3_0/McMurdo/*.tex&#39;</span><span class="p">,</span> <span class="s1">&#39;./data_files/3_0/McMurdo/*.xls&#39;</span><span class="p">,</span> <span class="s1">&#39;./data_files/3_0/Megiddo/*.tex&#39;</span><span class="p">,</span>
      <span class="s1">&#39;data_files/3_0/Megiddo/*.xls&#39;</span><span class="p">,</span> <span class="s2">&quot;./srm_arch*&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">directory</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>  
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./documentation_notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="PmagPy_plots_analysis.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Visualizations and more analysis with PmagPy</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../example_notebooks/example_notebooks.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Example notebooks</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By PmagPy Contributors<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>